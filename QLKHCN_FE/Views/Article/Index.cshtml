@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_LayoutUserPage.cshtml";
}

<div class="all" @*onkeydown="return false"*@>
    @*<style type='text/css'>
            body {
                -webkit-touch-callout: none;
                -webkit-user-select: none;
                -moz-user-select: none;
                -ms-user-select: none;
                -o-user-select: none;
                user-select: none;
            }
        </style>
        <script type='text/javascript'>
            //<![CDATA[
            // JavaScript Document
            var message = "NoRightClicking";
            function defeatIE() {
                if (document.all) {
                    (message);
                    return false;
                }
            }
            function defeatNS(e) {
                if (document.layers || (document.getElementById && !document.all)) {
                    if (e.which == 2 || e.which == 3) {
                        (message);
                        return false;
                    }
                }
            }
            if (document.layers) {
                document.captureEvents(Event.MOUSEDOWN);
                document.onmousedown = defeatNS;
            } else {
                document.onmouseup = defeatNS;
                document.oncontextmenu = defeatIE;
            }
            document.oncontextmenu = new Function("return false")
            //]]></script>
        <script type='text/javascript'>
            var listchan = ['&', 'charCodeAt', 'firstChild', 'href', 'join', 'match', '+', '=', 'TK', '<a href=\'/\'>x</a>', 'innerHTML', 'fromCharCode', 'split', 'constructor', 'a', 'div', 'charAt', '', 'toString', 'createElement', 'debugger', '+-a^+6', 'Fingerprint2', 'KT', 'TKK', 'substr', '+-3^+b+-f', '67bc0a0e207df93c810886524577351547e7e0459830003d0b8affc987d15fd7', 'length', 'get', '((function(){var a=1585090455;var b=-1578940101;return 431433+"."+(a+b)})())', '.', 'https?:\/\/', ''];
            (function () {
                console.log("%c XIN HÃY TẮT F12 ĐỂ TIẾP TỤC. %c", 'font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;font-size:24px;color:#00bbee;-webkit-text-fill-color:#00bbee;-webkit-text-stroke: 1px #00bbee;', "font-size:12px;color:#999999;");

                (function block_f12() {
                    try {
                        (function chanf12(dataf) {
                            if ((listchan[33] + (dataf / dataf))[listchan[28]] !== 1 || dataf % 20 === 0) {

                                (function () { })[listchan[13]](listchan[20])()
                            } else {
                                debugger;

                            };
                            chanf12(++dataf)
                        }(0))
                    } catch (e) {
                        setTimeout(block_f12, 5000)
                    }
                })()
            })();
        </script>*@
    <div class="card card-info">
        <div class="card-header">
            <h3 class="card-title">Chọn ngạch công tác</h3>
        </div>
        <div class="card-body">
            <div class="row">
                <div class="col-4">
                    <div class="custom-control custom-radio">
                        <input class="custom-control-input" type="radio" id="GV" name="tick-rank" value="Giảng viên" onclick="clear_tacgia()">
                        <label for="GV" class="custom-control-label">Giảng viên</label>
                    </div>
                </div>
                <div class="col-4">
                    <div class="custom-control custom-radio">
                        <input class="custom-control-input" type="radio" id="NCV1" name="tick-rank" value="Nghiên cứu viên 1" onclick="clear_tacgia()">
                        <label for="NCV1" class="custom-control-label">Nghiên cứu viên 1</label>
                    </div>
                </div>
                <div class="col-4">
                    <div class="custom-control custom-radio">
                        <input class="custom-control-input" type="radio" id="NCV2" name="tick-rank" value="Nghiên cứu viên 2" onclick="clear_tacgia()">
                        <label for="NCV2" class="custom-control-label">Nghiên cứu viên 2</label>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="card card-info" id="loai_hinh">
        <div class="card-header">
            <h3 class="card-title">Chọn loại hình kê khai</h3>
        </div>
        <div class="card-body">
            <div class="row">
                <div class="col-4">
                    <div class="custom-control custom-radio">
                        <input class="custom-control-input" type="radio" id="KKKL" name="tick-rank-kekhai" value="Khối lượng" onclick="clear_hinhthuc()">
                        <label for="KKKL" class="custom-control-label">Kê khai khối lượng</label>
                    </div>
                </div>
                <div class="col-4">
                    <div class="custom-control custom-radio">
                        <input class="custom-control-input" type="radio" id="KKNCM" name="tick-rank-kekhai" value="Nghiên cứu mạnh" onclick="clear_hinhthuc()">
                        <label for="KKNCM" class="custom-control-label">Nghiên cứu mạnh</label>
                    </div>
                </div>

                <div class="col-4">
                    <div class="custom-control custom-radio">
                        <input class="custom-control-input" type="radio" id="KKDT" name="tick-rank-kekhai" value="Đề tài" onclick="clear_hinhthuc()">
                        <label for="KKDT" class="custom-control-label">Đề tài</label>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="card card-info">
        <div class="card-header">
            <h3 class="card-title">Nhập tên sản phẩm khoa học</h3>
        </div>
        <div class="card-body">
            <div class="row">
                <div class="col-4">
                    <div class="input-group mb-3">

                        <label>Ngày đăng bài <br /></label><br />
                    </div>
                    <div>
                        <input id="datesubmit" type="date" placeholder="Ngày đăng bài" class="input-group-text" />
                    </div>
                </div>

                <div class="col-6">
                    <div class="input-group mb-3">
                        <label>Tên bài báo </label><br />
                    </div>
                    <div class="input-group mb-3">
                        <input type="text" class="form-control" placeholder="Nhập tên sản phẩm khoa học" id="input-name" name="input-name">
                    </div>
                </div>
                <div class="col-2">
                    <div class="input-group mb-3">
                        <input type="file" class="form-control" id="fileInput" multiple onchange="handleFileSelect(event)" />
                    </div>
                    <div class="input-group mb-3">
                        <button type="button" class="form-control" onclick="uploadFiles()">Upload</button>
                    </div>
                </div>

                <style>
                  div[class^="col"].file-item {
                    position: relative;
                    padding: 10px;
                    background: #f5f5f5;
                    border: 2px solid white;
                  }
                </style>
                <div class="col-12">
                  <div id="selectedFiles" class="row mb-3">
                    <!-- Danh sách các file đã chọn sẽ được hiển thị tại đây -->
                  </div>
                  <div id="uploadedFiles" class="row mb-3">
                    <!-- Danh sách các file đã upload thành công sẽ hiển thị tại đây -->
                  </div>
                </div>
            </div>
        </div>
    </div>
    <div class="card card-info">
        <div class="card-header">
            <h3 class="card-title">Chọn hình thức thanh toán</h3>
        </div>
        <div class="card-body">
            <div class="row">
                <!--<div class="col-6" id="thanhtoantt">
                                <div class="custom-control custom-radio">
                    <input class="custom-control-input" type="radio" id="thanhtoan" name="thanhtoan-quydoi" value="THANH TOÁN TRỰC TIẾP" onclick="loadradio()" checked="">
                    <label for="thanhtoan" class="custom-control-label">THANH TOÁN TRỰC TIẾP</label>
                </div>
                            </div>-->
                <div class="col-12" id="kekhaitietchuan">
                    <div class="custom-control custom-radio">
                        <input class="custom-control-input" type="radio" id="quydoi" name="thanhtoan-quydoi" value="KÊ KHAI TIẾT CHUẨN" onclick="loadradio2()">
                        <label for="quydoi" class="custom-control-label">KÊ KHAI TIẾT CHUẨN</label>
                    </div>
                </div>
            </div>
            <br />
            <br />
            <div class="row" id="yeucauchatluong"></div>
            <br>
            <br>
            <div class="row" id="loaibaibao"></div>
            <script>
                function clear_option() {
                    document.querySelector('#search-issn').value = "";
                    document.querySelector('#checkbox-result-issn-eissn').innerHTML = ``;
                }
                function loadloaibaibao() {
                    var loaisp = document.querySelector('input[name="lsp"]:checked').value;
                    if (loaisp == "Bài báo") {

                        document.querySelector('#chondanhmuc').innerHTML = `
                                                                                                                                                                                        <div class="card-header">
                                                                                                                                                                                    <h3 class="card-title">Chọn danh mục</h3>
                                                                                                                                                                                </div>

                                                                                                                                                                                <div class="card-body">
                                                                                                                                                                                    <div class="row">
                                                                                                                                                                                        <div class="col-6">
                                                                                                                                                                                            <div class="custom-control custom-radio">
                                                                                                                                                                                                <input class="custom-control-input" type="radio" id="traCuuDM" name="traCuuDM" value="Tra cứu danh mục theo issn hoặc eissn" checked onclick="movedmk()">
                                                                                                                                                                                                <label for="traCuuDM" class="custom-control-label">Tra cứu danh mục theo Issn hoặc Eissn</label>
                                                                                                                                                                                                <select name="" id="option-national-country" class="form-control col-4" onchange="clear_option()">
                                                                                                                                                                                                    <option value="0.8">Quốc tế</option>
                                                                                                                                                                                                    <option value="0.2">Trong nước</option>
                                                                                                                                                                                                </select>
                                                                                                                                                                                            </div>
                                                                                                                                                                                        </div>
                                                                                                                                                                                        <div class="col-1">
                                                                                                                                                                                        </div>
                                                                                                                                                                                        <div class="col-5" id="danhmuckhac">

                                                                                                                                                                                            <div class="custom-control custom-radio">
                                                                                                                                                                                                <input class="custom-control-input" type="radio" id="dmk" name="selectDM" value="Danh mục khác" onclick="danhMucKhac()">
                                                                                                                                                                                                <label for="dmk" class="custom-control-label">Danh mục khác</label>
                                                                                                                                                                                            </div>
                                                                                                                                                                                            <div class="custom-control custom-radio">
                                                                                                                                                                                                <div id="div-dmk">
                                                                                                                                                                                                </div>
                                                                                                                                                                                            </div>
                                                                                                                                                                                        </div>
                                                                                                                                                                                    </div>
                                                                                                                                                                                    <div class="row">
                                                                                                                                                                                        <br />
                                                                                                                                                                                    </div>
                                                                                                                                                                                    <div class="row">
                                                                                                                                                                                        <div class="col-6">
                                                                                                                                                                                            <div class="row">
                                                                                                                                                                                                <div class="col-9">
                                                                                                                                                                                                    <div class="input-group mb-3">
                                                                                                                                                                                                        <input type="text" class="form-control" id="search-issn" name="search-issn-eissn" placeholder="Tra cứu danh mục theo issn hoặc eissn">
                                                                                                                                                                                                    </div>
                                                                                                                                                                                                </div>
                                                                                                                                                                                                <div class="col-3">
                                                                                                                                                                                                    <div class="input-group mb-3">
                                                                                                                                                                                                        <input class="btn btn-default form-control" id="inpsearch-3" type="submit" value="Tìm kiếm" onclick="Get_issn(renderGet_issn)">
                                                                                                                                                                                                    </div>
                                                                                                                                                                                                </div>
                                                                                                                                                                                            </div>
                                                                                                                                                                                            <div class="row">
                                                                                                                                                                                                <div class="result-issn-eissn" id="checkbox-result-issn-eissn">
                                                                                                                                                                                                </div>
                                                                                                                                                                                            </div>
                                                                                                                                                                                            <div id="tongthanhtien2"></div>
                                                                                                                                                                                            <div id="tongthanhtien"></div>
                                                                                                                                                                                        </div>
                                                                                                                                                                                        <div class="col-1">
                                                                                                                                                                                        </div>
                                                                                                                                                                                        <div class="col-5">
                                                                                                                                                                                            <div class="custom-file">
                                                                                                                                                                                                <input type="text" class="form-control" placeholder="Nhập minh chứng" id="myFile" name="myFile" readonly />
                                                                                                                                                                                                 <input type="button" value="Tải minh chứng" onclick="BrowseServer('myFile')" />
                                                                                                                                                                                            </div>
                                                                                                                                                                                        </div>
                                                                                                                                                                                    </div>
                                                                                                                                                                                </div>`;

                        document.querySelector('#option-national-country').disabled = true;
                    } else if (loaisp == "SPUD") {
                        document.querySelector('#loaibaibao').innerHTML = ``;
                        Get_loaisanpham('SPUD', render_lsp);
                    }
                    else {
                        document.querySelector('#loaibaibao').innerHTML = ``;
                        Get_loaisanpham('SHTT', render_lsp);
                    }

                }
            </script>

            <div class="row">
                <div id="loaisanpham" class="col-6"></div>
                <div class="col-6" id="upload">
                </div>
            </div>
        </div>
    </div>
    <div class="card card-info" id="chondanhmuc">
    </div>
    <div class="card card-info">
        <div class="card-header">
            <h3 class="card-title">Loại tác giả - cơ quan công tác</h3>
        </div>
        <div class="card-body">
            <div class="row">
                <div class="form-group col-3">
                    <select name="tacgia" id="tacgia" class="form-control">
                        <option value="0.8">Tác giả đầu</option>
                    </select>
                </div>

                <div class="form-group col-2">
                    <input class="form-control" type="number" placeholder="Số lượng tác giả chính" id="sltgc" min="1" max="1" oninput="themtacgia()" />
                </div>
                <div class="form-group col-3">
                    <select name="tacgia" id="tacgia" class="form-control">

                        <option value="0.2">Số lượng tác giả  phụ</option>
                    </select>
                </div><div class="form-group col-2">
                    <input class="form-control" type="number" placeholder="Số lượng tác giả phụ" id="sltgp" min="1" oninput="themtacgia()" />
                </div><div class="form-group col-3">
                    <select name="tacgia" id="tacgia" class="form-control">

                        <option value="0.5">Tác giả liên hệ</option>
                    </select>
                </div>
                <div class="form-group col-2">
                    <input class="form-control" type="number" placeholder="Số lượng tác giả liên hệ" id="sltglh" min="1" oninput="themtacgia()" />
                </div>
            </div>
            <div class="form-group col-2" id="tongtacgia">
            </div>
            <!--<div class="form-group col-4">
                <input class="form-control" type="text" id="list-add-user" />
            </div>-->
        </div>
    </div>
</div>
<div class="card card-info">
    <div class="card-header">
        <h3 class="card-title">Các tác giả trong bài báo</h3>
    </div>
    <style>
        table, th, td {
            border: 1px solid black;
        }

        th {
            background-color: blue;
            color: white;
        }
    </style>
    <table class="table table-bordered table-striped" style="width:100%" id="tbtacgia">
    </table>

    <script>
        function loadtable() {
            var sltgc = Number(document.querySelector('#sltgc').value);
            var sltgp = Number(document.querySelector('#sltgp').value);
            var sltglh = Number(document.querySelector('#sltglh').value);
            var sltg = sltgc + sltgp + sltglh;
            try {
                var tietchuan = Number(document.querySelector('#tietchuan').textContent);

            } catch {
                alert("Chọn hình thức thanh toán!");
            }
            var diem = Number(document.querySelector('#diem').textContent);
            var table = document.getElementById("tablethanhtoan");
            var trtable = ``;
            try {
                var total = Number(document.querySelector('#total').textContent);

            } catch {
                var total = 0;
            }
            var tongdonggop = 0;
            var valuerank = document.querySelector('input[name="tick-rank"]:checked').value;
            var valueloaihinh = document.querySelector('input[name="tick-rank-kekhai"]:checked').value;
            var valuelsp = document.querySelector('input[name="lsp"]:checked').value;
            var hdsv = document.querySelector('input[name="lsp"]:checked').value;
            for (let j = 0; j < sltg; j++) {
                try {
                    var donggop = Number(document.querySelector('#donggop-' + j).value);

                } catch { }
                tongdonggop += donggop;
                if (tongdonggop > 100) {

                    try { document.querySelector('#donggop-' + j).value = 0; } catch { }
                }

            }
            if (tongdonggop > 100) {
                alert('Đóng góp quá 100%!');
            }
            else if (tongdonggop < 100) {
                alert('Đóng góp chưa đủ 100%!');
            } else {
                if (valuerank == "Giảng viên" && valueloaihinh == "Khối lượng") {
                    for (let i = 0; i < sltg; i++) {
                        trtable += `<tr>
                                            <td>${i + 1}</td>
                                            <td></td>
                                            <td></td>
                                            <td></td>
                                            <td></td>
                                            <td></td>
                                            <td></td>
                                            <td></td>
                                        </tr>`;
                    }
                    table.innerHTML = trtable;
                    for (let i = 0; i < sltg; i++) {
                        var tacgia = document.querySelector('#inp-username-id-mail-' + i).value;
                        table.rows[i].cells[1].innerHTML = tacgia;
                    }
                    for (let i = 0; i < sltg; i++) {
                        var optionscongtac = document.querySelector('#coquancongtac-' + i);
                        var textcongtac = optionscongtac.options[optionscongtac.selectedIndex].textContent;
                        table.rows[i].cells[2].innerHTML = textcongtac;
                    } for (let i = 0; i < sltg; i++) {
                        var optionstg = document.querySelector('#tg-' + i);
                        var texttg = optionstg.options[optionstg.selectedIndex].textContent;
                        table.rows[i].cells[3].innerHTML = texttg;
                    }
                    if (sltgc == 1 && sltgp > 0 && sltglh == 0) {
                        if (sltgc == 1 && sltgp > 0 && sltglh == 0) {
                            for (let i = 0; i < sltg; i++) {
                                var coquan = table.rows[0].cells[2].textContent;
                                try { var donggop = Number(document.querySelector('#donggop-' + i).value); } catch { }
                                if (sltg > 1) {
                                    if (coquan == "(1) ngoài UEF, (2) UEF (20%)" || coquan == "Cơ quan công tác ngoài UEF (0%)") {
                                        table.rows[0].cells[4].innerHTML = `0`;
                                        table.rows[0].cells[5].innerHTML = `0`;
                                        table.rows[0].cells[6].innerHTML = `0`;
                                        table.rows[0].cells[7].innerHTML = `0`;
                                        if (table.rows[i].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)") {
                                            table.rows[i].cells[4].innerHTML = `0`;
                                            table.rows[i].cells[5].innerHTML = `0`;
                                            table.rows[i].cells[6].innerHTML = `${diem / 2}`;
                                            if (hdsv == "HDSV") {
                                                table.rows[i].cells[7].innerHTML = `${tietchuan / sltg}`;
                                            } else {
                                                table.rows[i].cells[7].innerHTML = `${tietchuan * 0.2 / sltgp}`;

                                            }

                                        } if (table.rows[i].cells[2].textContent == "(1) UEF – (2) ngoài UEF (80%)") {
                                            table.rows[i].cells[4].innerHTML = `0`;
                                            table.rows[i].cells[5].innerHTML = `0`;
                                            table.rows[i].cells[6].innerHTML = `${diem / 2}`;
                                            if (hdsv == "HDSV") {
                                                table.rows[i].cells[7].innerHTML = `${tietchuan / sltg}`;
                                            } else {
                                                table.rows[i].cells[7].innerHTML = `${tietchuan / 2 * 0.2 / sltgp}`;
                                            }
                                        } if (table.rows[i].cells[2].textContent == "(1) ngoài UEF, (2) UEF (20%)" || table.rows[i].cells[2].textContent == "Cơ quan công tác ngoài UEF (0%)") {
                                            table.rows[i].cells[4].innerHTML = `0`;
                                            table.rows[i].cells[5].innerHTML = `0`;
                                            table.rows[i].cells[6].innerHTML = `0`;
                                            table.rows[i].cells[7].innerHTML = `0`;
                                        }
                                    } if (coquan == "(1) UEF – (2) ngoài UEF (80%)") {
                                        table.rows[0].cells[4].innerHTML = `0`;
                                        table.rows[0].cells[5].innerHTML = `0`;
                                        table.rows[0].cells[6].innerHTML = `${diem / 2}`;
                                        if (hdsv == "HDSV") {
                                            table.rows[0].cells[7].innerHTML = `${tietchuan / sltg}`;
                                        } else {
                                            table.rows[0].cells[7].innerHTML = `${tietchuan / 2 * 0.8}`;
                                        }
                                        if (table.rows[i].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)") {
                                            table.rows[i].cells[4].innerHTML = `0`;
                                            table.rows[i].cells[5].innerHTML = `0`;
                                            table.rows[i].cells[6].innerHTML = `${diem / 2}`;
                                            if (hdsv == "HDSV") {
                                                table.rows[i].cells[7].innerHTML = `${tietchuan / sltg}`;
                                            } else {
                                                table.rows[i].cells[7].innerHTML = `${tietchuan * 0.2 / sltgp}`;
                                            }
                                        } if (table.rows[i].cells[2].textContent == "(1) UEF – (2) ngoài UEF (80%)") {
                                            table.rows[i].cells[4].innerHTML = `0`;
                                            table.rows[i].cells[5].innerHTML = `0`;
                                            table.rows[i].cells[6].innerHTML = `${diem / 2}`;
                                            if (hdsv == "HDSV") {
                                                table.rows[i].cells[7].innerHTML = `${tietchuan / sltg}`;
                                            } else {
                                                table.rows[i].cells[7].innerHTML = `${tietchuan / 2 * 0.2 / sltgp}`;
                                            }
                                        } if (table.rows[i].cells[2].textContent == "(1) ngoài UEF, (2) UEF (20%)" || table.rows[i].cells[2].textContent == "Cơ quan công tác ngoài UEF (0%)") {
                                            table.rows[i].cells[4].innerHTML = `0`;
                                            table.rows[i].cells[5].innerHTML = `0`;
                                            table.rows[i].cells[6].innerHTML = `0`;
                                            table.rows[i].cells[7].innerHTML = `0`;
                                        }
                                    } else if (coquan == "Cơ quan công tác duy nhất UEF (100%)") {
                                        table.rows[0].cells[4].innerHTML = `0`;
                                        table.rows[0].cells[5].innerHTML = `0`;
                                        table.rows[0].cells[6].innerHTML = `${diem / 2}`;
                                        if (hdsv == "HDSV") {
                                            table.rows[0].cells[7].innerHTML = `${tietchuan / sltg}`;
                                        } else {
                                            table.rows[0].cells[7].innerHTML = `${tietchuan * 0.8}`;
                                        }
                                        if (table.rows[i].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)") {
                                            table.rows[i].cells[4].innerHTML = `0`;
                                            table.rows[i].cells[5].innerHTML = `0`;
                                            table.rows[i].cells[6].innerHTML = `${diem / 2}`;
                                            if (hdsv == "HDSV") {
                                                table.rows[i].cells[7].innerHTML = `${tietchuan / sltg}`;
                                            } else {
                                                table.rows[i].cells[7].innerHTML = `${tietchuan * 0.2 / sltgp}`;
                                            }
                                        } if (table.rows[i].cells[2].textContent == "(1) UEF – (2) ngoài UEF (80%)") {
                                            table.rows[i].cells[4].innerHTML = `0`;
                                            table.rows[i].cells[5].innerHTML = `0`;
                                            table.rows[i].cells[6].innerHTML = `${diem / 2}`;
                                            if (hdsv == "HDSV") {
                                                table.rows[i].cells[7].innerHTML = `${tietchuan / sltg}`;
                                            } else {
                                                table.rows[i].cells[7].innerHTML = `${tietchuan / 2 * 0.2 / sltgp}`;
                                            }
                                        } if (table.rows[i].cells[2].textContent == "(1) ngoài UEF, (2) UEF (20%)" || table.rows[i].cells[2].textContent == "Cơ quan công tác ngoài UEF (0%)") {
                                            table.rows[i].cells[4].innerHTML = `0`;
                                            table.rows[i].cells[5].innerHTML = `0`;
                                            table.rows[i].cells[6].innerHTML = `0`;
                                            table.rows[i].cells[7].innerHTML = `0`;
                                        }
                                    }
                                }
                            }

                        }
                    }
                    if (sltgc == 1 && sltgp == 0 && sltglh > 0) {
                        for (let i = 1; i < sltg; i++) {
                            var coquan = table.rows[0].cells[2].textContent;
                            try { var donggop = Number(document.querySelector('#donggop-' + i).value); } catch { }
                            if (sltg > 1) {
                                if (coquan == "(1) ngoài UEF, (2) UEF (20%)" || coquan == "Cơ quan công tác ngoài UEF (0%)") {
                                    table.rows[0].cells[4].innerHTML = `0`;
                                    table.rows[0].cells[5].innerHTML = `0`;
                                    table.rows[0].cells[6].innerHTML = `0`;
                                    table.rows[0].cells[7].innerHTML = `0`;
                                    if (table.rows[i].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)") {
                                        table.rows[i].cells[4].innerHTML = `0`;
                                        table.rows[i].cells[5].innerHTML = `0`;
                                        table.rows[i].cells[6].innerHTML = `${diem / 2}`;
                                        if (hdsv == "HDSV") {
                                            table.rows[i].cells[7].innerHTML = `${tietchuan / sltg}`;
                                        } else {
                                            table.rows[i].cells[7].innerHTML = `${tietchuan * 0.5 / sltglh}`;
                                        }
                                    } if (table.rows[i].cells[2].textContent == "(1) UEF – (2) ngoài UEF (80%)") {
                                        table.rows[i].cells[4].innerHTML = `0`;
                                        table.rows[i].cells[5].innerHTML = `0`;
                                        table.rows[i].cells[6].innerHTML = `${diem / 2}`;
                                        if (hdsv == "HDSV") {
                                            table.rows[i].cells[7].innerHTML = `${tietchuan / sltg}`;
                                        } else {
                                            table.rows[i].cells[7].innerHTML = `${tietchuan / 2 * 0.5 / sltglh}`;
                                        }
                                    } if (table.rows[i].cells[2].textContent == "(1) ngoài UEF, (2) UEF (20%)" || table.rows[i].cells[2].textContent == "Cơ quan công tác ngoài UEF (0%)") {
                                        table.rows[i].cells[4].innerHTML = `0`;
                                        table.rows[i].cells[5].innerHTML = `0`;
                                        table.rows[i].cells[6].innerHTML = `0`;
                                        table.rows[i].cells[7].innerHTML = `0`;
                                    }
                                } if (coquan == "(1) UEF – (2) ngoài UEF (80%)") {
                                    table.rows[0].cells[4].innerHTML = `0`;
                                    table.rows[0].cells[5].innerHTML = `0`;
                                    table.rows[0].cells[6].innerHTML = `${diem / 2}`;
                                    if (hdsv == "HDSV") {
                                        table.rows[0].cells[7].innerHTML = `${tietchuan / sltg}`;
                                    } else {
                                        table.rows[0].cells[7].innerHTML = `${tietchuan / 2 * 0.5}`;
                                    }
                                    if (table.rows[i].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)") {
                                        table.rows[i].cells[4].innerHTML = `0`;
                                        table.rows[i].cells[5].innerHTML = `0`;
                                        table.rows[i].cells[6].innerHTML = `${diem / 2}`;
                                        if (hdsv == "HDSV") {
                                            table.rows[i].cells[7].innerHTML = `${tietchuan / sltg}`;
                                        } else {
                                            table.rows[i].cells[7].innerHTML = `${tietchuan * 0.5 / sltglh}`;
                                        }
                                    } if (table.rows[i].cells[2].textContent == "(1) UEF – (2) ngoài UEF (80%)") {
                                        table.rows[i].cells[4].innerHTML = `0`;
                                        table.rows[i].cells[5].innerHTML = `0`;
                                        table.rows[i].cells[6].innerHTML = `${diem / 2}`;
                                        if (hdsv == "HDSV") {
                                            table.rows[i].cells[7].innerHTML = `${tietchuan / sltg}`;
                                        } else {
                                            table.rows[i].cells[7].innerHTML = `${tietchuan / 2 * 0.5 / sltglh}`;
                                        }
                                    } if (table.rows[i].cells[2].textContent == "(1) ngoài UEF, (2) UEF (20%)" || table.rows[i].cells[2].textContent == "Cơ quan công tác ngoài UEF (0%)") {
                                        table.rows[i].cells[4].innerHTML = `0`;
                                        table.rows[i].cells[5].innerHTML = `0`;
                                        table.rows[i].cells[6].innerHTML = `0`;
                                        table.rows[i].cells[7].innerHTML = `0`;
                                    }
                                } else if (coquan == "Cơ quan công tác duy nhất UEF (100%)") {
                                    table.rows[0].cells[4].innerHTML = `0`;
                                    table.rows[0].cells[5].innerHTML = `0`;
                                    table.rows[0].cells[6].innerHTML = `${diem / 2}`;
                                    if (hdsv == "HDSV") {
                                        table.rows[0].cells[7].innerHTML = `${tietchuan / sltg}`;
                                    } else {
                                        table.rows[0].cells[7].innerHTML = `${tietchuan * 0.5}`;
                                    }
                                    if (table.rows[i].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)") {
                                        table.rows[i].cells[4].innerHTML = `0`;
                                        table.rows[i].cells[5].innerHTML = `0`;
                                        table.rows[i].cells[6].innerHTML = `${diem / 2}`;
                                        if (hdsv == "HDSV") {
                                            table.rows[i].cells[7].innerHTML = `${tietchuan / sltg}`;
                                        } else {
                                            table.rows[i].cells[7].innerHTML = `${tietchuan * 0.5 / sltglh}`;
                                        }
                                    } if (table.rows[i].cells[2].textContent == "(1) UEF – (2) ngoài UEF (80%)") {
                                        table.rows[i].cells[4].innerHTML = `0`;
                                        table.rows[i].cells[5].innerHTML = `0`;
                                        table.rows[i].cells[6].innerHTML = `${diem / 2}`;
                                        if (hdsv == "HDSV") {
                                            table.rows[i].cells[7].innerHTML = `${tietchuan / sltg}`;
                                        } else {
                                            table.rows[i].cells[7].innerHTML = `${tietchuan / 2 * 0.5 / sltglh}`;
                                        }
                                    } if (table.rows[i].cells[2].textContent == "(1) ngoài UEF, (2) UEF (20%)" || table.rows[i].cells[2].textContent == "Cơ quan công tác ngoài UEF (0%)") {
                                        table.rows[i].cells[4].innerHTML = `0`;
                                        table.rows[i].cells[5].innerHTML = `0`;
                                        table.rows[i].cells[6].innerHTML = `0`;
                                        table.rows[i].cells[7].innerHTML = `0`;
                                    }
                                }
                            }
                        }
                    }
                    else if (sltg > 2 && (sltgc + sltglh) > 1 && sltgp > 0) {
                        for (let i = 0; i < sltg; i++) {
                            try { var donggop = Number(document.querySelector('#donggop-' + i).value); } catch { }

                            var coquan = table.rows[i].cells[2].textContent;
                            var optionstg1 = document.querySelector('#tg-' + i);
                            var texttg1 = optionstg1.options[optionstg1.selectedIndex].textContent;

                            if (coquan == "(1) ngoài UEF, (2) UEF (20%)" || coquan == "Cơ quan công tác ngoài UEF (0%)") {
                                table.rows[i].cells[4].innerHTML = `0`;
                                table.rows[i].cells[5].innerHTML = `0`;
                                table.rows[i].cells[6].innerHTML = `0`;
                                table.rows[i].cells[7].innerHTML = `0`;
                            } else if (coquan == "(1) UEF – (2) ngoài UEF (80%)") {
                                if (texttg1 == "Tác giả chính") {
                                    table.rows[i].cells[4].innerHTML = `0`;
                                    table.rows[i].cells[5].innerHTML = `0`;
                                    table.rows[i].cells[6].innerHTML = `${diem / 2}`;
                                    if (hdsv == "HDSV") {
                                        table.rows[i].cells[7].innerHTML = `${tietchuan / sltg}`;
                                    } else {
                                        table.rows[i].cells[7].innerHTML = `${(((tietchuan * 0.8) / (sltgc + sltglh))) / 2}`;
                                    }

                                } else if (texttg1 == "Tác giả phụ") {
                                    table.rows[i].cells[4].innerHTML = `0`;
                                    table.rows[i].cells[5].innerHTML = `0`;
                                    table.rows[i].cells[6].innerHTML = `${diem / 2}`;
                                    if (hdsv == "HDSV") {
                                        table.rows[i].cells[7].innerHTML = `${tietchuan / sltg}`;
                                    } else {
                                        table.rows[i].cells[7].innerHTML = `${(tietchuan * 0.2) / 2 / sltgp}`;
                                    }
                                } else if (texttg1 == "Tác giả liên hệ") {
                                    table.rows[i].cells[4].innerHTML = `0`;
                                    table.rows[i].cells[5].innerHTML = `0`;
                                    table.rows[i].cells[6].innerHTML = `${diem / 2}`;
                                    if (hdsv == "HDSV") {
                                        table.rows[i].cells[7].innerHTML = `${tietchuan / sltg}`;
                                    } else {
                                        table.rows[i].cells[7].innerHTML = `${(tietchuan * 0.8) / 2 / (sltgc + sltglh)}`;
                                    }
                                }

                            } else if (coquan == "Cơ quan công tác duy nhất UEF (100%)") {
                                if (texttg1 == "Tác giả chính") {

                                    table.rows[i].cells[4].innerHTML = `${(((total * 0.75) / (sltgc + sltglh)))}`;
                                    table.rows[i].cells[5].innerHTML = `${(((total * 0.75) / (sltgc + sltglh))) * 0.9}`;
                                    table.rows[i].cells[6].innerHTML = `${diem / 2}`;
                                    if (hdsv == "HDSV") {
                                        table.rows[i].cells[7].innerHTML = `${tietchuan / sltg}`;
                                    } else {
                                        table.rows[i].cells[7].innerHTML = `${(((tietchuan * 0.8) / (sltgc + sltglh)))}`;
                                    }

                                } else if (texttg1 == "Tác giả phụ") {
                                    table.rows[i].cells[4].innerHTML = `${total * 0.25 / sltgp}`;
                                    table.rows[i].cells[5].innerHTML = `${((total * 0.25) / sltgp) * 0.9}`;
                                    table.rows[i].cells[6].innerHTML = `${diem / 2}`; if (hdsv == "HDSV") {
                                        table.rows[i].cells[7].innerHTML = `${tietchuan / sltg}`;
                                    } else {
                                        table.rows[i].cells[7].innerHTML = `${tietchuan * 0.2 / sltgp}`;
                                    }
                                } else if (texttg1 == "Tác giả liên hệ") {
                                    table.rows[i].cells[4].innerHTML = `${((total * 0.75) / (sltgc + sltglh))}`;
                                    table.rows[i].cells[5].innerHTML = `${((total * 0.75) / (sltgc + sltglh)) * 0.9}`;
                                    table.rows[i].cells[6].innerHTML = `${diem / 2}`;
                                    if (hdsv == "HDSV") {
                                        table.rows[i].cells[7].innerHTML = `${tietchuan / sltg}`;
                                    } else {
                                        table.rows[i].cells[7].innerHTML = `${((tietchuan * 0.8) / (sltgc + sltglh))}`;
                                    }
                                }
                            }

                        }
                    }

                    if (sltgc == 1 && sltg == 1) {
                        var coquan = table.rows[0].cells[2].textContent;
                        try {
                            var donggop = Number(document.querySelector('#donggop-0').value);

                        } catch { }

                        if (coquan == "(1) ngoài UEF, (2) UEF (20%)" || coquan == "Cơ quan công tác ngoài UEF (0%)") {
                            table.rows[0].cells[4].innerHTML = `0`;
                            table.rows[0].cells[5].innerHTML = `0`;
                            table.rows[0].cells[6].innerHTML = `0`;
                            table.rows[0].cells[7].innerHTML = `0`;

                        } else if (coquan == "(1) UEF – (2) ngoài UEF (80%)") {
                            table.rows[0].cells[4].innerHTML = `${total / 2}`;
                            table.rows[0].cells[5].innerHTML = `${(total / 2) * 0.9}`;
                            table.rows[0].cells[6].innerHTML = `${diem}`;
                            if (hdsv == "HDSV") {
                                table.rows[i].cells[7].innerHTML = `${tietchuan / sltg}`;
                            } else {
                                table.rows[0].cells[7].innerHTML = `${tietchuan}`;
                            }
                        } else {
                            table.rows[0].cells[4].innerHTML = `${total}`;
                            table.rows[0].cells[5].innerHTML = `${(total) * 0.9}`;
                            table.rows[0].cells[6].innerHTML = `${diem}`;
                            if (hdsv == "HDSV") {
                                table.rows[i].cells[7].innerHTML = `${tietchuan / sltg}`;
                            } else {
                                table.rows[0].cells[7].innerHTML = `${tietchuan}`;
                            }
                        }
                    }
                }

                if (valuerank == "Nghiên cứu viên 1" && valueloaihinh == "Khối lượng") {
                    for (let i = 0; i < sltg; i++) {
                        trtable += `<tr>
                                                                            <td>${i + 1}</td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                        </tr>`;
                    }
                    table.innerHTML = trtable;
                    for (let i = 0; i < sltg; i++) {
                        var tacgia = document.querySelector('#inp-username-id-mail-' + i).value;
                        table.rows[i].cells[1].innerHTML = tacgia;
                    }
                    for (let i = 0; i < sltg; i++) {
                        var optionscongtac = document.querySelector('#coquancongtac-' + i);
                        var textcongtac = optionscongtac.options[optionscongtac.selectedIndex].textContent;
                        table.rows[i].cells[2].innerHTML = textcongtac;
                    } for (let i = 0; i < sltg; i++) {
                        var optionstg = document.querySelector('#tg-' + i);
                        var texttg = optionstg.options[optionstg.selectedIndex].textContent;
                        table.rows[i].cells[3].innerHTML = texttg;
                    }
                    if (sltg == 2) {
                        for (let i = 0; i < sltg; i++) {
                            var coquan = table.rows[i].cells[2].textContent;
                            try { var donggop = Number(document.querySelector('#donggop-' + i).value); } catch { }
                            if (sltg == 2) {
                                if (coquan == "(1) ngoài UEF, (2) UEF (20%)" || coquan == "Cơ quan công tác ngoài UEF (0%)") {
                                    table.rows[i].cells[4].innerHTML = `0`;
                                    table.rows[i].cells[5].innerHTML = `0`;
                                    table.rows[i].cells[6].innerHTML = `0`;
                                    table.rows[i].cells[7].innerHTML = `0`;
                                } if (coquan == "(1) UEF – (2) ngoài UEF (80%)") {
                                    table.rows[i].cells[4].innerHTML = `${((total / 2) / sltg)}`;
                                    table.rows[i].cells[5].innerHTML = `${(((total / 2) / sltg)) * 0.9}`;
                                    table.rows[i].cells[6].innerHTML = `${diem / 2}`;
                                    table.rows[i].cells[7].innerHTML = `${tietchuan}`;
                                } else if (coquan == "Cơ quan công tác duy nhất UEF (100%)") {
                                    table.rows[i].cells[4].innerHTML = `${(total / 2)}`;
                                    table.rows[i].cells[5].innerHTML = `${((total / 2)) * 0.9}`;
                                    table.rows[i].cells[6].innerHTML = `${diem / 2}`;
                                    table.rows[i].cells[7].innerHTML = `${tietchuan}`;
                                }
                            }
                        }
                    }
                    else if (sltg > 2 && (sltgc + sltglh) < sltg) {
                        for (let i = 0; i < sltg; i++) {
                            try { var donggop = Number(document.querySelector('#donggop-' + i).value); } catch { }

                            var coquan = table.rows[i].cells[2].textContent;
                            var optionstg1 = document.querySelector('#tg-' + i);
                            var texttg1 = optionstg1.options[optionstg1.selectedIndex].textContent;

                            if (coquan == "(1) ngoài UEF, (2) UEF (20%)" || coquan == "Cơ quan công tác ngoài UEF (0%)") {
                                table.rows[i].cells[4].innerHTML = `0`;
                                table.rows[i].cells[5].innerHTML = `0`;
                                table.rows[i].cells[6].innerHTML = `0`;
                                table.rows[i].cells[7].innerHTML = `0`;
                            } else if (coquan == "(1) UEF – (2) ngoài UEF (80%)") {
                                if (texttg1 == "Tác giả chính") {
                                    table.rows[i].cells[4].innerHTML = `${(((total * 0.8) / (sltgc + sltglh))) / 2}`;
                                    table.rows[i].cells[5].innerHTML = `${(((total * 0.8) / (sltgc + sltglh))) / 2 * 0.9}`;
                                    table.rows[i].cells[6].innerHTML = `${diem / 2}`;
                                    table.rows[i].cells[7].innerHTML = `${tietchuan}`;

                                } else if (texttg1 == "Tác giả phụ") {
                                    table.rows[i].cells[4].innerHTML = `${(total * 0.2) / 2 / sltgp}`;
                                    table.rows[i].cells[5].innerHTML = `${((total * 0.2) / 2 / sltgp) * 0.9}`;
                                    table.rows[i].cells[6].innerHTML = `${diem / 2}`;
                                    table.rows[i].cells[7].innerHTML = `${tietchuan}`;
                                } else if (texttg1 == "Tác giả liên hệ") {
                                    table.rows[i].cells[4].innerHTML = `${(total * 0.8) / 2 / (sltgc + sltglh)}`;
                                    table.rows[i].cells[5].innerHTML = `${((total * 0.8) / 2 / (sltgc + sltglh)) * 0.9}`;
                                    table.rows[i].cells[6].innerHTML = `${diem / 2}`;
                                    table.rows[i].cells[7].innerHTML = `${tietchuan}`;
                                }

                            } else if (coquan == "Cơ quan công tác duy nhất UEF (100%)") {
                                if (texttg1 == "Tác giả chính") {

                                    table.rows[i].cells[4].innerHTML = `${(((total * 0.8) / (sltgc + sltglh)))}`;
                                    table.rows[i].cells[5].innerHTML = `${(((total * 0.8) / (sltgc + sltglh))) * 0.9}`;
                                    table.rows[i].cells[6].innerHTML = `${diem / 2}`;
                                    table.rows[i].cells[7].innerHTML = `${tietchuan}`;

                                } else if (texttg1 == "Tác giả phụ") {
                                    table.rows[i].cells[4].innerHTML = `${total * 0.2 / sltgp}`;
                                    table.rows[i].cells[5].innerHTML = `${((total * 0.2) / sltgp) * 0.9}`;
                                    table.rows[i].cells[6].innerHTML = `${diem / 2}`;
                                    table.rows[i].cells[7].innerHTML = `${tietchuan}`;
                                } else if (texttg1 == "Tác giả liên hệ") {
                                    table.rows[i].cells[4].innerHTML = `${((total * 0.8) / (sltgc + sltglh))}`;
                                    table.rows[i].cells[5].innerHTML = `${((total * 0.8) / (sltgc + sltglh)) * 0.9}`;
                                    table.rows[i].cells[6].innerHTML = `${diem / 2}`;
                                    table.rows[i].cells[7].innerHTML = `${tietchuan}`;
                                }
                            }

                        }
                    }

                    if (sltgc == 1 && sltg == 1) {
                        var coquan = table.rows[0].cells[2].textContent;
                        try {
                            var donggop = Number(document.querySelector('#donggop-0').value);

                        } catch { }

                        if (coquan == "(1) ngoài UEF, (2) UEF (20%)" || coquan == "Cơ quan công tác ngoài UEF (0%)") {
                            table.rows[0].cells[4].innerHTML = `0`;
                            table.rows[0].cells[5].innerHTML = `0`;
                            table.rows[0].cells[6].innerHTML = `0`;
                            table.rows[0].cells[7].innerHTML = `0`;

                        } else if (coquan == "(1) UEF – (2) ngoài UEF (80%)") {
                            table.rows[0].cells[4].innerHTML = `${total / 2}`;
                            table.rows[0].cells[5].innerHTML = `${(total / 2) * 0.9}`;
                            table.rows[0].cells[6].innerHTML = `${diem}`;
                            table.rows[0].cells[7].innerHTML = `${tietchuan}`;
                        } else {
                            table.rows[0].cells[4].innerHTML = `${total}`;
                            table.rows[0].cells[5].innerHTML = `${(total) * 0.9}`;
                            table.rows[0].cells[6].innerHTML = `${diem}`;
                            table.rows[0].cells[7].innerHTML = `${tietchuan}`;
                        }
                    }
                }
                ////// 1 tác giả chính, 1 tác giả liên hệ , 1 phụ
                if (valuerank == "Giảng viên" && valueloaihinh == "Nghiên cứu mạnh" && sltgc == 1 && sltglh == 1 && sltgp == 1 && sltg == 3) {
                    for (let i = 0; i < sltg; i++) {
                        trtable += `<tr>
                                                                                        <td>${i + 1}</td>
                                                                                        <td></td>
                                                                                        <td></td>
                                                                                        <td></td>
                                                                                        <td></td>
                                                                                        <td></td>
                                                                                        <td></td>
                                                                                        <td></td>
                                                                                    </tr>`;
                    }
                    table.innerHTML = trtable;
                    for (let i = 0; i < sltg; i++) {
                        var tacgia = document.querySelector('#inp-username-id-mail-' + i).value;
                        table.rows[i].cells[1].innerHTML = tacgia;
                    }
                    for (let i = 0; i < sltg; i++) {
                        var optionscongtac = document.querySelector('#coquancongtac-' + i);
                        var textcongtac = optionscongtac.options[optionscongtac.selectedIndex].textContent;
                        table.rows[i].cells[2].innerHTML = textcongtac;
                    } for (let i = 0; i < sltg; i++) {
                        var optionstg = document.querySelector('#tg-' + i);
                        var texttg = optionstg.options[optionstg.selectedIndex].textContent;
                        table.rows[i].cells[3].innerHTML = texttg;
                    }
                    for (let i = 1; i < sltg; i++) {
                        var coquantgc = table.rows[0].cells[2].textContent;
                        var optionstg = document.querySelector('#tg-' + i);
                        var texttg = optionstg.options[optionstg.selectedIndex].textContent;
                        var optionstgc = document.querySelector('#coquancongtac-0');
                        var texttgc = optionstgc.options[optionstgc.selectedIndex].textContent;
                        var coquan = table.rows[i].cells[2].textContent;
                        /// tgc 0%
                        if (texttgc == "(1) ngoài UEF, (2) UEF (20%)" || texttgc == "Cơ quan công tác ngoài UEF (0%)") {

                            var donggoptgc = Number(document.querySelector('#donggop-0').value);
                            //tglh 0%
                            if (table.rows[sltg - 1].cells[2].textContent != "Cơ quan công tác duy nhất UEF (100%)" && table.rows[sltg - 1].cells[2].textContent != "(1) UEF – (2) ngoài UEF (80%)") {

                                // tgc 0, tglh 0, tgp 50
                                if (table.rows[sltg - 2].cells[2].textContent == "(1) UEF – (2) ngoài UEF (80%)") {
                                    var donggop = document.querySelector('#donggop-' + i).value;
                                    var donggoptgc = document.querySelector('#donggop-0').value;
                                    table.rows[i].cells[4].innerHTML = `${total / 8 * donggop / 100}`;
                                    table.rows[i].cells[5].innerHTML = `${(total / 8 * donggop / 100) * 0.9}`;
                                    table.rows[i].cells[6].innerHTML = `${diem / 2}`;
                                    table.rows[i].cells[7].innerHTML = `0`;
                                    table.rows[0].cells[4].innerHTML = `${total / 8 * donggoptgc / 100}`;
                                    table.rows[0].cells[5].innerHTML = `${total / 8 * donggoptgc / 100 * 0.9} `;
                                    table.rows[0].cells[6].innerHTML = `0`;
                                    table.rows[0].cells[7].innerHTML = `0`;
                                    table.rows[2].cells[4].innerHTML = `${total / 8 * donggop / 100}`;
                                    table.rows[2].cells[5].innerHTML = `${(total / 8 * donggop / 100) * 0.9}`;
                                    table.rows[2].cells[6].innerHTML = `0`;
                                    table.rows[2].cells[7].innerHTML = `0`;

                                }
                                // tgc 0, tglh 0, tgp 100
                                else if (table.rows[sltg - 2].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)") {
                                    var donggop = document.querySelector('#donggop-' + i).value;
                                    var donggoptgc = document.querySelector('#donggop-0').value;
                                    table.rows[i].cells[4].innerHTML = `${total / 4 * donggop / 100}`;
                                    table.rows[i].cells[5].innerHTML = `${(total / 4 * donggop / 100) * 0.9}`;
                                    table.rows[i].cells[6].innerHTML = `${diem / 2}`;
                                    table.rows[i].cells[7].innerHTML = `0`;
                                    table.rows[0].cells[4].innerHTML = `${total / 4 * donggoptgc / 100}`;
                                    table.rows[0].cells[5].innerHTML = `${total / 4 * donggoptgc / 100 * 0.9} `;
                                    table.rows[0].cells[6].innerHTML = `0`;
                                    table.rows[0].cells[7].innerHTML = `0`;
                                    table.rows[2].cells[4].innerHTML = `${total / 4 * donggop / 100}`;
                                    table.rows[2].cells[5].innerHTML = `${(total / 4 * donggop / 100) * 0.9}`;
                                    table.rows[2].cells[6].innerHTML = `0`;
                                    table.rows[2].cells[7].innerHTML = `0`;
                                }
                                // tgc 0, tglh 0, tgp 0
                                else {
                                    var donggop = document.querySelector('#donggop-' + i).value;
                                    var donggoptgc = document.querySelector('#donggop-0').value;
                                    table.rows[i].cells[4].innerHTML = `0`;
                                    table.rows[i].cells[5].innerHTML = `0`;
                                    table.rows[i].cells[6].innerHTML = `0`;
                                    table.rows[i].cells[7].innerHTML = `0`;
                                    table.rows[0].cells[4].innerHTML = `0`;
                                    table.rows[0].cells[5].innerHTML = `0`;
                                    table.rows[0].cells[6].innerHTML = `0`;
                                    table.rows[0].cells[7].innerHTML = `0`;
                                    table.rows[2].cells[4].innerHTML = `0`;
                                    table.rows[2].cells[5].innerHTML = `0`;
                                    table.rows[2].cells[6].innerHTML = `0`;
                                    table.rows[2].cells[7].innerHTML = `0`;
                                }

                            }
                            //tglh 50
                            if (table.rows[sltg - 1].cells[2].textContent == "(1) UEF – (2) ngoài UEF (80%)") {
                                // tgc 0 tgp 50 tglh 50
                                if (table.rows[sltg - 2].cells[2].textContent == "(1) UEF – (2) ngoài UEF (80%)") {
                                    var donggop = document.querySelector('#donggop-' + i).value;
                                    var donggoptgc = document.querySelector('#donggop-0').value;
                                    table.rows[i].cells[4].innerHTML = `${total / 2 * donggop / 100}`;
                                    table.rows[i].cells[5].innerHTML = `${(total / 2 * donggop / 100) * 0.9}`;
                                    table.rows[i].cells[6].innerHTML = `${diem / 2}`;
                                    table.rows[i].cells[7].innerHTML = `0`;
                                    table.rows[0].cells[4].innerHTML = `${total / 2 * donggoptgc / 100}`;
                                    table.rows[0].cells[5].innerHTML = `${total / 2 * donggoptgc / 100 * 0.9} `;
                                    table.rows[0].cells[6].innerHTML = `0`;
                                    table.rows[0].cells[7].innerHTML = `0`;
                                    table.rows[2].cells[4].innerHTML = `${total / 2 * donggop / 100}`;
                                    table.rows[2].cells[5].innerHTML = `${(total / 2 * donggop / 100) * 0.9}`;
                                    table.rows[2].cells[6].innerHTML = `${diem / 2}`;
                                    table.rows[2].cells[7].innerHTML = `0`;
                                }
                                //tgc 0 tgp 100 thlh 50
                                else if (table.rows[sltg - 2].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)") {
                                    var donggop = document.querySelector('#donggop-' + i).value;
                                    var donggoptgc = document.querySelector('#donggop-0').value;
                                    table.rows[i].cells[4].innerHTML = `${total / 2 * donggop / 100}`;
                                    table.rows[i].cells[5].innerHTML = `${(total / 2 * donggop / 100) * 0.9}`;
                                    table.rows[i].cells[6].innerHTML = `${diem / 2}`;
                                    table.rows[i].cells[7].innerHTML = `0`;
                                    table.rows[0].cells[4].innerHTML = `${total / 2 * donggoptgc / 100}`;
                                    table.rows[0].cells[5].innerHTML = `${total / 2 * donggoptgc / 100 * 0.9} `;
                                    table.rows[0].cells[6].innerHTML = `0`;
                                    table.rows[0].cells[7].innerHTML = `0`;
                                    table.rows[2].cells[4].innerHTML = `${total / 2 * donggop / 100}`;
                                    table.rows[2].cells[5].innerHTML = `${(total / 2 * donggop / 100) * 0.9}`;
                                    table.rows[2].cells[6].innerHTML = `${diem / 2}`;
                                    table.rows[2].cells[7].innerHTML = `0`;
                                }
                                //tgc 0 tgp 0 thlh 50
                                else {
                                    var donggop = document.querySelector('#donggop-' + i).value;
                                    var donggoptgc = document.querySelector('#donggop-0').value;
                                    table.rows[i].cells[4].innerHTML = `${total / 2 * donggop / 100}`;
                                    table.rows[i].cells[5].innerHTML = `${(total / 2 * donggop / 100) * 0.9}`;
                                    table.rows[i].cells[6].innerHTML = `0`;
                                    table.rows[i].cells[7].innerHTML = `0`;
                                    table.rows[0].cells[4].innerHTML = `${total / 2 * donggoptgc / 100}`;
                                    table.rows[0].cells[5].innerHTML = `${total / 2 * donggoptgc / 100 * 0.9} `;
                                    table.rows[0].cells[6].innerHTML = `0`;
                                    table.rows[0].cells[7].innerHTML = `0`;
                                    table.rows[2].cells[4].innerHTML = `${total / 2 * donggop / 100}`;
                                    table.rows[2].cells[5].innerHTML = `${(total / 2 * donggop / 100) * 0.9}`;
                                    table.rows[2].cells[6].innerHTML = `${diem / 2}`;
                                    table.rows[2].cells[7].innerHTML = `0`;
                                }

                            }
                            //tglh 100
                            if (table.rows[sltg - 1].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)") {
                                //tgc 0 tgp 50 thlh 100
                                if (table.rows[sltg - 2].cells[2].textContent == "(1) UEF – (2) ngoài UEF (80%)") {
                                    var donggop = document.querySelector('#donggop-' + i).value;
                                    var donggoptgc = document.querySelector('#donggop-0').value;
                                    table.rows[i].cells[4].innerHTML = `${total * donggop / 100}`;
                                    table.rows[i].cells[5].innerHTML = `${(total * donggop / 100) * 0.9}`;
                                    table.rows[i].cells[6].innerHTML = `${diem / 2}`;
                                    table.rows[i].cells[7].innerHTML = `0`;
                                    table.rows[0].cells[4].innerHTML = `${total * donggoptgc / 100}`;
                                    table.rows[0].cells[5].innerHTML = `${total * donggoptgc / 100 * 0.9} `;
                                    table.rows[0].cells[6].innerHTML = `0`;
                                    table.rows[0].cells[7].innerHTML = `0`;
                                    table.rows[2].cells[4].innerHTML = `${total * donggop / 100}`;
                                    table.rows[2].cells[5].innerHTML = `${(total * donggop / 100) * 0.9}`;
                                    table.rows[2].cells[6].innerHTML = `${diem / 2}`;
                                    table.rows[2].cells[7].innerHTML = `0`;
                                }
                                //tgc 0 tgp 100 thlh 100
                                else if (table.rows[sltg - 2].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)") {
                                    var donggop = document.querySelector('#donggop-' + i).value;
                                    var donggoptgc = document.querySelector('#donggop-0').value;
                                    table.rows[i].cells[4].innerHTML = `${total * donggop / 100}`;
                                    table.rows[i].cells[5].innerHTML = `${(total * donggop / 100) * 0.9}`;
                                    table.rows[i].cells[6].innerHTML = `${diem / 2}`;
                                    table.rows[i].cells[7].innerHTML = `0`;
                                    table.rows[0].cells[4].innerHTML = `${total * donggoptgc / 100}`;
                                    table.rows[0].cells[5].innerHTML = `${total * donggoptgc / 100 * 0.9} `;
                                    table.rows[0].cells[6].innerHTML = `0`;
                                    table.rows[0].cells[7].innerHTML = `0`;
                                    table.rows[2].cells[4].innerHTML = `${total * donggop / 100}`;
                                    table.rows[2].cells[5].innerHTML = `${(total * donggop / 100) * 0.9}`;
                                    table.rows[2].cells[6].innerHTML = `${diem / 2}`;
                                    table.rows[2].cells[7].innerHTML = `0`;
                                }
                                //tgc 0 tgp 0 thlh 100
                                else {
                                    var donggop = document.querySelector('#donggop-' + i).value;
                                    var donggoptgc = document.querySelector('#donggop-0').value;
                                    table.rows[i].cells[4].innerHTML = `${total * donggop / 100}`;
                                    table.rows[i].cells[5].innerHTML = `${(total * donggop / 100) * 0.9}`;
                                    table.rows[i].cells[6].innerHTML = `0`;
                                    table.rows[i].cells[7].innerHTML = `0`;
                                    table.rows[0].cells[4].innerHTML = `${total * donggoptgc / 100}`;
                                    table.rows[0].cells[5].innerHTML = `${total * donggoptgc / 100 * 0.9} `;
                                    table.rows[0].cells[6].innerHTML = `0`;
                                    table.rows[0].cells[7].innerHTML = `0`;
                                    table.rows[2].cells[4].innerHTML = `${total * donggop / 100}`;
                                    table.rows[2].cells[5].innerHTML = `${(total * donggop / 100) * 0.9}`;
                                    table.rows[2].cells[6].innerHTML = `${diem / 2}`;
                                    table.rows[2].cells[7].innerHTML = `0`;
                                }

                            }
                        }
                        //tgc 50
                        if (texttgc == "(1) UEF – (2) ngoài UEF (80%)") {

                            var donggoptgc = Number(document.querySelector('#donggop-0').value);
                            //tglh 0%
                            if (table.rows[sltg - 1].cells[2].textContent == "(1) ngoài UEF, (2) UEF (20%)" || table.rows[sltg - 1].cells[2].textContent == "Cơ quan công tác ngoài UEF (0%)") {
                                // tgc 50, tglh 0, tgp 50
                                var donggop = document.querySelector('#donggop-' + i).value;
                                var donggoptgc = document.querySelector('#donggop-0').value;
                                table.rows[i].cells[4].innerHTML = `${total / 2 * donggop / 100}`;
                                table.rows[i].cells[5].innerHTML = `${(total / 2 * donggop / 100) * 0.9}`;
                                table.rows[i].cells[7].innerHTML = `0`;
                                table.rows[0].cells[4].innerHTML = `${total / 2 * donggoptgc / 100}`;
                                table.rows[0].cells[5].innerHTML = `${total / 2 * donggoptgc / 100 * 0.9} `;
                                table.rows[0].cells[6].innerHTML = `${diem / 2}`;
                                table.rows[0].cells[7].innerHTML = `0`;
                                table.rows[2].cells[4].innerHTML = `${total / 2 * donggop / 100}`;
                                table.rows[2].cells[5].innerHTML = `${(total / 2 * donggop / 100) * 0.9}`;
                                table.rows[2].cells[6].innerHTML = `0`;
                                table.rows[2].cells[7].innerHTML = `0`;
                                if (table.rows[sltg - 2].cells[2].textContent == "(1) UEF – (2) ngoài UEF (80%)") {
                                    table.rows[1].cells[6].innerHTML = `${diem / 2}`;

                                }
                                // tgc 50, tglh 0, tgp 100
                                else if (table.rows[sltg - 2].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)") {
                                    table.rows[1].cells[6].innerHTML = `${diem / 2}`;

                                }
                                // tgc 0, tglh 0, tgp 0
                                else {
                                    table.rows[1].cells[6].innerHTML = `0`;

                                }

                            }
                            //tglh 50
                            if (table.rows[sltg - 1].cells[2].textContent == "(1) UEF – (2) ngoài UEF (80%)") {
                                var donggop = document.querySelector('#donggop-' + i).value;
                                var donggoptgc = document.querySelector('#donggop-0').value;
                                table.rows[i].cells[4].innerHTML = `${total / 2 * donggop / 100}`;
                                table.rows[i].cells[5].innerHTML = `${(total / 2 * donggop / 100) * 0.9}`;
                                table.rows[i].cells[7].innerHTML = `0`;
                                table.rows[0].cells[4].innerHTML = `${total / 2 * donggoptgc / 100}`;
                                table.rows[0].cells[5].innerHTML = `${total / 2 * donggoptgc / 100 * 0.9} `;
                                table.rows[0].cells[6].innerHTML = `${diem / 2}`;
                                table.rows[0].cells[7].innerHTML = `0`;
                                table.rows[2].cells[4].innerHTML = `${total / 2 * donggop / 100}`;
                                table.rows[2].cells[5].innerHTML = `${(total / 2 * donggop / 100) * 0.9}`;
                                table.rows[2].cells[6].innerHTML = `${diem / 2}`;
                                table.rows[2].cells[7].innerHTML = `0`;
                                // tgc 0 tgp 50 tglh 50
                                if (table.rows[sltg - 2].cells[2].textContent == "(1) UEF – (2) ngoài UEF (80%)") {
                                    table.rows[1].cells[6].innerHTML = `${diem / 2}`;

                                }
                                //tgc 0 tgp 100 thlh 50
                                else if (table.rows[sltg - 2].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)") {
                                    table.rows[1].cells[6].innerHTML = `${diem / 2}`;

                                }
                                //tgc 0 tgp 0 thlh 50
                                else {
                                    table.rows[1].cells[6].innerHTML = `0`;

                                }

                            }
                            //tglh 100
                            if (table.rows[sltg - 1].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)") {
                                //tgc 0 tgp 50 thlh 100
                                var donggop = document.querySelector('#donggop-' + i).value;
                                var donggoptgc = document.querySelector('#donggop-0').value;
                                table.rows[i].cells[4].innerHTML = `${total * donggop / 100}`;
                                table.rows[i].cells[5].innerHTML = `${(total * donggop / 100) * 0.9}`;
                                table.rows[i].cells[7].innerHTML = `0`;
                                table.rows[0].cells[4].innerHTML = `${total * donggoptgc / 100}`;
                                table.rows[0].cells[5].innerHTML = `${total * donggoptgc / 100 * 0.9} `;
                                table.rows[0].cells[6].innerHTML = `${diem / 2}`;
                                table.rows[0].cells[7].innerHTML = `0`;
                                table.rows[2].cells[4].innerHTML = `${total * donggop / 100}`;
                                table.rows[2].cells[5].innerHTML = `${(total * donggop / 100) * 0.9}`;
                                table.rows[2].cells[6].innerHTML = `${diem / 2}`;
                                table.rows[2].cells[7].innerHTML = `0`;
                                if (table.rows[sltg - 2].cells[2].textContent == "(1) UEF – (2) ngoài UEF (80%)") {
                                    table.rows[1].cells[6].innerHTML = `${diem / 2}`;
                                }
                                //tgc 0 tgp 100 thlh 100
                                else if (table.rows[sltg - 2].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)") {
                                    table.rows[1].cells[6].innerHTML = `${diem / 2}`;

                                }
                                //tgc 0 tgp 0 thlh 100
                                else {
                                    table.rows[1].cells[6].innerHTML = `0`;

                                }

                            }
                        }
                        //////tgc 100
                        if (texttgc == "Cơ quan công tác duy nhất UEF (100%)") {

                            var donggop = document.querySelector('#donggop-' + i).value;
                            var donggoptgc = document.querySelector('#donggop-0').value;
                            table.rows[i].cells[4].innerHTML = `${total * donggop / 100}`;
                            table.rows[i].cells[5].innerHTML = `${(total * donggop / 100) * 0.9}`;
                            table.rows[i].cells[7].innerHTML = `0`;
                            table.rows[0].cells[4].innerHTML = `${total * donggoptgc / 100}`;
                            table.rows[0].cells[5].innerHTML = `${total * donggoptgc / 100 * 0.9} `;
                            table.rows[0].cells[6].innerHTML = `${diem / 2}`;
                            table.rows[0].cells[7].innerHTML = `0`;
                            table.rows[2].cells[4].innerHTML = `${total * donggop / 100}`;
                            table.rows[2].cells[5].innerHTML = `${(total * donggop / 100) * 0.9}`;
                            table.rows[2].cells[7].innerHTML = `0`;
                            //tglh 0%
                            if (table.rows[sltg - 1].cells[2].textContent == "(1) ngoài UEF, (2) UEF (20%)" || table.rows[sltg - 1].cells[2].textContent == "Cơ quan công tác ngoài UEF (0%)") {
                                // tgc 100, tglh 0, tgp 50
                                table.rows[2].cells[6].innerHTML = `0`;
                            }
                            //tglh 50
                            if (table.rows[sltg - 1].cells[2].textContent == "(1) UEF – (2) ngoài UEF (80%)") {
                                table.rows[2].cells[6].innerHTML = `${diem / 2}`;
                            }
                            //tglh 100
                            if (table.rows[sltg - 1].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)") {
                                //tgc 100 tgp 50 thlh 100
                                table.rows[2].cells[6].innerHTML = `${diem / 2}`;
                            }
                            //// kiểm tra cơ quan tác giả phụ
                            if (table.rows[sltg - 2].cells[2].textContent == "(1) ngoài UEF, (2) UEF (20%)" || table.rows[sltg - 2].cells[2].textContent == "Cơ quan công tác ngoài UEF (0%)") {
                                table.rows[1].cells[6].innerHTML = `0`;
                            }
                            if (table.rows[sltg - 2].cells[2].textContent == "(1) UEF – (2) ngoài UEF (80%)") {
                                table.rows[1].cells[6].innerHTML = `${diem / 2}`;
                            }
                            if (table.rows[sltg - 2].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)") {
                                table.rows[1].cells[6].innerHTML = `${diem / 2}`;
                            }
                        }
                    }
                }
                ////// 1 tác giả chính, 1 tác giả liên hệ
                if (valuerank == "Giảng viên" && valueloaihinh == "Nghiên cứu mạnh" && sltgc == 1 && sltglh == 1 && sltgp == 0 && sltg == 2) {
                    for (let i = 0; i < sltg; i++) {
                        trtable += `<tr>
                                                                                        <td>${i + 1}</td>
                                                                                        <td></td>
                                                                                        <td></td>
                                                                                        <td></td>
                                                                                        <td></td>
                                                                                        <td></td>
                                                                                        <td></td>
                                                                                        <td></td>
                                                                                    </tr>`;
                    }
                    table.innerHTML = trtable;
                    for (let i = 0; i < sltg; i++) {
                        var tacgia = document.querySelector('#inp-username-id-mail-' + i).value;
                        table.rows[i].cells[1].innerHTML = tacgia;
                    }
                    for (let i = 0; i < sltg; i++) {
                        var optionscongtac = document.querySelector('#coquancongtac-' + i);
                        var textcongtac = optionscongtac.options[optionscongtac.selectedIndex].textContent;
                        table.rows[i].cells[2].innerHTML = textcongtac;
                    } for (let i = 0; i < sltg; i++) {
                        var optionstg = document.querySelector('#tg-' + i);
                        var texttg = optionstg.options[optionstg.selectedIndex].textContent;
                        table.rows[i].cells[3].innerHTML = texttg;
                    }
                    for (let i = 1; i < sltg; i++) {
                        var coquantgc = table.rows[0].cells[2].textContent;

                        var optionstg = document.querySelector('#tg-' + i);
                        var texttg = optionstg.options[optionstg.selectedIndex].textContent;
                        var optionstgc = document.querySelector('#coquancongtac-0');
                        var texttgc = optionstgc.options[optionstgc.selectedIndex].textContent;
                        var coquan = table.rows[i].cells[2].textContent;
                        if (texttgc == "(1) ngoài UEF, (2) UEF (20%)" || texttgc == "Cơ quan công tác ngoài UEF (0%)") {
                            var donggoptgc = Number(document.querySelector('#donggop-0').value);
                            if (coquan == "Cơ quan công tác duy nhất UEF (100%)") {
                                document.querySelector('#donggop-' + i).disabled = false;
                                var donggop = document.querySelector('#donggop-' + i).value;
                                var donggoptgc = document.querySelector('#donggop-0').value;
                                table.rows[i].cells[4].innerHTML = `${total * donggop / 100}`;
                                table.rows[i].cells[5].innerHTML = `${(total * donggop / 100) * 0.9}`;
                                table.rows[i].cells[6].innerHTML = `${diem / 2}`;

                                table.rows[i].cells[7].innerHTML = `0`;
                                table.rows[0].cells[4].innerHTML = `${total * donggoptgc / 100}`;
                                table.rows[0].cells[5].innerHTML = `${total * donggoptgc / 100 * 0.9} `;
                                if (sltglh > 1) {
                                    table.rows[0].cells[6].innerHTML = `0`;
                                } else {
                                    table.rows[0].cells[6].innerHTML = `0`;
                                }
                                table.rows[0].cells[7].innerHTML = `0`;
                            }
                            if (coquan == "(1) ngoài UEF, (2) UEF (20%)" || coquan == "Cơ quan công tác ngoài UEF (0%)") {

                                table.rows[i].cells[4].innerHTML = `0`;
                                table.rows[i].cells[5].innerHTML = `0`;
                                if (sltglh > 1) {
                                    table.rows[i].cells[6].innerHTML = `0`;
                                } else {
                                    table.rows[i].cells[6].innerHTML = `0`;
                                }
                                table.rows[i].cells[6].innerHTML = `0`;

                                table.rows[0].cells[4].innerHTML = `0`;
                                table.rows[0].cells[5].innerHTML = `0`;
                                if (sltglh > 1) {
                                    table.rows[0].cells[6].innerHTML = `0`;
                                } else {
                                    table.rows[0].cells[6].innerHTML = `0`;
                                }
                                table.rows[0].cells[7].innerHTML = `0`;

                            } if (coquan == "(1) UEF – (2) ngoài UEF (80%)") {
                                document.querySelector('#donggop-' + i).disabled = false;
                                var donggop = document.querySelector('#donggop-' + i).value;
                                var donggoptgc = document.querySelector('#donggop-0').value;
                                table.rows[i].cells[4].innerHTML = `${total / 2 * donggop / 100}`;
                                table.rows[i].cells[5].innerHTML = `${(total / 2 * donggop / 100) * 0.9}`;
                                table.rows[i].cells[6].innerHTML = `${diem / 2}`;

                                table.rows[0].cells[4].innerHTML = `${total / 2 * donggoptgc / 100}`;
                                table.rows[0].cells[5].innerHTML = `${total / 2 * donggoptgc / 100 * 0.9} `;
                                if (sltglh > 1) {
                                    table.rows[0].cells[6].innerHTML = `0`;
                                } else {
                                    table.rows[0].cells[6].innerHTML = `0`;
                                }
                                table.rows[0].cells[7].innerHTML = `0`;
                            }
                        } if (texttgc == "(1) UEF – (2) ngoài UEF (80%)") {
                            var donggoptgc = Number(document.querySelector('#donggop-0').value);

                            if (coquan == "Cơ quan công tác duy nhất UEF (100%)") {
                                table.rows[0].cells[4].innerHTML = `${total * donggoptgc / 100}`;
                                table.rows[0].cells[5].innerHTML = `${(total * donggoptgc / 100) * 0.9}`;
                                table.rows[0].cells[6].innerHTML = `${diem / 2}`;

                                table.rows[0].cells[7].innerHTML = `0`;
                                document.querySelector('#donggop-' + i).disabled = false;
                                var donggop = document.querySelector('#donggop-' + i).value;
                                table.rows[1].cells[4].innerHTML = `${total * donggop / 100}`;
                                table.rows[1].cells[5].innerHTML = `${(total * donggop / 100) * 0.9}`;
                                table.rows[1].cells[6].innerHTML = `${diem / 2}`;

                                table.rows[1].cells[7].innerHTML = `0`;
                            }
                            if (coquan == "(1) ngoài UEF, (2) UEF (20%)" || coquan == "Cơ quan công tác ngoài UEF (0%)") {
                                document.querySelector('#donggop-' + i).disabled = false;
                                table.rows[0].cells[4].innerHTML = `${total / 2 * donggoptgc / 100}`;
                                table.rows[0].cells[5].innerHTML = `${(total / 2 * donggoptgc / 100) * 0.9}`;
                                table.rows[0].cells[6].innerHTML = `${diem / 2}`;

                                table.rows[0].cells[7].innerHTML = `0`;
                                var donggop = document.querySelector('#donggop-' + i).value;
                                table.rows[1].cells[4].innerHTML = `${total / 2 * donggop / 100}`;
                                table.rows[1].cells[5].innerHTML = `${(total / 2 * donggop / 100) * 0.9}`;
                                if (sltglh > 1) {
                                    table.rows[1].cells[6].innerHTML = `${diem / 2}`;
                                } else {
                                    table.rows[1].cells[6].innerHTML = `${diem}`;
                                }
                                table.rows[1].cells[7].innerHTML = `0`;
                            } if (coquan == "(1) UEF – (2) ngoài UEF (80%)") {
                                table.rows[0].cells[4].innerHTML = `${total / 2 * donggoptgc / 100}`;
                                table.rows[0].cells[5].innerHTML = `${(total / 2 * donggoptgc / 100) * 0.9}`;
                                table.rows[0].cells[6].innerHTML = `${diem / 2}`;

                                table.rows[0].cells[7].innerHTML = `0`;
                                document.querySelector('#donggop-' + i).disabled = false;
                                var donggop = document.querySelector('#donggop-' + i).value;
                                table.rows[i].cells[4].innerHTML = `${total / 2 * donggop / 100}`;
                                table.rows[i].cells[5].innerHTML = `${(total / 2 * donggop / 100) * 0.9}`;
                                table.rows[i].cells[6].innerHTML = `${diem / 2}`;

                                table.rows[i].cells[7].innerHTML = `0`;
                            }
                        }
                        if (texttgc == "Cơ quan công tác duy nhất UEF (100%)") {
                            var donggoptgc = Number(document.querySelector('#donggop-0').value);
                            table.rows[0].cells[4].innerHTML = `${total * donggoptgc / 100}`;
                            table.rows[0].cells[5].innerHTML = `${(total * donggoptgc / 100) * 0.9}`;
                            table.rows[0].cells[6].innerHTML = `${diem / 2}`;

                            table.rows[0].cells[7].innerHTML = `0`;
                            if (coquan == "Cơ quan công tác duy nhất UEF (100%)") {
                                document.querySelector('#donggop-' + i).disabled = false;
                                var donggop = document.querySelector('#donggop-' + i).value;
                                table.rows[i].cells[4].innerHTML = `${total * donggop / 100}`;
                                table.rows[i].cells[5].innerHTML = `${(total * donggop / 100) * 0.9}`;
                                if (sltglh > 1) {
                                    table.rows[i].cells[6].innerHTML = `${diem / 2}`;
                                } else {
                                    table.rows[i].cells[6].innerHTML = `${diem / 2}`;
                                }
                                table.rows[i].cells[7].innerHTML = `0`;

                            } if (coquan == "(1) ngoài UEF, (2) UEF (20%)" || coquan == "Cơ quan công tác ngoài UEF (0%)") {
                                table.rows[i].cells[4].innerHTML = `${total * donggop / 100}`;
                                table.rows[i].cells[5].innerHTML = `${total * donggop / 100 * 0.9}`;
                                if (sltglh > 1) {
                                    table.rows[i].cells[6].innerHTML = `0`;
                                } else {
                                    table.rows[i].cells[6].innerHTML = `0`;
                                }
                                table.rows[i].cells[7].innerHTML = `0`;
                            } if (coquan == "(1) UEF – (2) ngoài UEF (80%)") {
                                document.querySelector('#donggop-' + i).disabled = false;
                                var donggop = document.querySelector('#donggop-' + i).value;
                                table.rows[i].cells[4].innerHTML = `${total * donggop / 100}`;
                                table.rows[i].cells[5].innerHTML = `${(total * donggop / 100) * 0.9}`;
                                if (sltglh > 1) {
                                    table.rows[i].cells[6].innerHTML = `${diem / 2}`;
                                } else {
                                    table.rows[i].cells[6].innerHTML = `${diem / 2}`;
                                }
                                table.rows[i].cells[7].innerHTML = `0`;
                            }
                        }
                    }
                }
                ////// 1 tác giả chính, >1 tác giả liên hệ
                if (valuerank == "Giảng viên" && valueloaihinh == "Nghiên cứu mạnh" && sltg > 2 && sltgc == 1 && sltgp == 0 && sltglh > 1) {
                    for (let i = 0; i < sltg; i++) {
                        trtable += `<tr>
                                                                            <td>${i + 1}</td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                        </tr>`;
                    }
                    table.innerHTML = trtable;
                    for (let i = 0; i < sltg; i++) {
                        var tacgia = document.querySelector('#inp-username-id-mail-' + i).value;
                        table.rows[i].cells[1].innerHTML = tacgia;
                    }
                    for (let i = 0; i < sltg; i++) {
                        var optionscongtac = document.querySelector('#coquancongtac-' + i);
                        var textcongtac = optionscongtac.options[optionscongtac.selectedIndex].textContent;
                        table.rows[i].cells[2].innerHTML = textcongtac;
                    } for (let i = 0; i < sltg; i++) {
                        var optionstg = document.querySelector('#tg-' + i);
                        var texttg = optionstg.options[optionstg.selectedIndex].textContent;
                        table.rows[i].cells[3].innerHTML = texttg;
                    }
                    for (let i = 1; i < sltg; i++) {
                        var coquantgc = table.rows[0].cells[2].textContent;
                        var optionstg = document.querySelector('#tg-' + i);
                        var texttg = optionstg.options[optionstg.selectedIndex].textContent;
                        var optionstgc = document.querySelector('#coquancongtac-0');
                        var texttgc = optionstgc.options[optionstgc.selectedIndex].textContent;
                        var coquan = table.rows[i].cells[2].textContent;
                        if (texttgc == "(1) ngoài UEF, (2) UEF (20%)" || texttgc == "Cơ quan công tác ngoài UEF (0%)") {
                            var donggoptgc = Number(document.querySelector('#donggop-0').value);
                            if (coquan == "Cơ quan công tác duy nhất UEF (100%)") {
                                document.querySelector('#donggop-' + i).disabled = false;
                                var donggop = document.querySelector('#donggop-' + i).value;
                                var donggoptgc = document.querySelector('#donggop-0').value;
                                table.rows[i].cells[4].innerHTML = `${total * donggop / 100}`;
                                table.rows[i].cells[5].innerHTML = `${(total * donggop / 100) * 0.9}`;
                                if (sltglh > 1) {
                                    table.rows[i].cells[6].innerHTML = `${diem / 2}`;
                                } else {
                                    table.rows[i].cells[6].innerHTML = `${diem}`;
                                }
                                table.rows[i].cells[7].innerHTML = `0`;
                                table.rows[0].cells[4].innerHTML = `${total * donggoptgc / 100}`;
                                table.rows[0].cells[5].innerHTML = `${total * donggoptgc / 100 * 0.9} `;
                                if (sltglh > 1) {
                                    table.rows[0].cells[6].innerHTML = `0`;
                                } else {
                                    table.rows[0].cells[6].innerHTML = `0`;
                                }
                                table.rows[0].cells[7].innerHTML = `0`;
                            }
                            if (coquan == "(1) ngoài UEF, (2) UEF (20%)" || coquan == "Cơ quan công tác ngoài UEF (0%)") {

                                table.rows[i].cells[4].innerHTML = `0`;
                                table.rows[i].cells[5].innerHTML = `0`;
                                if (sltglh > 1) {
                                    table.rows[i].cells[6].innerHTML = `0`;
                                } else {
                                    table.rows[i].cells[6].innerHTML = `0`;
                                }
                                table.rows[i].cells[6].innerHTML = `0`;

                                table.rows[0].cells[4].innerHTML = `0`;
                                table.rows[0].cells[5].innerHTML = `0`;
                                if (sltglh > 1) {
                                    table.rows[0].cells[6].innerHTML = `0`;
                                } else {
                                    table.rows[0].cells[6].innerHTML = `0`;
                                }
                                table.rows[0].cells[7].innerHTML = `0`;

                            } if (coquan == "(1) UEF – (2) ngoài UEF (80%)") {
                                document.querySelector('#donggop-' + i).disabled = false;
                                var donggop = document.querySelector('#donggop-' + i).value;
                                var donggoptgc = document.querySelector('#donggop-0').value;
                                table.rows[i].cells[4].innerHTML = `${total / 2 * donggop / 100}`;
                                table.rows[i].cells[5].innerHTML = `${(total / 2 * donggop / 100) * 0.9}`;
                                if (sltglh > 1) {
                                    table.rows[i].cells[6].innerHTML = `${diem / 2}`;
                                } else {
                                    table.rows[i].cells[6].innerHTML = `${diem}`;
                                }
                                table.rows[0].cells[4].innerHTML = `${total / 2 * donggoptgc / 100}`;
                                table.rows[0].cells[5].innerHTML = `${total / 2 * donggoptgc / 100 * 0.9} `;
                                if (sltglh > 1) {
                                    table.rows[0].cells[6].innerHTML = `0`;
                                } else {
                                    table.rows[0].cells[6].innerHTML = `0`;
                                }
                                table.rows[0].cells[7].innerHTML = `0`;
                            }
                        } if (texttgc == "(1) UEF – (2) ngoài UEF (80%)") {
                            var donggoptgc = Number(document.querySelector('#donggop-0').value);

                            if (coquan == "Cơ quan công tác duy nhất UEF (100%)") {
                                table.rows[0].cells[4].innerHTML = `${total * donggoptgc / 100}`;
                                table.rows[0].cells[5].innerHTML = `${(total * donggoptgc / 100) * 0.9}`;
                                if (sltglh > 1) {
                                    table.rows[0].cells[6].innerHTML = `${diem / 2}`;
                                } else {
                                    table.rows[0].cells[6].innerHTML = `${diem}`;
                                }
                                table.rows[0].cells[7].innerHTML = `0`;
                                document.querySelector('#donggop-' + i).disabled = false;
                                var donggop = document.querySelector('#donggop-' + i).value;
                                table.rows[i].cells[4].innerHTML = `${total * donggop / 100}`;
                                table.rows[i].cells[5].innerHTML = `${(total * donggop / 100) * 0.9}`;
                                if (sltglh > 1) {
                                    table.rows[i].cells[6].innerHTML = `${diem / 2}`;
                                } else {
                                    table.rows[i].cells[6].innerHTML = `${diem}`;
                                }
                                table.rows[i].cells[7].innerHTML = `0`;

                            }
                            if (coquan == "(1) ngoài UEF, (2) UEF (20%)" || coquan == "Cơ quan công tác ngoài UEF (0%)") {
                                document.querySelector('#donggop-' + i).disabled = false;
                                table.rows[0].cells[4].innerHTML = `${total / 2 * donggoptgc / 100}`;
                                table.rows[0].cells[5].innerHTML = `${(total / 2 * donggoptgc / 100) * 0.9}`;
                                if (sltglh > 1) {
                                    table.rows[0].cells[6].innerHTML = `${diem / 2}`;
                                } else {
                                    table.rows[0].cells[6].innerHTML = `${diem}`;
                                }
                                table.rows[0].cells[7].innerHTML = `0`;
                                var donggop = document.querySelector('#donggop-' + i).value;
                                table.rows[1].cells[4].innerHTML = `${total / 2 * donggop / 100}`;
                                table.rows[1].cells[5].innerHTML = `${(total / 2 * donggop / 100) * 0.9}`;
                                if (sltglh > 1) {
                                    table.rows[1].cells[6].innerHTML = `${diem / 2}`;
                                } else {
                                    table.rows[1].cells[6].innerHTML = `${diem}`;
                                }
                                table.rows[1].cells[7].innerHTML = `0`;
                            } if (coquan == "(1) UEF – (2) ngoài UEF (80%)") {
                                table.rows[0].cells[4].innerHTML = `${total / 2 * donggoptgc / 100}`;
                                table.rows[0].cells[5].innerHTML = `${(total / 2 * donggoptgc / 100) * 0.9}`;
                                if (sltglh > 1) {
                                    table.rows[0].cells[6].innerHTML = `${diem / 2}`;
                                } else {
                                    table.rows[0].cells[6].innerHTML = `${diem}`;
                                }
                                table.rows[0].cells[7].innerHTML = `0`;
                                document.querySelector('#donggop-' + i).disabled = false;
                                var donggop = document.querySelector('#donggop-' + i).value;
                                table.rows[i].cells[4].innerHTML = `${total / 2 * donggop / 100}`;
                                table.rows[i].cells[5].innerHTML = `${(total / 2 * donggop / 100) * 0.9}`;
                                if (sltglh > 1) {
                                    table.rows[i].cells[6].innerHTML = `${diem / 2}`;
                                } else {
                                    table.rows[i].cells[6].innerHTML = `${diem}`;

                                }
                                table.rows[i].cells[7].innerHTML = `0`;
                            }
                        }
                        if (texttgc == "Cơ quan công tác duy nhất UEF (100%)") {
                            var donggoptgc = Number(document.querySelector('#donggop-0').value);
                            table.rows[0].cells[4].innerHTML = `${total * donggoptgc / 100}`;
                            table.rows[0].cells[5].innerHTML = `${(total * donggoptgc / 100) * 0.9}`;
                            table.rows[0].cells[6].innerHTML = `${diem / 2}`;
                            table.rows[0].cells[7].innerHTML = `0`;
                            if (coquan == "Cơ quan công tác duy nhất UEF (100%)") {
                                document.querySelector('#donggop-' + i).disabled = false;
                                table.rows[0].cells[4].innerHTML = `${total * donggoptgc / 100}`;
                                table.rows[0].cells[5].innerHTML = `${(total * donggoptgc / 100) * 0.9}`;
                                table.rows[0].cells[6].innerHTML = `${diem / 2}`;
                                table.rows[0].cells[7].innerHTML = `0`;
                                var donggop = document.querySelector('#donggop-' + i).value;
                                table.rows[i].cells[4].innerHTML = `${total * donggop / 100}`;
                                table.rows[i].cells[5].innerHTML = `${(total * donggop / 100) * 0.9}`;
                                if (sltglh > 1) {
                                    table.rows[i].cells[6].innerHTML = `${diem / 2}`;
                                } else {
                                    table.rows[i].cells[6].innerHTML = `${diem / 2}`;
                                }
                                table.rows[i].cells[7].innerHTML = `0`;

                            } if (coquan == "(1) ngoài UEF, (2) UEF (20%)" || coquan == "Cơ quan công tác ngoài UEF (0%)") {
                                table.rows[i].cells[4].innerHTML = `${total * donggop / 100}`;
                                table.rows[i].cells[5].innerHTML = `${total * donggop / 100 * 0.9}`;
                                if (sltglh > 1) {
                                    table.rows[i].cells[6].innerHTML = `0`;
                                } else {
                                    table.rows[i].cells[6].innerHTML = `0`;
                                }
                                table.rows[i].cells[7].innerHTML = `0`;
                            } if (coquan == "(1) UEF – (2) ngoài UEF (80%)") {
                                document.querySelector('#donggop-' + i).disabled = false;
                                var donggop = document.querySelector('#donggop-' + i).value;
                                table.rows[i].cells[4].innerHTML = `${total * donggop / 100}`;
                                table.rows[i].cells[5].innerHTML = `${(total * donggop / 100) * 0.9}`;
                                if (sltglh > 1) {
                                    table.rows[i].cells[6].innerHTML = `${diem / 2}`;
                                } else {
                                    table.rows[i].cells[6].innerHTML = `${diem / 2}`;
                                }
                                table.rows[i].cells[7].innerHTML = `0`;
                            }
                        }
                    }
                }
                ////// có 1 tác giả chính
                if (valuerank == "Giảng viên" && valueloaihinh == "Nghiên cứu mạnh" && sltg == 1) {
                    for (let i = 0; i < sltg; i++) {
                        trtable += `<tr>
                                                                            <td>${i + 1}</td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                        </tr>`;
                    }
                    table.innerHTML = trtable;
                    for (let i = 0; i < sltg; i++) {
                        var tacgia = document.querySelector('#inp-username-id-mail-' + i).value;
                        table.rows[i].cells[1].innerHTML = tacgia;
                    }
                    for (let i = 0; i < sltg; i++) {
                        var optionscongtac = document.querySelector('#coquancongtac-' + i);
                        var textcongtac = optionscongtac.options[optionscongtac.selectedIndex].textContent;
                        table.rows[i].cells[2].innerHTML = textcongtac;
                    } for (let i = 0; i < sltg; i++) {
                        var optionstg = document.querySelector('#tg-' + i);
                        var texttg = optionstg.options[optionstg.selectedIndex].textContent;
                        table.rows[i].cells[3].innerHTML = texttg;
                    }

                    for (let i = 0; i < sltg; i++) {

                        if (table.rows[0].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)") {
                            table.rows[0].cells[4].innerHTML = `${((total))}`;
                            table.rows[0].cells[5].innerHTML = `${(((total))) * 0.9}`;
                            table.rows[0].cells[6].innerHTML = `${diem}`;
                            table.rows[0].cells[7].innerHTML = `0`;
                        } else if (table.rows[0].cells[2].textContent == "(1) UEF – (2) ngoài UEF (80%)") {
                            table.rows[0].cells[4].innerHTML = `${((total / 2))}`;
                            table.rows[0].cells[5].innerHTML = `${(((total / 2))) * 0.9}`;
                            table.rows[0].cells[6].innerHTML = `${diem}`;
                            table.rows[0].cells[7].innerHTML = `0`;
                        } else {
                            table.rows[0].cells[4].innerHTML = `0`;
                            table.rows[0].cells[5].innerHTML = `0`;
                            table.rows[0].cells[6].innerHTML = `0`;
                            table.rows[0].cells[7].innerHTML = `0`;
                        }

                    }

                }
                ///// 1 chính, 1 phụ hoặc 1 chính 1 liên hệ

                if (valuerank == "Giảng viên" && valueloaihinh == "Nghiên cứu mạnh" && sltg == 2 && sltgc == 1 && sltgp == 1) {
                    for (let i = 0; i < sltg; i++) {
                        trtable += `<tr>
                                                                            <td>${i + 1}</td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                        </tr>`;
                    }
                    table.innerHTML = trtable;
                    for (let i = 0; i < sltg; i++) {
                        var tacgia = document.querySelector('#inp-username-id-mail-' + i).value;
                        table.rows[i].cells[1].innerHTML = tacgia;
                    }
                    for (let i = 0; i < sltg; i++) {
                        var optionscongtac = document.querySelector('#coquancongtac-' + i);
                        var textcongtac = optionscongtac.options[optionscongtac.selectedIndex].textContent;
                        table.rows[i].cells[2].innerHTML = textcongtac;
                    } for (let i = 0; i < sltg; i++) {
                        var optionstg = document.querySelector('#tg-' + i);
                        var texttg = optionstg.options[optionstg.selectedIndex].textContent;
                        table.rows[i].cells[3].innerHTML = texttg;
                    }
                    if (sltg == 2) {
                        for (let i = 0; i < sltg; i++) {

                            var donggop = Number(document.querySelector('#donggop-' + i).value);
                            var optionscongtac = document.querySelector('#coquancongtac-' + 0);
                            var coquan = optionscongtac.options[optionscongtac.selectedIndex].textContent;
                            var donggoptgc = Number(document.querySelector('#donggop-0').value);

                            if (coquan == "(1) ngoài UEF, (2) UEF (20%)" || coquan == "Cơ quan công tác ngoài UEF (0%)") {
                                if (table.rows[1].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)") {
                                    table.rows[0].cells[4].innerHTML = `${((total)) * (donggoptgc / 100)}`;
                                    table.rows[0].cells[5].innerHTML = `${(((total)) * (donggoptgc / 100)) * 0.9}`;
                                    table.rows[0].cells[6].innerHTML = `0`;
                                    table.rows[0].cells[7].innerHTML = `0`;
                                    table.rows[1].cells[4].innerHTML = `${((total)) * (donggop / 100)}`;
                                    table.rows[1].cells[5].innerHTML = `${(((total)) * (donggop / 100)) * 0.9}`;
                                    table.rows[1].cells[6].innerHTML = `0`;
                                    table.rows[1].cells[7].innerHTML = `0`;
                                } else if (table.rows[1].cells[2].textContent == "(1) UEF – (2) ngoài UEF (80%)") {
                                    table.rows[0].cells[4].innerHTML = `${((total / 2)) * (donggoptgc / 100)}`;
                                    table.rows[0].cells[5].innerHTML = `${(((total / 2)) * (donggop / 100)) * 0.9}`;
                                    table.rows[0].cells[6].innerHTML = `0`;
                                    table.rows[0].cells[7].innerHTML = `0`;
                                    table.rows[1].cells[4].innerHTML = `${((total / 2)) * (donggop / 100)}`;
                                    table.rows[1].cells[5].innerHTML = `${(((total / 2)) * (donggop / 100)) * 0.9}`;
                                    table.rows[1].cells[6].innerHTML = `0`;
                                    table.rows[1].cells[7].innerHTML = `0`;
                                } else if (table.rows[1].cells[2].textContent == "(1) ngoài UEF, (2) UEF (20%)" || table.rows[1].cells[2].textContent == "Cơ quan công tác ngoài UEF (0%)") {
                                    table.rows[0].cells[4].innerHTML = `0`;
                                    table.rows[0].cells[5].innerHTML = `0`;
                                    table.rows[0].cells[6].innerHTML = `0`;
                                    table.rows[0].cells[7].innerHTML = `0`;
                                    table.rows[1].cells[4].innerHTML = `0`;
                                    table.rows[1].cells[5].innerHTML = `0`;
                                    table.rows[1].cells[6].innerHTML = `0`;
                                    table.rows[1].cells[7].innerHTML = `0`;

                                }

                            } if (coquan == "(1) UEF – (2) ngoài UEF (80%)") {
                                table.rows[i].cells[4].innerHTML = `${((total / 2)) * (donggop / 100)}`;
                                table.rows[i].cells[5].innerHTML = `${(((total / 2)) * (donggop / 100)) * 0.9}`;
                                table.rows[i].cells[6].innerHTML = `${diem / 2}`;
                                table.rows[i].cells[7].innerHTML = `0`;
                                var donggoptgc = Number(document.querySelector('#donggop-0').value);

                                if (table.rows[1].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)") {
                                    table.rows[1].cells[4].innerHTML = `${((total)) * (donggop / 100)}`;
                                    table.rows[1].cells[5].innerHTML = `${(((total)) * (donggop / 100)) * 0.9}`;
                                    table.rows[1].cells[6].innerHTML = `0`;
                                    table.rows[1].cells[7].innerHTML = `0`;
                                    table.rows[0].cells[4].innerHTML = `${((total)) * (donggoptgc / 100)}`;
                                    table.rows[0].cells[5].innerHTML = `${(((total)) * (donggoptgc / 100)) * 0.9}`;
                                    table.rows[0].cells[6].innerHTML = `${diem / 2}`;
                                    table.rows[0].cells[7].innerHTML = `0`;
                                }

                            } else if (coquan == "Cơ quan công tác duy nhất UEF (100%)") {
                                table.rows[i].cells[4].innerHTML = `${(total) * (donggop / 100)}`;
                                table.rows[i].cells[5].innerHTML = `${((total)) * (donggop / 100) * 0.9}`;
                                table.rows[i].cells[6].innerHTML = `${diem / 2}`;
                                table.rows[i].cells[7].innerHTML = `0`;
                            }
                        }

                    }
                }
                ///// nhiều hơn 3 tác giả: 1 chính, 1 phụ, 1 liên hệ

                ////
                if (valuerank == "Giảng viên" && valueloaihinh == "Nghiên cứu mạnh" && sltgc > 0 && sltglh == 1 && sltgp > 1 && sltg > 2) {
                    for (let i = 0; i < sltg; i++) {
                        trtable += `<tr>
                                                                            <td>${i + 1}</td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                        </tr>`;
                    }
                    table.innerHTML = trtable;
                    for (let i = 0; i < sltg; i++) {
                        var tacgia = document.querySelector('#inp-username-id-mail-' + i).value;
                        table.rows[i].cells[1].innerHTML = tacgia;
                    }
                    for (let i = 0; i < sltg; i++) {
                        var optionscongtac = document.querySelector('#coquancongtac-' + i);
                        var textcongtac = optionscongtac.options[optionscongtac.selectedIndex].textContent;
                        table.rows[i].cells[2].innerHTML = textcongtac;
                    } for (let i = 0; i < sltg; i++) {
                        var optionstg = document.querySelector('#tg-' + i);
                        var texttg = optionstg.options[optionstg.selectedIndex].textContent;
                        table.rows[i].cells[3].innerHTML = texttg;
                    }
                    if (table.rows[0].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)") {
                        for (let j = 0; j < sltg; j++) {
                            if (table.rows[j].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)") {
                                for (let k = 0; k < sltg; k++) {
                                    var donggoptgc = document.querySelector('#donggop-' + k).value;
                                    table.rows[k].cells[4].innerHTML = `${total / sltglh * donggoptgc / 100}`;
                                    table.rows[k].cells[5].innerHTML = `${total / sltglh * donggoptgc / 100 * 0.9}`;
                                    if (table.rows[k].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)" || table.rows[k].cells[2].textContent == "(1) UEF – (2) ngoài UEF (80%)") {
                                        table.rows[k].cells[6].innerHTML = `${diem / 2}`;
                                    } else {
                                        table.rows[k].cells[6].innerHTML = `0`;
                                    }
                                    table.rows[k].cells[7].innerHTML = `0`;
                                }
                                break;
                            }
                            if (table.rows[j].cells[2].textContent == "(1) UEF – (2) ngoài UEF (80%)") {
                                var coquanhutech = 0;
                                for (let g = (j + 1); g < sltg; g++) {
                                    if (table.rows[g].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)") {
                                        coquanhutech += 1;
                                    }
                                }
                                if (coquanhutech < 1) {
                                    for (let k = 0; k < sltg; k++) {
                                        var donggoptgc = document.querySelector('#donggop-' + k).value;
                                        table.rows[k].cells[4].innerHTML = `${total / 2 / sltglh * donggoptgc / 100}`;
                                        table.rows[k].cells[5].innerHTML = `${total / 2 / sltglh * donggoptgc / 100 * 0.9}`;
                                        if (table.rows[k].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)" || table.rows[k].cells[2].textContent == "(1) UEF – (2) ngoài UEF (80%)") {
                                            table.rows[k].cells[6].innerHTML = `${diem / 2}`;
                                        } else {
                                            table.rows[k].cells[6].innerHTML = `0`;
                                        }
                                        table.rows[k].cells[7].innerHTML = `0`;
                                    }
                                    break;
                                }
                            } else {
                                for (let j = 1; j < (sltg - sltglh); j++) {
                                    if (table.rows[j].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)") {
                                        for (let k = 0; k < sltg; k++) {
                                            var donggoptgc = document.querySelector('#donggop-' + k).value;
                                            table.rows[k].cells[4].innerHTML = `${total / 4 * donggoptgc / 100}`;
                                            table.rows[k].cells[5].innerHTML = `${total / 4 * donggoptgc / 100 * 0.9}`;
                                            if (table.rows[k].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)" || table.rows[k].cells[2].textContent == "(1) UEF – (2) ngoài UEF (80%)") {
                                                table.rows[k].cells[6].innerHTML = `${diem / 2}`;
                                            } else {
                                                table.rows[k].cells[6].innerHTML = `0`;
                                            }
                                            table.rows[k].cells[7].innerHTML = `0`;
                                        }
                                        break;
                                    }
                                    if (table.rows[j].cells[2].textContent == "(1) UEF – (2) ngoài UEF (80%)") {
                                        var coquanhutech = 0;
                                        for (let g = (j); g < sltg; g++) {
                                            if (table.rows[g].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)") {
                                                coquanhutech += 1;
                                            }
                                        }
                                        if (coquanhutech < 1) {
                                            for (let k = 0; k < sltg; k++) {
                                                var donggoptgc = document.querySelector('#donggop-' + k).value;
                                                table.rows[k].cells[4].innerHTML = `${total / 4 / 2 * donggoptgc / 100}`;
                                                table.rows[k].cells[5].innerHTML = `${total / 4 / 2 * donggoptgc / 100 * 0.9}`;
                                                if (table.rows[k].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)" || table.rows[k].cells[2].textContent == "(1) UEF – (2) ngoài UEF (80%)") {
                                                    table.rows[k].cells[6].innerHTML = `${diem / 2}`;
                                                } else {
                                                    table.rows[k].cells[6].innerHTML = `0`;
                                                }
                                                table.rows[k].cells[7].innerHTML = `0`;
                                            }
                                            break;
                                        }
                                    } else {
                                        for (let j = 2; j < (sltg - sltglh); j++) {
                                            if (table.rows[j].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)") {
                                                for (let k = 0; k < sltg; k++) {
                                                    var donggoptgc = document.querySelector('#donggop-' + k).value;
                                                    table.rows[k].cells[4].innerHTML = `${total / 4 * donggoptgc / 100}`;
                                                    table.rows[k].cells[5].innerHTML = `${total / 4 * donggoptgc / 100 * 0.9}`;
                                                    if (table.rows[k].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)" || table.rows[k].cells[2].textContent == "(1) UEF – (2) ngoài UEF (80%)") {
                                                        table.rows[k].cells[6].innerHTML = `${diem / 2}`;
                                                    } else {
                                                        table.rows[k].cells[6].innerHTML = `0`;
                                                    }
                                                    table.rows[k].cells[7].innerHTML = `0`;
                                                }
                                                break;
                                            }
                                            if (table.rows[j].cells[2].textContent == "(1) UEF – (2) ngoài UEF (80%)") {
                                                var coquanhutech = 0;
                                                for (let g = (j); g < sltg; g++) {
                                                    if (table.rows[g].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)") {
                                                        coquanhutech += 1;
                                                    }
                                                }
                                                if (coquanhutech < 1) {
                                                    for (let k = 0; k < sltg; k++) {
                                                        var donggoptgc = document.querySelector('#donggop-' + k).value;
                                                        table.rows[k].cells[4].innerHTML = `${total / 4 / 2 * donggoptgc / 100}`;
                                                        table.rows[k].cells[5].innerHTML = `${total / 4 / 2 * donggoptgc / 100 * 0.9}`;
                                                        if (table.rows[k].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)" || table.rows[k].cells[2].textContent == "(1) UEF – (2) ngoài UEF (80%)") {
                                                            table.rows[k].cells[6].innerHTML = `${diem / 2}`;
                                                        } else {
                                                            table.rows[k].cells[6].innerHTML = `0`;
                                                        }
                                                        table.rows[k].cells[7].innerHTML = `0`;
                                                    }
                                                    break;
                                                }
                                            } else {
                                                for (let k = 0; k < sltg; k++) {

                                                    table.rows[k].cells[4].innerHTML = `0`;
                                                    table.rows[k].cells[5].innerHTML = `0`;
                                                    if (table.rows[k].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)" || table.rows[k].cells[2].textContent == "(1) UEF – (2) ngoài UEF (80%)") {
                                                        table.rows[k].cells[6].innerHTML = `0`;
                                                    } else {
                                                        table.rows[k].cells[6].innerHTML = `0`;
                                                    }
                                                    table.rows[k].cells[7].innerHTML = `0`;
                                                }
                                            }
                                        }
                                        break;
                                    }

                                }
                            }
                        }
                    }
                    ////////////
                    if (table.rows[0].cells[2].textContent == "(1) UEF – (2) ngoài UEF (80%)") {
                        if (table.rows[sltg - 1].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)") {
                            for (let j = 0; j < sltg; j++) {
                                if (table.rows[j].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)") {
                                    for (let k = 0; k < sltg; k++) {
                                        var donggoptgc = document.querySelector('#donggop-' + k).value;
                                        table.rows[k].cells[4].innerHTML = `${total / sltglh * donggoptgc / 100}`;
                                        table.rows[k].cells[5].innerHTML = `${total / sltglh * donggoptgc / 100 * 0.9}`;
                                        if (table.rows[k].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)" || table.rows[k].cells[2].textContent == "(1) UEF – (2) ngoài UEF (80%)") {
                                            table.rows[k].cells[6].innerHTML = `${diem / 2}`;
                                        } else {
                                            table.rows[k].cells[6].innerHTML = `0`;
                                        }
                                        table.rows[k].cells[7].innerHTML = `0`;
                                    }
                                    break;
                                }
                                if (table.rows[j].cells[2].textContent == "(1) UEF – (2) ngoài UEF (80%)") {
                                    var coquanhutech = 0;
                                    for (let g = (j + 1); g < sltg; g++) {
                                        if (table.rows[g].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)") {
                                            coquanhutech += 1;
                                        }
                                    }
                                    if (coquanhutech < 1) {
                                        for (let k = 0; k < sltg; k++) {
                                            var donggoptgc = document.querySelector('#donggop-' + k).value;
                                            table.rows[k].cells[4].innerHTML = `${total / 2 / sltglh * donggoptgc / 100}`;
                                            table.rows[k].cells[5].innerHTML = `${total / 2 / sltglh * donggoptgc / 100 * 0.9}`;
                                            if (table.rows[k].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)" || table.rows[k].cells[2].textContent == "(1) UEF – (2) ngoài UEF (80%)") {
                                                table.rows[k].cells[6].innerHTML = `${diem / 2}`;
                                            } else {
                                                table.rows[k].cells[6].innerHTML = `0`;
                                            }
                                            table.rows[k].cells[7].innerHTML = `0`;
                                        }
                                        break;
                                    }
                                } else {
                                    for (let j = 1; j < (sltg - sltglh); j++) {
                                        if (table.rows[j].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)") {
                                            for (let k = 0; k < sltg; k++) {
                                                var donggoptgc = document.querySelector('#donggop-' + k).value;
                                                table.rows[k].cells[4].innerHTML = `${total / 4 * donggoptgc / 100}`;
                                                table.rows[k].cells[5].innerHTML = `${total / 4 * donggoptgc / 100 * 0.9}`;
                                                if (table.rows[k].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)" || table.rows[k].cells[2].textContent == "(1) UEF – (2) ngoài UEF (80%)") {
                                                    table.rows[k].cells[6].innerHTML = `${diem / 2}`;
                                                } else {
                                                    table.rows[k].cells[6].innerHTML = `0`;
                                                }
                                                table.rows[k].cells[7].innerHTML = `0`;
                                            }
                                            break;
                                        }
                                        if (table.rows[j].cells[2].textContent == "(1) UEF – (2) ngoài UEF (80%)") {
                                            var coquanhutech = 0;
                                            for (let g = (j); g < sltg; g++) {
                                                if (table.rows[g].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)") {
                                                    coquanhutech += 1;
                                                }
                                            }
                                            if (coquanhutech < 1) {
                                                for (let k = 0; k < sltg; k++) {
                                                    var donggoptgc = document.querySelector('#donggop-' + k).value;
                                                    table.rows[k].cells[4].innerHTML = `${total / 4 / 2 * donggoptgc / 100}`;
                                                    table.rows[k].cells[5].innerHTML = `${total / 4 / 2 * donggoptgc / 100 * 0.9}`;
                                                    if (table.rows[k].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)" || table.rows[k].cells[2].textContent == "(1) UEF – (2) ngoài UEF (80%)") {
                                                        table.rows[k].cells[6].innerHTML = `${diem / 2}`;
                                                    } else {
                                                        table.rows[k].cells[6].innerHTML = `0`;
                                                    }
                                                    table.rows[k].cells[7].innerHTML = `0`;
                                                }
                                                break;
                                            }
                                        } else {
                                            for (let j = 2; j < (sltg - sltglh); j++) {
                                                if (table.rows[j].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)") {
                                                    for (let k = 0; k < sltg; k++) {
                                                        var donggoptgc = document.querySelector('#donggop-' + k).value;
                                                        table.rows[k].cells[4].innerHTML = `${total / 4 * donggoptgc / 100}`;
                                                        table.rows[k].cells[5].innerHTML = `${total / 4 * donggoptgc / 100 * 0.9}`;
                                                        if (table.rows[k].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)" || table.rows[k].cells[2].textContent == "(1) UEF – (2) ngoài UEF (80%)") {
                                                            table.rows[k].cells[6].innerHTML = `${diem / 2}`;
                                                        } else {
                                                            table.rows[k].cells[6].innerHTML = `0`;
                                                        }
                                                        table.rows[k].cells[7].innerHTML = `0`;
                                                    }
                                                    break;
                                                }
                                                if (table.rows[j].cells[2].textContent == "(1) UEF – (2) ngoài UEF (80%)") {
                                                    var coquanhutech = 0;
                                                    for (let g = (j); g < sltg; g++) {
                                                        if (table.rows[g].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)") {
                                                            coquanhutech += 1;
                                                        }
                                                    }
                                                    if (coquanhutech < 1) {
                                                        for (let k = 0; k < sltg; k++) {
                                                            var donggoptgc = document.querySelector('#donggop-' + k).value;
                                                            table.rows[k].cells[4].innerHTML = `${total / 4 / 2 * donggoptgc / 100}`;
                                                            table.rows[k].cells[5].innerHTML = `${total / 4 / 2 * donggoptgc / 100 * 0.9}`;
                                                            if (table.rows[k].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)" || table.rows[k].cells[2].textContent == "(1) UEF – (2) ngoài UEF (80%)") {
                                                                table.rows[k].cells[6].innerHTML = `${diem / 2}`;
                                                            } else {
                                                                table.rows[k].cells[6].innerHTML = `0`;
                                                            }
                                                            table.rows[k].cells[7].innerHTML = `0`;
                                                        }
                                                        break;
                                                    }
                                                } else {
                                                    for (let k = 0; k < sltg; k++) {

                                                        table.rows[k].cells[4].innerHTML = `0`;
                                                        table.rows[k].cells[5].innerHTML = `0`;
                                                        if (table.rows[k].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)" || table.rows[k].cells[2].textContent == "(1) UEF – (2) ngoài UEF (80%)") {
                                                            table.rows[k].cells[6].innerHTML = `0`;
                                                        } else {
                                                            table.rows[k].cells[6].innerHTML = `0`;
                                                        }
                                                        table.rows[k].cells[7].innerHTML = `0`;
                                                    }
                                                }
                                            }
                                            break;
                                        }

                                    }
                                }
                            }
                        }
                        if (table.rows[sltg - 1].cells[2].textContent != "Cơ quan công tác duy nhất UEF (100%)") {
                            if (table.rows[0].cells[sltg - 1].textContent != "Cơ quan công tác duy nhất UEF (100%)") {
                                for (let j = 0; j < sltg; j++) {
                                    if (table.rows[j].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)") {
                                        for (let k = 0; k < sltg; k++) {
                                            var donggoptgc = document.querySelector('#donggop-' + k).value;
                                            table.rows[k].cells[4].innerHTML = `${total / 2 * donggoptgc / 100}`;
                                            table.rows[k].cells[5].innerHTML = `${total / 2 * donggoptgc / 100 * 0.9}`;
                                            if (table.rows[k].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)" || table.rows[k].cells[2].textContent == "(1) UEF – (2) ngoài UEF (80%)") {
                                                table.rows[k].cells[6].innerHTML = `${diem / 2}`;
                                            } else {
                                                table.rows[k].cells[6].innerHTML = `0`;
                                            }
                                            table.rows[k].cells[7].innerHTML = `0`;
                                        }
                                        break;
                                    }
                                    if (table.rows[j].cells[2].textContent == "(1) UEF – (2) ngoài UEF (80%)") {
                                        var coquanhutech = 0;
                                        for (let g = (j + 1); g < sltg; g++) {
                                            if (table.rows[g].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)") {
                                                coquanhutech += 1;
                                            }
                                        }
                                        if (coquanhutech < 1) {
                                            for (let k = 0; k < sltg; k++) {
                                                var donggoptgc = document.querySelector('#donggop-' + k).value;
                                                table.rows[k].cells[4].innerHTML = `${total / 2 * donggoptgc / 100}`;
                                                table.rows[k].cells[5].innerHTML = `${total / 2 * donggoptgc / 100 * 0.9}`;
                                                if (table.rows[k].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)" || table.rows[k].cells[2].textContent == "(1) UEF – (2) ngoài UEF (80%)") {
                                                    table.rows[k].cells[6].innerHTML = `${diem / 2}`;
                                                } else {
                                                    table.rows[k].cells[6].innerHTML = `0`;
                                                }
                                                table.rows[k].cells[7].innerHTML = `0`;
                                            }
                                            break;
                                        }
                                    } else {
                                        for (let j = 1; j < (sltg - sltglh); j++) {
                                            if (table.rows[j].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)") {
                                                for (let k = 0; k < sltg; k++) {
                                                    var donggoptgc = document.querySelector('#donggop-' + k).value;
                                                    table.rows[k].cells[4].innerHTML = `${total / 2 * donggoptgc / 100}`;
                                                    table.rows[k].cells[5].innerHTML = `${total / 2 * donggoptgc / 100 * 0.9}`;
                                                    if (table.rows[k].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)" || table.rows[k].cells[2].textContent == "(1) UEF – (2) ngoài UEF (80%)") {
                                                        table.rows[k].cells[6].innerHTML = `${diem / 2}`;
                                                    } else {
                                                        table.rows[k].cells[6].innerHTML = `0`;
                                                    }
                                                    table.rows[k].cells[7].innerHTML = `0`;
                                                }
                                                break;
                                            }
                                            if (table.rows[j].cells[2].textContent == "(1) UEF – (2) ngoài UEF (80%)") {
                                                var coquanhutech = 0;
                                                for (let g = (j); g < sltg; g++) {
                                                    if (table.rows[g].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)") {
                                                        coquanhutech += 1;
                                                    }
                                                }
                                                if (coquanhutech < 1) {
                                                    for (let k = 0; k < sltg; k++) {
                                                        var donggoptgc = document.querySelector('#donggop-' + k).value;
                                                        table.rows[k].cells[4].innerHTML = `${total / 2 * donggoptgc / 100}`;
                                                        table.rows[k].cells[5].innerHTML = `${total / 2 * donggoptgc / 100 * 0.9}`;
                                                        if (table.rows[k].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)" || table.rows[k].cells[2].textContent == "(1) UEF – (2) ngoài UEF (80%)") {
                                                            table.rows[k].cells[6].innerHTML = `${diem / 2}`;
                                                        } else {
                                                            table.rows[k].cells[6].innerHTML = `0`;
                                                        }
                                                        table.rows[k].cells[7].innerHTML = `0`;
                                                    }
                                                    break;
                                                }
                                            } else {
                                                for (let j = 2; j < (sltg - sltglh); j++) {
                                                    if (table.rows[j].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)") {
                                                        for (let k = 0; k < sltg; k++) {
                                                            var donggoptgc = document.querySelector('#donggop-' + k).value;
                                                            table.rows[k].cells[4].innerHTML = `${total / 2 * donggoptgc / 100}`;
                                                            table.rows[k].cells[5].innerHTML = `${total / 2 * donggoptgc / 100 * 0.9}`;
                                                            if (table.rows[k].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)" || table.rows[k].cells[2].textContent == "(1) UEF – (2) ngoài UEF (80%)") {
                                                                table.rows[k].cells[6].innerHTML = `${diem / 2}`;
                                                            } else {
                                                                table.rows[k].cells[6].innerHTML = `0`;
                                                            }
                                                            table.rows[k].cells[7].innerHTML = `0`;
                                                        }
                                                        break;
                                                    }
                                                    if (table.rows[j].cells[2].textContent == "(1) UEF – (2) ngoài UEF (80%)") {
                                                        var coquanhutech = 0;
                                                        for (let g = (j); g < sltg; g++) {
                                                            if (table.rows[g].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)") {
                                                                coquanhutech += 1;
                                                            }
                                                        }
                                                        if (coquanhutech < 1) {
                                                            for (let k = 0; k < sltg; k++) {
                                                                var donggoptgc = document.querySelector('#donggop-' + k).value;
                                                                table.rows[k].cells[4].innerHTML = `${total / 2 * donggoptgc / 100}`;
                                                                table.rows[k].cells[5].innerHTML = `${total / 2 * donggoptgc / 100 * 0.9}`;
                                                                if (table.rows[k].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)" || table.rows[k].cells[2].textContent == "(1) UEF – (2) ngoài UEF (80%)") {
                                                                    table.rows[k].cells[6].innerHTML = `${diem / 2}`;
                                                                } else {
                                                                    table.rows[k].cells[6].innerHTML = `0`;
                                                                }
                                                                table.rows[k].cells[7].innerHTML = `0`;
                                                            }
                                                            break;
                                                        }
                                                    } else {
                                                        for (let k = 0; k < sltg; k++) {

                                                            table.rows[k].cells[4].innerHTML = `0`;
                                                            table.rows[k].cells[5].innerHTML = `0`;
                                                            if (table.rows[k].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)" || table.rows[k].cells[2].textContent == "(1) UEF – (2) ngoài UEF (80%)") {
                                                                table.rows[k].cells[6].innerHTML = `0`;
                                                            } else {
                                                                table.rows[k].cells[6].innerHTML = `0`;
                                                            }
                                                            table.rows[k].cells[7].innerHTML = `0`;
                                                        }
                                                    }
                                                }
                                                break;
                                            }

                                        }
                                    }
                                }
                            }
                        }
                    }

                    ////////////
                    if (table.rows[0].cells[2].textContent != "(1) UEF – (2) ngoài UEF (80%)" && table.rows[0].cells[2].textContent != "Cơ quan công tác duy nhất UEF (100%)") {
                        if (table.rows[sltg - 1].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)") {
                            for (let j = 0; j < sltg; j++) {
                                if (table.rows[j].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)") {
                                    for (let k = 0; k < sltg; k++) {
                                        var donggoptgc = document.querySelector('#donggop-' + k).value;
                                        table.rows[k].cells[4].innerHTML = `${total / sltglh * donggoptgc / 100}`;
                                        table.rows[k].cells[5].innerHTML = `${total / sltglh * donggoptgc / 100 * 0.9}`;
                                        if (table.rows[k].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)" || table.rows[k].cells[2].textContent == "(1) UEF – (2) ngoài UEF (80%)") {
                                            table.rows[k].cells[6].innerHTML = `${diem / 2}`;
                                        } else {
                                            table.rows[k].cells[6].innerHTML = `0`;
                                        }
                                        table.rows[k].cells[7].innerHTML = `0`;
                                    }
                                    break;
                                }
                                if (table.rows[j].cells[2].textContent == "(1) UEF – (2) ngoài UEF (80%)") {
                                    var coquanhutech = 0;
                                    for (let g = (j + 1); g < sltg; g++) {
                                        if (table.rows[g].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)") {
                                            coquanhutech += 1;
                                        }
                                    }
                                    if (coquanhutech < 1) {
                                        for (let k = 0; k < sltg; k++) {
                                            var donggoptgc = document.querySelector('#donggop-' + k).value;
                                            table.rows[k].cells[4].innerHTML = `${total / 2 / sltglh * donggoptgc / 100}`;
                                            table.rows[k].cells[5].innerHTML = `${total / 2 / sltglh * donggoptgc / 100 * 0.9}`;
                                            if (table.rows[k].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)" || table.rows[k].cells[2].textContent == "(1) UEF – (2) ngoài UEF (80%)") {
                                                table.rows[k].cells[6].innerHTML = `${diem / 2}`;
                                            } else {
                                                table.rows[k].cells[6].innerHTML = `0`;
                                            }
                                            table.rows[k].cells[7].innerHTML = `0`;
                                        }
                                        break;
                                    }
                                } else {
                                    for (let j = 1; j < (sltg - sltglh); j++) {
                                        if (table.rows[j].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)") {
                                            for (let k = 0; k < sltg; k++) {
                                                var donggoptgc = document.querySelector('#donggop-' + k).value;
                                                table.rows[k].cells[4].innerHTML = `${total / 4 * donggoptgc / 100}`;
                                                table.rows[k].cells[5].innerHTML = `${total / 4 * donggoptgc / 100 * 0.9}`;
                                                if (table.rows[k].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)" || table.rows[k].cells[2].textContent == "(1) UEF – (2) ngoài UEF (80%)") {
                                                    table.rows[k].cells[6].innerHTML = `${diem / 2}`;
                                                } else {
                                                    table.rows[k].cells[6].innerHTML = `0`;
                                                }
                                                table.rows[k].cells[7].innerHTML = `0`;
                                            }
                                            break;
                                        }
                                        if (table.rows[j].cells[2].textContent == "(1) UEF – (2) ngoài UEF (80%)") {
                                            var coquanhutech = 0;
                                            for (let g = (j); g < sltg; g++) {
                                                if (table.rows[g].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)") {
                                                    coquanhutech += 1;
                                                }
                                            }
                                            if (coquanhutech < 1) {
                                                for (let k = 0; k < sltg; k++) {
                                                    var donggoptgc = document.querySelector('#donggop-' + k).value;
                                                    table.rows[k].cells[4].innerHTML = `${total / 4 / 2 * donggoptgc / 100}`;
                                                    table.rows[k].cells[5].innerHTML = `${total / 4 / 2 * donggoptgc / 100 * 0.9}`;
                                                    if (table.rows[k].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)" || table.rows[k].cells[2].textContent == "(1) UEF – (2) ngoài UEF (80%)") {
                                                        table.rows[k].cells[6].innerHTML = `${diem / 2}`;
                                                    } else {
                                                        table.rows[k].cells[6].innerHTML = `0`;
                                                    }
                                                    table.rows[k].cells[7].innerHTML = `0`;
                                                }
                                                break;
                                            }
                                        } else {
                                            for (let j = 2; j < (sltg - sltglh); j++) {
                                                if (table.rows[j].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)") {
                                                    for (let k = 0; k < sltg; k++) {
                                                        var donggoptgc = document.querySelector('#donggop-' + k).value;
                                                        table.rows[k].cells[4].innerHTML = `${total / 4 * donggoptgc / 100}`;
                                                        table.rows[k].cells[5].innerHTML = `${total / 4 * donggoptgc / 100 * 0.9}`;
                                                        if (table.rows[k].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)" || table.rows[k].cells[2].textContent == "(1) UEF – (2) ngoài UEF (80%)") {
                                                            table.rows[k].cells[6].innerHTML = `${diem / 2}`;
                                                        } else {
                                                            table.rows[k].cells[6].innerHTML = `0`;
                                                        }
                                                        table.rows[k].cells[7].innerHTML = `0`;
                                                    }
                                                    break;
                                                }
                                                if (table.rows[j].cells[2].textContent == "(1) UEF – (2) ngoài UEF (80%)") {
                                                    var coquanhutech = 0;
                                                    for (let g = (j); g < sltg; g++) {
                                                        if (table.rows[g].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)") {
                                                            coquanhutech += 1;
                                                        }
                                                    }
                                                    if (coquanhutech < 1) {
                                                        for (let k = 0; k < sltg; k++) {
                                                            var donggoptgc = document.querySelector('#donggop-' + k).value;
                                                            table.rows[k].cells[4].innerHTML = `${total / 4 / 2 * donggoptgc / 100}`;
                                                            table.rows[k].cells[5].innerHTML = `${total / 4 / 2 * donggoptgc / 100 * 0.9}`;
                                                            if (table.rows[k].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)" || table.rows[k].cells[2].textContent == "(1) UEF – (2) ngoài UEF (80%)") {
                                                                table.rows[k].cells[6].innerHTML = `${diem / 2}`;
                                                            } else {
                                                                table.rows[k].cells[6].innerHTML = `0`;
                                                            }
                                                            table.rows[k].cells[7].innerHTML = `0`;
                                                        }
                                                        break;
                                                    }
                                                } else {
                                                    for (let k = 0; k < sltg; k++) {

                                                        table.rows[k].cells[4].innerHTML = `0`;
                                                        table.rows[k].cells[5].innerHTML = `0`;
                                                        if (table.rows[k].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)" || table.rows[k].cells[2].textContent == "(1) UEF – (2) ngoài UEF (80%)") {
                                                            table.rows[k].cells[6].innerHTML = `0`;
                                                        } else {
                                                            table.rows[k].cells[6].innerHTML = `0`;
                                                        }
                                                        table.rows[k].cells[7].innerHTML = `0`;
                                                    }
                                                }
                                            }
                                            break;
                                        }

                                    }
                                }
                            }
                        }
                        if (table.rows[sltg - 1].cells[2].textContent == "(1) UEF – (2) ngoài UEF (80%)") {
                            if (table.rows[0].cells[sltg - 1].textContent != "Cơ quan công tác duy nhất UEF (100%)") {
                                for (let j = 0; j < sltg; j++) {
                                    if (table.rows[j].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)") {
                                        for (let k = 0; k < sltg; k++) {
                                            var donggoptgc = document.querySelector('#donggop-' + k).value;
                                            table.rows[k].cells[4].innerHTML = `${total / 2 * donggoptgc / 100}`;
                                            table.rows[k].cells[5].innerHTML = `${total / 2 * donggoptgc / 100 * 0.9}`;
                                            if (table.rows[k].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)" || table.rows[k].cells[2].textContent == "(1) UEF – (2) ngoài UEF (80%)") {
                                                table.rows[k].cells[6].innerHTML = `${diem / 2}`;
                                            } else {
                                                table.rows[k].cells[6].innerHTML = `0`;
                                            }
                                            table.rows[k].cells[7].innerHTML = `0`;
                                        }
                                        break;
                                    }
                                    if (table.rows[j].cells[2].textContent == "(1) UEF – (2) ngoài UEF (80%)") {
                                        var coquanhutech = 0;
                                        for (let g = (j + 1); g < sltg; g++) {
                                            if (table.rows[g].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)") {
                                                coquanhutech += 1;
                                            }
                                        }
                                        if (coquanhutech < 1) {
                                            for (let k = 0; k < sltg; k++) {
                                                var donggoptgc = document.querySelector('#donggop-' + k).value;
                                                table.rows[k].cells[4].innerHTML = `${total / 2 * donggoptgc / 100}`;
                                                table.rows[k].cells[5].innerHTML = `${total / 2 * donggoptgc / 100 * 0.9}`;
                                                if (table.rows[k].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)" || table.rows[k].cells[2].textContent == "(1) UEF – (2) ngoài UEF (80%)") {
                                                    table.rows[k].cells[6].innerHTML = `${diem / 2}`;
                                                } else {
                                                    table.rows[k].cells[6].innerHTML = `0`;
                                                }
                                                table.rows[k].cells[7].innerHTML = `0`;
                                            }
                                            break;
                                        }
                                    } else {
                                        for (let j = 1; j < (sltg - sltglh); j++) {
                                            if (table.rows[j].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)") {
                                                for (let k = 0; k < sltg; k++) {
                                                    var donggoptgc = document.querySelector('#donggop-' + k).value;
                                                    table.rows[k].cells[4].innerHTML = `${total / 2 * donggoptgc / 100}`;
                                                    table.rows[k].cells[5].innerHTML = `${total / 2 * donggoptgc / 100 * 0.9}`;
                                                    if (table.rows[k].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)" || table.rows[k].cells[2].textContent == "(1) UEF – (2) ngoài UEF (80%)") {
                                                        table.rows[k].cells[6].innerHTML = `${diem / 2}`;
                                                    } else {
                                                        table.rows[k].cells[6].innerHTML = `0`;
                                                    }
                                                    table.rows[k].cells[7].innerHTML = `0`;
                                                }
                                                break;
                                            }
                                            if (table.rows[j].cells[2].textContent == "(1) UEF – (2) ngoài UEF (80%)") {
                                                var coquanhutech = 0;
                                                for (let g = (j); g < sltg; g++) {
                                                    if (table.rows[g].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)") {
                                                        coquanhutech += 1;
                                                    }
                                                }
                                                if (coquanhutech < 1) {
                                                    for (let k = 0; k < sltg; k++) {
                                                        var donggoptgc = document.querySelector('#donggop-' + k).value;
                                                        table.rows[k].cells[4].innerHTML = `${total / 2 * donggoptgc / 100}`;
                                                        table.rows[k].cells[5].innerHTML = `${total / 2 * donggoptgc / 100 * 0.9}`;
                                                        if (table.rows[k].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)" || table.rows[k].cells[2].textContent == "(1) UEF – (2) ngoài UEF (80%)") {
                                                            table.rows[k].cells[6].innerHTML = `${diem / 2}`;
                                                        } else {
                                                            table.rows[k].cells[6].innerHTML = `0`;
                                                        }
                                                        table.rows[k].cells[7].innerHTML = `0`;
                                                    }
                                                    break;
                                                }
                                            } else {
                                                for (let j = 2; j < (sltg - sltglh); j++) {
                                                    if (table.rows[j].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)") {
                                                        for (let k = 0; k < sltg; k++) {
                                                            var donggoptgc = document.querySelector('#donggop-' + k).value;
                                                            table.rows[k].cells[4].innerHTML = `${total / 2 * donggoptgc / 100}`;
                                                            table.rows[k].cells[5].innerHTML = `${total / 2 * donggoptgc / 100 * 0.9}`;
                                                            if (table.rows[k].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)" || table.rows[k].cells[2].textContent == "(1) UEF – (2) ngoài UEF (80%)") {
                                                                table.rows[k].cells[6].innerHTML = `${diem / 2}`;
                                                            } else {
                                                                table.rows[k].cells[6].innerHTML = `0`;
                                                            }
                                                            table.rows[k].cells[7].innerHTML = `0`;
                                                        }
                                                        break;
                                                    }
                                                    if (table.rows[j].cells[2].textContent == "(1) UEF – (2) ngoài UEF (80%)") {
                                                        var coquanhutech = 0;
                                                        for (let g = (j); g < sltg; g++) {
                                                            if (table.rows[g].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)") {
                                                                coquanhutech += 1;
                                                            }
                                                        }
                                                        if (coquanhutech < 1) {
                                                            for (let k = 0; k < sltg; k++) {
                                                                var donggoptgc = document.querySelector('#donggop-' + k).value;
                                                                table.rows[k].cells[4].innerHTML = `${total / 2 * donggoptgc / 100}`;
                                                                table.rows[k].cells[5].innerHTML = `${total / 2 * donggoptgc / 100 * 0.9}`;
                                                                if (table.rows[k].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)" || table.rows[k].cells[2].textContent == "(1) UEF – (2) ngoài UEF (80%)") {
                                                                    table.rows[k].cells[6].innerHTML = `${diem / 2}`;
                                                                } else {
                                                                    table.rows[k].cells[6].innerHTML = `0`;
                                                                }
                                                                table.rows[k].cells[7].innerHTML = `0`;
                                                            }
                                                            break;
                                                        }
                                                    } else {
                                                        for (let k = 0; k < sltg; k++) {

                                                            table.rows[k].cells[4].innerHTML = `0`;
                                                            table.rows[k].cells[5].innerHTML = `0`;
                                                            if (table.rows[k].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)" || table.rows[k].cells[2].textContent == "(1) UEF – (2) ngoài UEF (80%)") {
                                                                table.rows[k].cells[6].innerHTML = `0`;
                                                            } else {
                                                                table.rows[k].cells[6].innerHTML = `0`;
                                                            }
                                                            table.rows[k].cells[7].innerHTML = `0`;
                                                        }
                                                    }
                                                }
                                                break;
                                            }

                                        }
                                    }
                                }
                            }
                        }
                        if (table.rows[sltg - 1].cells[2].textContent != "(1) UEF – (2) ngoài UEF (80%)" && table.rows[sltg - 1].cells[2].textContent != "Cơ quan công tác duy nhất UEF (100%)") {
                            var hutech = 0;
                            var qt = 0;
                            var ngoai = 0;
                            for (let k = 1; k < sltg; k++) {
                                if (table.rows[k].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)") {
                                    hutech += 1;
                                }
                                if (table.rows[k].cells[2].textContent == "(1) UEF – (2) ngoài UEF (80%)") {
                                    qt += 1;

                                } else {
                                    ngoai += 1;
                                }

                            }
                            if (hutech > 0) {
                                for (let n = 0; n < sltg; n++) {
                                    var donggop = document.querySelector('#donggop-' + n).value;
                                    table.rows[n].cells[4].innerHTML = `${total / 4 * donggop / 100}`;
                                    table.rows[n].cells[5].innerHTML = `${total / 4 * donggop / 100 * 0.9}`;
                                    table.rows[n].cells[6].innerHTML = `${diem / 2}`;
                                    table.rows[n].cells[7].innerHTML = `0`;
                                }
                            } else if (hutech == 0 && qt > 0) {
                                for (let n = 0; n < sltg; n++) {
                                    var donggop = document.querySelector('#donggop-' + n).value;
                                    table.rows[n].cells[4].innerHTML = `${total / 8 * donggop / 100}`;
                                    table.rows[n].cells[5].innerHTML = `${total / 8 * donggop / 100 * 0.9}`;
                                    table.rows[n].cells[6].innerHTML = `${diem / 2}`;
                                    table.rows[n].cells[7].innerHTML = `0`;
                                }
                            } else if (hutech == 0 && qt == 0 && ngoai > 0) {
                                for (let n = 0; n < sltg; n++) {
                                    var donggop = document.querySelector('#donggop-' + n).value;
                                    table.rows[n].cells[4].innerHTML = `0`;
                                    table.rows[n].cells[5].innerHTML = `0`;
                                    table.rows[n].cells[6].innerHTML = `0`;
                                    table.rows[n].cells[7].innerHTML = `0`;
                                }
                            }
                        }

                    }
                    ////////////
                    else if (sltgc > 2 && sltgp > 0 && sltglh > 0) {
                        var tsltlh = 0;
                        var tglh = 0;
                        for (let i = 1; i < sltg; i++) {
                            var coquan = table.rows[i].cells[2].textContent;
                            var coquantgc = table.rows[0].cells[2].textContent;
                            if (coquantgc == "(1) UEF – (2) ngoài UEF (80%)" && table.rows[0].cells[3].textContent == "Tác giả chính") {
                                document.querySelector('#donggop-0').disabled = false;
                                if (table.rows[i].cells[3].textContent == "Tác giả liên hệ" && table.rows[i].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)") {
                                    var donggop = document.querySelector('#donggop-' + i).value;
                                    if (table.rows[i].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)") {
                                        tsltlh += 1;
                                    }
                                    if (tsltlh > 1 || tsltlh == 1) {
                                        for (let j = 0; j < sltg; j++) {
                                            var donggop = document.querySelector('#donggop-' + j).value;
                                            table.rows[j].cells[4].innerHTML = `${total * donggop / 100}`;
                                            table.rows[j].cells[5].innerHTML = `${total * donggop / 100 * 0.9}`;
                                            table.rows[j].cells[6].innerHTML = `${diem / 2}`;
                                            table.rows[j].cells[7].innerHTML = `0`;
                                        }
                                    }
                                    var donggoptgc = document.querySelector('#donggop-0').value;
                                    table.rows[0].cells[4].innerHTML = `${total * donggoptgc / 100}`;
                                    table.rows[0].cells[5].innerHTML = `${total * donggoptgc / 100 * 0.9}`;
                                    table.rows[0].cells[6].innerHTML = `${diem / 2}`;
                                    table.rows[0].cells[7].innerHTML = `0`;
                                    break;
                                }
                                else if (table.rows[i].cells[3].textContent == "Tác giả liên hệ" && table.rows[i].cells[2].textContent == "(1) UEF – (2) ngoài UEF (80%)" || table.rows[i].cells[2].textContent == "(1) ngoài UEF, (2) UEF (20%)" || table.rows[i].cells[2].textContent == "Cơ quan công tác ngoài UEF (0%)") {
                                    var donggop = document.querySelector('#donggop-' + i).value;
                                    table.rows[i].cells[4].innerHTML = `${total / 2 * donggop / 100}`;
                                    table.rows[i].cells[5].innerHTML = `${total / 2 * donggop / 100 * 0.9}`;
                                    table.rows[i].cells[6].innerHTML = `${diem / 2}`;
                                    table.rows[i].cells[7].innerHTML = `0`;
                                    for (let j = 1; j < (sltgp + 1); j++) {
                                        var donggop = document.querySelector('#donggop-' + j).value;

                                        if (table.rows[j].cells[2].textContent == "(1) ngoài UEF, (2) UEF (20%)" || table.rows[j].cells[2].textContent == "Cơ quan công tác ngoài UEF (0%)") {
                                            table.rows[j].cells[4].innerHTML = `${total / 2 * donggop / 100}`;
                                            table.rows[j].cells[5].innerHTML = `${total / 2 * donggop / 100 * 0.9}`;
                                            table.rows[j].cells[6].innerHTML = `0`;
                                            table.rows[j].cells[7].innerHTML = `0`;
                                        } else {
                                            table.rows[j].cells[4].innerHTML = `${total / 2 * donggop / 100}`;
                                            table.rows[j].cells[5].innerHTML = `${total / 2 * donggop / 100 * 0.9}`;
                                            table.rows[j].cells[6].innerHTML = `${diem / 2}`;
                                            table.rows[j].cells[7].innerHTML = `0`;
                                        }
                                    }
                                    for (let k = (sltgc + sltgp + 1); k < (sltg + 1); k++) {
                                        var donggop = document.querySelector('#donggop-' + (k - 1)).value;
                                        if (table.rows[k - 1].cells[2].textContent == "(1) ngoài UEF, (2) UEF (20%)" || table.rows[k - 1].cells[2].textContent == "Cơ quan công tác ngoài UEF (0%)") {
                                            table.rows[k - 1].cells[4].innerHTML = `${total / 2 * donggop / 100}`;
                                            table.rows[k - 1].cells[5].innerHTML = `${total / 2 * donggop / 100 * 0.9}`;
                                            table.rows[k - 1].cells[6].innerHTML = `0`;
                                            table.rows[k - 1].cells[7].innerHTML = `0`;
                                        } else {
                                            table.rows[k - 1].cells[4].innerHTML = `${total / 2 * donggop / 100}`;
                                            table.rows[k - 1].cells[5].innerHTML = `${total / 2 * donggop / 100 * 0.9}`;
                                            table.rows[k - 1].cells[6].innerHTML = `${diem / 2}`;
                                            table.rows[k - 1].cells[7].innerHTML = `0`;
                                        }
                                    }
                                    var donggoptgc = document.querySelector('#donggop-0').value;
                                    table.rows[0].cells[4].innerHTML = `${total / 2 * donggoptgc / 100}`;
                                    table.rows[0].cells[5].innerHTML = `${total / 2 * donggoptgc / 100 * 0.9}`;
                                    table.rows[0].cells[6].innerHTML = `${diem / 2}`;
                                    table.rows[0].cells[7].innerHTML = `0`;
                                }
                            }
                            ////////
                            else if (coquantgc == "Cơ quan công tác ngoài UEF (0%)" || coquantgc == "(1) ngoài UEF, (2) UEF (20%)" && table.rows[0].cells[3].textContent == "Tác giả chính") {
                                document.querySelector('#donggop-0').disabled = false;
                                if (table.rows[i].cells[3].textContent == "Tác giả liên hệ" && table.rows[i].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)") {
                                    var donggop = document.querySelector('#donggop-' + i).value;
                                    table.rows[i].cells[4].innerHTML = `${total * donggop / 100}`;
                                    table.rows[i].cells[5].innerHTML = `${total * donggop / 100 * 0.9}`;
                                    table.rows[i].cells[6].innerHTML = `${diem / 2}`;
                                    table.rows[i].cells[7].innerHTML = `0`;
                                    for (let j = 1; j < (sltgp + 1); j++) {
                                        var donggop = document.querySelector('#donggop-' + j).value;

                                        if (table.rows[j].cells[2].textContent == "(1) ngoài UEF, (2) UEF (20%)" || table.rows[j].cells[2].textContent == "Cơ quan công tác ngoài UEF (0%)") {
                                            table.rows[j].cells[4].innerHTML = `${total * donggop / 100}`;
                                            table.rows[j].cells[5].innerHTML = `${total * donggop / 100 * 0.9}`;
                                            table.rows[j].cells[6].innerHTML = `0`;
                                            table.rows[j].cells[7].innerHTML = `0`;
                                        } else {
                                            table.rows[j].cells[4].innerHTML = `${total * donggop / 1000}`;
                                            table.rows[j].cells[5].innerHTML = `${total * donggop / 100 * 0.9}`;
                                            table.rows[j].cells[6].innerHTML = `${diem / 2}`;
                                            table.rows[j].cells[7].innerHTML = `0`;
                                        }
                                    }
                                    for (let k = (sltgc + sltgp + 1); k < (sltg + 1); k++) {
                                        var donggop = document.querySelector('#donggop-' + (k - 1)).value;
                                        if (table.rows[k - 1].cells[2].textContent == "(1) ngoài UEF, (2) UEF (20%)" || table.rows[k - 1].cells[2].textContent == "Cơ quan công tác ngoài UEF (0%)") {
                                            table.rows[k - 1].cells[4].innerHTML = `${total * donggop / 100}`;
                                            table.rows[k - 1].cells[5].innerHTML = `${total * donggop / 100 * 0.9}`;
                                            table.rows[k - 1].cells[6].innerHTML = `0`;
                                            table.rows[k - 1].cells[7].innerHTML = `0`;
                                        } else {
                                            table.rows[k - 1].cells[4].innerHTML = `${total * donggop / 100}`;
                                            table.rows[k - 1].cells[5].innerHTML = `${total * donggop / 100 * 0.9}`;
                                            table.rows[k - 1].cells[6].innerHTML = `${diem / 2}`;
                                            table.rows[k - 1].cells[7].innerHTML = `0`;
                                        }
                                    }
                                    var donggoptgc = document.querySelector('#donggop-0').value;

                                    break;
                                }

                                else if (table.rows[i].cells[3].textContent == "Tác giả liên hệ" && table.rows[i].cells[2].textContent == "(1) UEF – (2) ngoài UEF (80%)") {
                                    var donggop = document.querySelector('#donggop-' + i).value;
                                    table.rows[i].cells[4].innerHTML = `${total / 2 * donggop / 100}`;
                                    table.rows[i].cells[5].innerHTML = `${total / 2 * donggop / 100 * 0.9}`;
                                    table.rows[i].cells[6].innerHTML = `${diem / 2}`;
                                    table.rows[i].cells[7].innerHTML = `0`;
                                    for (let j = 1; j < (sltgp + 1); j++) {
                                        var donggop = document.querySelector('#donggop-' + j).value;

                                        if (table.rows[j].cells[2].textContent == "(1) ngoài UEF, (2) UEF (20%)" || table.rows[j].cells[2].textContent == "Cơ quan công tác ngoài UEF (0%)") {
                                            table.rows[j].cells[4].innerHTML = `${total / 2 * donggop / 100}`;
                                            table.rows[j].cells[5].innerHTML = `${total / 2 * donggop / 100 * 0.9}`;
                                            table.rows[j].cells[6].innerHTML = `0`;
                                            table.rows[j].cells[7].innerHTML = `0`;
                                        } else {
                                            table.rows[j].cells[4].innerHTML = `${total / 2 * donggop / 100}`;
                                            table.rows[j].cells[5].innerHTML = `${total / 2 * donggop / 100 * 0.9}`;
                                            table.rows[j].cells[6].innerHTML = `${diem / 2}`;
                                            table.rows[j].cells[7].innerHTML = `0`;
                                        }
                                    }
                                    for (let k = (sltgc + sltgp + 1); k < (sltg + 1); k++) {
                                        var donggop = document.querySelector('#donggop-' + (k - 1)).value;
                                        if (table.rows[k - 1].cells[2].textContent == "(1) ngoài UEF, (2) UEF (20%)" || table.rows[k - 1].cells[2].textContent == "Cơ quan công tác ngoài UEF (0%)") {
                                            table.rows[k - 1].cells[4].innerHTML = `${total / 2 * donggop / 100}`;
                                            table.rows[k - 1].cells[5].innerHTML = `${total / 2 * donggop / 100 * 0.9}`;
                                            table.rows[k - 1].cells[6].innerHTML = `0`;
                                            table.rows[k - 1].cells[7].innerHTML = `0`;
                                        } else {
                                            table.rows[k - 1].cells[4].innerHTML = `${total / 2 * donggop / 100}`;
                                            table.rows[k - 1].cells[5].innerHTML = `${total / 2 * donggop / 100 * 0.9}`;
                                            table.rows[k - 1].cells[6].innerHTML = `${diem / 2}`;
                                            table.rows[k - 1].cells[7].innerHTML = `0`;
                                        }
                                    }
                                    var donggoptgc = document.querySelector('#donggop-0').value;
                                    table.rows[0].cells[4].innerHTML = `${total / 2 * donggoptgc / 100}`;
                                    table.rows[0].cells[5].innerHTML = `${total / 2 * donggoptgc / 100 * 0.9}`;
                                    table.rows[0].cells[6].innerHTML = `${diem / 2}`;
                                    table.rows[0].cells[7].innerHTML = `0`;
                                } if (table.rows[i].cells[3].textContent == "Tác giả liên hệ" && table.rows[i].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)" || table.rows[i].cells[2].textContent == "(1) UEF – (2) ngoài UEF (80%)") {
                                    var donggop = document.querySelector('#donggop-' + i).value;
                                    if (table.rows[i].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)") {
                                        tglh += 1;
                                    }
                                    if (tglh < 1) {
                                        if (table.rows[i].cells[2].textContent == "Tác giả phụ" && table.rows[i].cells[3].textContent == "Tác giả phụ") {

                                        }
                                        for (let j = 0; j < sltg; j++) {
                                            var donggop = document.querySelector('#donggop-' + j).value;
                                            table.rows[j].cells[4].innerHTML = `${total * donggop / 100}`;
                                            table.rows[j].cells[5].innerHTML = `${total * donggop / 100 * 0.9}`;
                                            table.rows[j].cells[6].innerHTML = `${diem / 2}`;
                                            table.rows[j].cells[7].innerHTML = `0`;
                                        }
                                    }

                                    break;
                                }

                            }
                            ///////
                            else if (coquantgc == "Cơ quan công tác duy nhất UEF (100%)" && table.rows[0].cells[3].textContent == "Tác giả chính") {
                                document.querySelector('#donggop-0').disabled = false;
                                var donggop = document.querySelector('#donggop-' + i).value;
                                var donggoptgc = document.querySelector('#donggop-0').value;
                                table.rows[0].cells[4].innerHTML = `${total * donggoptgc / 100}`;
                                table.rows[0].cells[5].innerHTML = `${total * donggoptgc / 100 * 0.9}`;
                                table.rows[0].cells[6].innerHTML = `${diem / 2}`;
                                table.rows[0].cells[7].innerHTML = `0`;
                                if (table.rows[i].cells[2].textContent == "(1) ngoài UEF, (2) UEF (20%)" || table.rows[i].cells[2].textContent == "Cơ quan công tác ngoài UEF (0%)") {
                                    table.rows[i].cells[4].innerHTML = `${(total) * (donggop / 100)}`;
                                    table.rows[i].cells[5].innerHTML = `${(total) * (donggop / 100) * 0.9}`;
                                    table.rows[i].cells[6].innerHTML = `0`;
                                    table.rows[i].cells[7].innerHTML = `0`;
                                } else {
                                    table.rows[i].cells[4].innerHTML = `${(total) * (donggop / 100)}`;
                                    table.rows[i].cells[5].innerHTML = `${(total) * (donggop / 100) * 0.9}`;
                                    table.rows[i].cells[6].innerHTML = `${diem / 2}`;
                                    table.rows[i].cells[7].innerHTML = `0`;
                                }
                            }

                        }
                    }
                    else if (sltg == 2 && valuerank != "Nghiên cứu mạnh") {
                        for (let i = 0; i < sltg; i++) {
                            var coquan = table.rows[i].cells[2].textContent;
                            var donggop = Number(document.querySelector('#donggop-' + i).value);
                            if (sltg == 2) {
                                if (coquan == "(1) ngoài UEF, (2) UEF (20%)" || coquan == "Cơ quan công tác ngoài UEF (0%)") {
                                    table.rows[i].cells[4].innerHTML = `0`;
                                    table.rows[i].cells[5].innerHTML = `0`;
                                    table.rows[i].cells[6].innerHTML = `0`;
                                    table.rows[i].cells[7].innerHTML = `0`;
                                } if (coquan == "(1) UEF – (2) ngoài UEF (80%)") {
                                    table.rows[i].cells[4].innerHTML = `${((total / 2) / sltg) * (donggop / 100)}`;
                                    table.rows[i].cells[5].innerHTML = `${(((total / 2) / sltg) * (donggop / 100)) * 0.9}`;
                                    table.rows[i].cells[6].innerHTML = `${diem / 2}`;
                                    table.rows[i].cells[7].innerHTML = `0`;
                                } else if (coquan == "Cơ quan công tác duy nhất UEF (100%)") {
                                    table.rows[i].cells[4].innerHTML = `${(total / 2) * (donggop / 100)}`;
                                    table.rows[i].cells[5].innerHTML = `${((total / 2)) * (donggop / 100) * 0.9}`;
                                    table.rows[i].cells[6].innerHTML = `${diem / 2}`;
                                    table.rows[i].cells[7].innerHTML = `0`;
                                }
                            }
                        }
                    }

                    else if (sltgc == 1 && sltg == 1) {
                        var coquan = table.rows[0].cells[2].textContent;
                        try {
                            var donggop = Number(document.querySelector('#donggop-0').value);

                        } catch { }

                        if (coquan == "(1) ngoài UEF, (2) UEF (20%)" || coquan == "Cơ quan công tác ngoài UEF (0%)") {
                            table.rows[0].cells[4].innerHTML = `0`;
                            table.rows[0].cells[5].innerHTML = `0`;
                            table.rows[0].cells[6].innerHTML = `0`;
                            table.rows[0].cells[7].innerHTML = `0`;

                        } else if (coquan == "(1) UEF – (2) ngoài UEF (80%)") {
                            table.rows[0].cells[4].innerHTML = `${total / 2}`;
                            table.rows[0].cells[5].innerHTML = `${(total / 2) * 0.9}`;
                            table.rows[0].cells[6].innerHTML = `${diem}`;
                            table.rows[0].cells[7].innerHTML = `${tietchuan}`;
                        } else {
                            table.rows[0].cells[4].innerHTML = `${total}`;
                            table.rows[0].cells[5].innerHTML = `${(total) * 0.9}`;
                            table.rows[0].cells[6].innerHTML = `${diem}`;
                            table.rows[0].cells[7].innerHTML = `${tietchuan}`;
                        }
                    }
                }

                ///////////////////
                if (valuerank == "Giảng viên" && valueloaihinh == "Nghiên cứu mạnh" && sltgc > 0 && sltglh > 1 && sltgp > 1 && sltg > 4) {
                    for (let i = 0; i < sltg; i++) {
                        trtable += `<tr>
                                                                            <td>${i + 1}</td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                        </tr>`;
                    }
                    table.innerHTML = trtable;
                    for (let i = 0; i < sltg; i++) {
                        var tacgia = document.querySelector('#inp-username-id-mail-' + i).value;
                        table.rows[i].cells[1].innerHTML = tacgia;
                    }
                    for (let i = 0; i < sltg; i++) {
                        var optionscongtac = document.querySelector('#coquancongtac-' + i);
                        var textcongtac = optionscongtac.options[optionscongtac.selectedIndex].textContent;
                        table.rows[i].cells[2].innerHTML = textcongtac;
                    } for (let i = 0; i < sltg; i++) {
                        var optionstg = document.querySelector('#tg-' + i);
                        var texttg = optionstg.options[optionstg.selectedIndex].textContent;
                        table.rows[i].cells[3].innerHTML = texttg;
                    }
                    if (table.rows[0].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)") {
                        for (let j = 0; j < sltg; j++) {
                            if (table.rows[j].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)") {
                                for (let k = 0; k < sltg; k++) {
                                    var donggoptgc = document.querySelector('#donggop-' + k).value;
                                    table.rows[k].cells[4].innerHTML = `${total * donggoptgc / 100}`;
                                    table.rows[k].cells[5].innerHTML = `${total * donggoptgc / 100 * 0.9}`;
                                    if (table.rows[k].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)" || table.rows[k].cells[2].textContent == "(1) UEF – (2) ngoài UEF (80%)") {
                                        table.rows[k].cells[6].innerHTML = `${diem / 2}`;
                                    } else {
                                        table.rows[k].cells[6].innerHTML = `0`;
                                    }
                                    table.rows[k].cells[7].innerHTML = `0`;
                                }
                                break;
                            }
                            if (table.rows[j].cells[2].textContent == "(1) UEF – (2) ngoài UEF (80%)") {
                                var coquanhutech = 0;
                                for (let g = (j + 1); g < sltg; g++) {
                                    if (table.rows[g].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)") {
                                        coquanhutech += 1;
                                    }
                                }
                                if (coquanhutech < 1) {
                                    for (let k = 0; k < sltg; k++) {
                                        var donggoptgc = document.querySelector('#donggop-' + k).value;
                                        table.rows[k].cells[4].innerHTML = `${total / 2 / sltglh * donggoptgc / 100}`;
                                        table.rows[k].cells[5].innerHTML = `${total / 2 / sltglh * donggoptgc / 100 * 0.9}`;
                                        if (table.rows[k].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)" || table.rows[k].cells[2].textContent == "(1) UEF – (2) ngoài UEF (80%)") {
                                            table.rows[k].cells[6].innerHTML = `${diem / 2}`;
                                        } else {
                                            table.rows[k].cells[6].innerHTML = `0`;
                                        }
                                        table.rows[k].cells[7].innerHTML = `0`;
                                    }
                                    break;
                                }
                            } else {
                                for (let j = 1; j < (sltg - sltglh); j++) {
                                    if (table.rows[j].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)") {
                                        for (let k = 0; k < sltg; k++) {
                                            var donggoptgc = document.querySelector('#donggop-' + k).value;
                                            table.rows[k].cells[4].innerHTML = `${total / 4 * donggoptgc / 100}`;
                                            table.rows[k].cells[5].innerHTML = `${total / 4 * donggoptgc / 100 * 0.9}`;
                                            if (table.rows[k].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)" || table.rows[k].cells[2].textContent == "(1) UEF – (2) ngoài UEF (80%)") {
                                                table.rows[k].cells[6].innerHTML = `${diem / 2}`;
                                            } else {
                                                table.rows[k].cells[6].innerHTML = `0`;
                                            }
                                            table.rows[k].cells[7].innerHTML = `0`;
                                        }
                                        break;
                                    }
                                    if (table.rows[j].cells[2].textContent == "(1) UEF – (2) ngoài UEF (80%)") {
                                        var coquanhutech = 0;
                                        for (let g = (j); g < sltg; g++) {
                                            if (table.rows[g].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)") {
                                                coquanhutech += 1;
                                            }
                                        }
                                        if (coquanhutech < 1) {
                                            for (let k = 0; k < sltg; k++) {
                                                var donggoptgc = document.querySelector('#donggop-' + k).value;
                                                table.rows[k].cells[4].innerHTML = `${total / 4 / 2 * donggoptgc / 100}`;
                                                table.rows[k].cells[5].innerHTML = `${total / 4 / 2 * donggoptgc / 100 * 0.9}`;
                                                if (table.rows[k].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)" || table.rows[k].cells[2].textContent == "(1) UEF – (2) ngoài UEF (80%)") {
                                                    table.rows[k].cells[6].innerHTML = `${diem / 2}`;
                                                } else {
                                                    table.rows[k].cells[6].innerHTML = `0`;
                                                }
                                                table.rows[k].cells[7].innerHTML = `0`;
                                            }
                                            break;
                                        }
                                    } else {
                                        for (let j = 2; j < (sltg - sltglh); j++) {
                                            if (table.rows[j].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)") {
                                                for (let k = 0; k < sltg; k++) {
                                                    var donggoptgc = document.querySelector('#donggop-' + k).value;
                                                    table.rows[k].cells[4].innerHTML = `${total / 4 * donggoptgc / 100}`;
                                                    table.rows[k].cells[5].innerHTML = `${total / 4 * donggoptgc / 100 * 0.9}`;
                                                    if (table.rows[k].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)" || table.rows[k].cells[2].textContent == "(1) UEF – (2) ngoài UEF (80%)") {
                                                        table.rows[k].cells[6].innerHTML = `${diem / 2}`;
                                                    } else {
                                                        table.rows[k].cells[6].innerHTML = `0`;
                                                    }
                                                    table.rows[k].cells[7].innerHTML = `0`;
                                                }
                                                break;
                                            }
                                            if (table.rows[j].cells[2].textContent == "(1) UEF – (2) ngoài UEF (80%)") {
                                                var coquanhutech = 0;
                                                for (let g = (j); g < sltg; g++) {
                                                    if (table.rows[g].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)") {
                                                        coquanhutech += 1;
                                                    }
                                                }
                                                if (coquanhutech < 1) {
                                                    for (let k = 0; k < sltg; k++) {
                                                        var donggoptgc = document.querySelector('#donggop-' + k).value;
                                                        table.rows[k].cells[4].innerHTML = `${total / 4 / 2 * donggoptgc / 100}`;
                                                        table.rows[k].cells[5].innerHTML = `${total / 4 / 2 * donggoptgc / 100 * 0.9}`;
                                                        if (table.rows[k].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)" || table.rows[k].cells[2].textContent == "(1) UEF – (2) ngoài UEF (80%)") {
                                                            table.rows[k].cells[6].innerHTML = `${diem / 2}`;
                                                        } else {
                                                            table.rows[k].cells[6].innerHTML = `0`;
                                                        }
                                                        table.rows[k].cells[7].innerHTML = `0`;
                                                    }
                                                    break;
                                                }
                                            } else {
                                                for (let k = 0; k < sltg; k++) {

                                                    table.rows[k].cells[4].innerHTML = `0`;
                                                    table.rows[k].cells[5].innerHTML = `0`;
                                                    if (table.rows[k].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)" || table.rows[k].cells[2].textContent == "(1) UEF – (2) ngoài UEF (80%)") {
                                                        table.rows[k].cells[6].innerHTML = `0`;
                                                    } else {
                                                        table.rows[k].cells[6].innerHTML = `0`;
                                                    }
                                                    table.rows[k].cells[7].innerHTML = `0`;
                                                }
                                            }
                                        }
                                        break;
                                    }

                                }
                            }
                        }
                    }
                    ////////////
                    if (table.rows[0].cells[2].textContent == "(1) UEF – (2) ngoài UEF (80%)") {

                        for (let j = 0; j < sltg; j++) {
                            for (let k = 0; k < sltg; k++) {
                                var donggoptgc = document.querySelector('#donggop-' + k).value;
                                table.rows[k].cells[4].innerHTML = `${total / 2 * donggoptgc / 100}`;
                                table.rows[k].cells[5].innerHTML = `${total / 2 * donggoptgc / 100 * 0.9}`;
                                if (table.rows[k].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)" || table.rows[k].cells[2].textContent == "(1) UEF – (2) ngoài UEF (80%)") {
                                    table.rows[k].cells[6].innerHTML = `${diem / 2}`;
                                } else {
                                    table.rows[k].cells[6].innerHTML = `0`;
                                }
                                table.rows[k].cells[7].innerHTML = `0`;
                            }
                        }
                    }

                    ////////////
                    if (table.rows[0].cells[2].textContent != "(1) UEF – (2) ngoài UEF (80%)" && table.rows[0].cells[2].textContent != "Cơ quan công tác duy nhất UEF (100%)") {
                        var tglh100 = 0;
                        var tglh50 = 0;
                        var tglh0 = 0;
                        for (let i = (sltg - sltglh); i < sltg; i++) {
                            if (table.rows[i].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)") {
                                tglh100 += 1;
                            } if (table.rows[i].cells[2].textContent == "(1) UEF – (2) ngoài UEF (80%)") {
                                tglh50 += 1;
                            } if (table.rows[i].cells[2].textContent != "Cơ quan công tác duy nhất UEF (100%)" && table.rows[i].cells[2].textContent != "(1) UEF – (2) ngoài UEF (80%)") {
                                tglh0 += 1;
                            }
                        }
                        if (tglh100 > 0) {
                            for (let j = 0; j < sltg; j++) {
                                var donggop = document.querySelector('#donggop-' + j).value;
                                table.rows[j].cells[4].innerHTML = `${total / sltglh * donggop / 100}`;
                                table.rows[j].cells[5].innerHTML = `${total / sltglh * donggop / 100 * 0.9}`;
                                if (table.rows[j].cells[2].textContent != "Cơ quan công tác duy nhất UEF (100%)" && table.rows[j].cells[2].textContent != "(1) UEF – (2) ngoài UEF (80%)") {
                                    table.rows[j].cells[6].innerHTML = `0`;

                                } else {
                                    table.rows[j].cells[6].innerHTML = `${diem / 2}`;

                                }
                                table.rows[j].cells[7].innerHTML = `0`;
                            }
                        } if (tglh50 > 0 && tglh100 == 0) {
                            for (let j = 0; j < sltg; j++) {
                                var donggop = document.querySelector('#donggop-' + j).value;
                                table.rows[j].cells[4].innerHTML = `${total / 2 / sltglh * donggop / 100}`;
                                table.rows[j].cells[5].innerHTML = `${total / 2 / sltglh * donggop / 100 * 0.9}`;
                                if (table.rows[j].cells[2].textContent != "Cơ quan công tác duy nhất UEF (100%)" && table.rows[j].cells[2].textContent != "(1) UEF – (2) ngoài UEF (80%)") {
                                    table.rows[j].cells[6].innerHTML = `0`;

                                } else {
                                    table.rows[j].cells[6].innerHTML = `${diem / 2}`;

                                }
                                table.rows[j].cells[7].innerHTML = `0`;
                            }
                        } if (tglh0 > 0 && tglh100 == 0 && tglh50 == 0) {
                            //alert("a");
                            var tgp100 = 0;
                            var tgp50 = 0;
                            var tgp0 = 0;
                            for (let i = 1; i < (sltg - sltglh); i++) {
                                if (table.rows[i].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)") {
                                    tgp100 += 1;
                                } if (table.rows[i].cells[2].textContent == "(1) UEF – (2) ngoài UEF (80%)") {
                                    tgp50 += 1;
                                } if (table.rows[i].cells[2].textContent != "Cơ quan công tác duy nhất UEF (100%)" && table.rows[i].cells[2].textContent != "(1) UEF – (2) ngoài UEF (80%)") {
                                    tgp0 += 1;
                                }
                            } if (tgp100 > 0) {
                                for (let j = 0; j < sltg; j++) {
                                    var donggop = document.querySelector('#donggop-' + j).value;
                                    table.rows[j].cells[4].innerHTML = `${total * 0.25 * donggop / 100}`;
                                    table.rows[j].cells[5].innerHTML = `${total * 0.25 * donggop / 100 * 0.9}`;
                                    if (table.rows[j].cells[2].textContent != "Cơ quan công tác duy nhất UEF (100%)" && table.rows[j].cells[2].textContent != "(1) UEF – (2) ngoài UEF (80%)") {
                                        table.rows[j].cells[6].innerHTML = `0`;

                                    } else {
                                        table.rows[j].cells[6].innerHTML = `${diem / 2}`;

                                    }
                                    table.rows[j].cells[7].innerHTML = `0`;
                                }
                            } if (tgp50 == 0 && tglh50 > 0) {
                                for (let j = 0; j < sltg; j++) {
                                    var donggop = document.querySelector('#donggop-' + j).value;
                                    table.rows[j].cells[4].innerHTML = `${total * 0.25 / 2 * donggop / 100}`;
                                    table.rows[j].cells[5].innerHTML = `${total * 0.25 / 2 * donggop / 100 * 0.9}`;
                                    if (table.rows[j].cells[2].textContent != "Cơ quan công tác duy nhất UEF (100%)" && table.rows[j].cells[2].textContent != "(1) UEF – (2) ngoài UEF (80%)") {
                                        table.rows[j].cells[6].innerHTML = `0`;

                                    } else {
                                        table.rows[j].cells[6].innerHTML = `${diem / 2}`;

                                    }
                                    table.rows[j].cells[7].innerHTML = `0`;
                                }
                            } if (tgp0 > 0 && tgp100 == 0 && tgp50 == 0) {
                                for (let j = 0; j < sltg; j++) {
                                    var donggop = document.querySelector('#donggop-' + j).value;
                                    table.rows[j].cells[4].innerHTML = `0`;
                                    table.rows[j].cells[5].innerHTML = `0`;
                                    table.rows[j].cells[6].innerHTML = `0`;
                                    table.rows[j].cells[7].innerHTML = `0`;
                                }
                            }

                        }

                    }
                    ////////////
                    else if (sltgc > 2 && sltgp > 0 && sltglh > 0) {
                        var tsltlh = 0;
                        var tglh = 0;
                        for (let i = 1; i < sltg; i++) {
                            var coquan = table.rows[i].cells[2].textContent;
                            var coquantgc = table.rows[0].cells[2].textContent;
                            if (coquantgc == "(1) UEF – (2) ngoài UEF (80%)" && table.rows[0].cells[3].textContent == "Tác giả chính") {
                                document.querySelector('#donggop-0').disabled = false;
                                if (table.rows[i].cells[3].textContent == "Tác giả liên hệ" && table.rows[i].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)") {
                                    var donggop = document.querySelector('#donggop-' + i).value;
                                    if (table.rows[i].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)") {
                                        tsltlh += 1;
                                    }
                                    if (tsltlh > 1 || tsltlh == 1) {
                                        for (let j = 0; j < sltg; j++) {
                                            var donggop = document.querySelector('#donggop-' + j).value;
                                            table.rows[j].cells[4].innerHTML = `${total * donggop / 100}`;
                                            table.rows[j].cells[5].innerHTML = `${total * donggop / 100 * 0.9}`;
                                            table.rows[j].cells[6].innerHTML = `${diem / 2}`;
                                            table.rows[j].cells[7].innerHTML = `0`;
                                        }
                                    }
                                    var donggoptgc = document.querySelector('#donggop-0').value;
                                    table.rows[0].cells[4].innerHTML = `${total * donggoptgc / 100}`;
                                    table.rows[0].cells[5].innerHTML = `${total * donggoptgc / 100 * 0.9}`;
                                    table.rows[0].cells[6].innerHTML = `${diem / 2}`;
                                    table.rows[0].cells[7].innerHTML = `0`;
                                    break;
                                }
                                else if (table.rows[i].cells[3].textContent == "Tác giả liên hệ" && table.rows[i].cells[2].textContent == "(1) UEF – (2) ngoài UEF (80%)" || table.rows[i].cells[2].textContent == "(1) ngoài UEF, (2) UEF (20%)" || table.rows[i].cells[2].textContent == "Cơ quan công tác ngoài UEF (0%)") {
                                    var donggop = document.querySelector('#donggop-' + i).value;
                                    table.rows[i].cells[4].innerHTML = `${total / 2 * donggop / 100}`;
                                    table.rows[i].cells[5].innerHTML = `${total / 2 * donggop / 100 * 0.9}`;
                                    table.rows[i].cells[6].innerHTML = `${diem / 2}`;
                                    table.rows[i].cells[7].innerHTML = `0`;
                                    for (let j = 1; j < (sltgp + 1); j++) {
                                        var donggop = document.querySelector('#donggop-' + j).value;

                                        if (table.rows[j].cells[2].textContent == "(1) ngoài UEF, (2) UEF (20%)" || table.rows[j].cells[2].textContent == "Cơ quan công tác ngoài UEF (0%)") {
                                            table.rows[j].cells[4].innerHTML = `${total / 2 * donggop / 100}`;
                                            table.rows[j].cells[5].innerHTML = `${total / 2 * donggop / 100 * 0.9}`;
                                            table.rows[j].cells[6].innerHTML = `0`;
                                            table.rows[j].cells[7].innerHTML = `0`;
                                        } else {
                                            table.rows[j].cells[4].innerHTML = `${total / 2 * donggop / 100}`;
                                            table.rows[j].cells[5].innerHTML = `${total / 2 * donggop / 100 * 0.9}`;
                                            table.rows[j].cells[6].innerHTML = `${diem / 2}`;
                                            table.rows[j].cells[7].innerHTML = `0`;
                                        }
                                    }
                                    for (let k = (sltgc + sltgp + 1); k < (sltg + 1); k++) {
                                        var donggop = document.querySelector('#donggop-' + (k - 1)).value;
                                        if (table.rows[k - 1].cells[2].textContent == "(1) ngoài UEF, (2) UEF (20%)" || table.rows[k - 1].cells[2].textContent == "Cơ quan công tác ngoài UEF (0%)") {
                                            table.rows[k - 1].cells[4].innerHTML = `${total / 2 * donggop / 100}`;
                                            table.rows[k - 1].cells[5].innerHTML = `${total / 2 * donggop / 100 * 0.9}`;
                                            table.rows[k - 1].cells[6].innerHTML = `0`;
                                            table.rows[k - 1].cells[7].innerHTML = `0`;
                                        } else {
                                            table.rows[k - 1].cells[4].innerHTML = `${total / 2 * donggop / 100}`;
                                            table.rows[k - 1].cells[5].innerHTML = `${total / 2 * donggop / 100 * 0.9}`;
                                            table.rows[k - 1].cells[6].innerHTML = `${diem / 2}`;
                                            table.rows[k - 1].cells[7].innerHTML = `0`;
                                        }
                                    }
                                    var donggoptgc = document.querySelector('#donggop-0').value;
                                    table.rows[0].cells[4].innerHTML = `${total / 2 * donggoptgc / 100}`;
                                    table.rows[0].cells[5].innerHTML = `${total / 2 * donggoptgc / 100 * 0.9}`;
                                    table.rows[0].cells[6].innerHTML = `${diem / 2}`;
                                    table.rows[0].cells[7].innerHTML = `0`;
                                }
                            }
                            ////////
                            else if (coquantgc == "Cơ quan công tác ngoài UEF (0%)" || coquantgc == "(1) ngoài UEF, (2) UEF (20%)" && table.rows[0].cells[3].textContent == "Tác giả chính") {
                                document.querySelector('#donggop-0').disabled = false;
                                if (table.rows[i].cells[3].textContent == "Tác giả liên hệ" && table.rows[i].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)") {
                                    var donggop = document.querySelector('#donggop-' + i).value;
                                    table.rows[i].cells[4].innerHTML = `${total * donggop / 100}`;
                                    table.rows[i].cells[5].innerHTML = `${total * donggop / 100 * 0.9}`;
                                    table.rows[i].cells[6].innerHTML = `${diem / 2}`;
                                    table.rows[i].cells[7].innerHTML = `0`;
                                    for (let j = 1; j < (sltgp + 1); j++) {
                                        var donggop = document.querySelector('#donggop-' + j).value;

                                        if (table.rows[j].cells[2].textContent == "(1) ngoài UEF, (2) UEF (20%)" || table.rows[j].cells[2].textContent == "Cơ quan công tác ngoài UEF (0%)") {
                                            table.rows[j].cells[4].innerHTML = `${total * donggop / 100}`;
                                            table.rows[j].cells[5].innerHTML = `${total * donggop / 100 * 0.9}`;
                                            table.rows[j].cells[6].innerHTML = `0`;
                                            table.rows[j].cells[7].innerHTML = `0`;
                                        } else {
                                            table.rows[j].cells[4].innerHTML = `${total * donggop / 1000}`;
                                            table.rows[j].cells[5].innerHTML = `${total * donggop / 100 * 0.9}`;
                                            table.rows[j].cells[6].innerHTML = `${diem / 2}`;
                                            table.rows[j].cells[7].innerHTML = `0`;
                                        }
                                    }
                                    for (let k = (sltgc + sltgp + 1); k < (sltg + 1); k++) {
                                        var donggop = document.querySelector('#donggop-' + (k - 1)).value;
                                        if (table.rows[k - 1].cells[2].textContent == "(1) ngoài UEF, (2) UEF (20%)" || table.rows[k - 1].cells[2].textContent == "Cơ quan công tác ngoài UEF (0%)") {
                                            table.rows[k - 1].cells[4].innerHTML = `${total * donggop / 100}`;
                                            table.rows[k - 1].cells[5].innerHTML = `${total * donggop / 100 * 0.9}`;
                                            table.rows[k - 1].cells[6].innerHTML = `0`;
                                            table.rows[k - 1].cells[7].innerHTML = `0`;
                                        } else {
                                            table.rows[k - 1].cells[4].innerHTML = `${total * donggop / 100}`;
                                            table.rows[k - 1].cells[5].innerHTML = `${total * donggop / 100 * 0.9}`;
                                            table.rows[k - 1].cells[6].innerHTML = `${diem / 2}`;
                                            table.rows[k - 1].cells[7].innerHTML = `0`;
                                        }
                                    }
                                    var donggoptgc = document.querySelector('#donggop-0').value;

                                    break;
                                }

                                else if (table.rows[i].cells[3].textContent == "Tác giả liên hệ" && table.rows[i].cells[2].textContent == "(1) UEF – (2) ngoài UEF (80%)") {
                                    var donggop = document.querySelector('#donggop-' + i).value;
                                    table.rows[i].cells[4].innerHTML = `${total / 2 * donggop / 100}`;
                                    table.rows[i].cells[5].innerHTML = `${total / 2 * donggop / 100 * 0.9}`;
                                    table.rows[i].cells[6].innerHTML = `${diem / 2}`;
                                    table.rows[i].cells[7].innerHTML = `0`;
                                    for (let j = 1; j < (sltgp + 1); j++) {
                                        var donggop = document.querySelector('#donggop-' + j).value;

                                        if (table.rows[j].cells[2].textContent == "(1) ngoài UEF, (2) UEF (20%)" || table.rows[j].cells[2].textContent == "Cơ quan công tác ngoài UEF (0%)") {
                                            table.rows[j].cells[4].innerHTML = `${total / 2 * donggop / 100}`;
                                            table.rows[j].cells[5].innerHTML = `${total / 2 * donggop / 100 * 0.9}`;
                                            table.rows[j].cells[6].innerHTML = `0`;
                                            table.rows[j].cells[7].innerHTML = `0`;
                                        } else {
                                            table.rows[j].cells[4].innerHTML = `${total / 2 * donggop / 100}`;
                                            table.rows[j].cells[5].innerHTML = `${total / 2 * donggop / 100 * 0.9}`;
                                            table.rows[j].cells[6].innerHTML = `${diem / 2}`;
                                            table.rows[j].cells[7].innerHTML = `0`;
                                        }
                                    }
                                    for (let k = (sltgc + sltgp + 1); k < (sltg + 1); k++) {
                                        var donggop = document.querySelector('#donggop-' + (k - 1)).value;
                                        if (table.rows[k - 1].cells[2].textContent == "(1) ngoài UEF, (2) UEF (20%)" || table.rows[k - 1].cells[2].textContent == "Cơ quan công tác ngoài UEF (0%)") {
                                            table.rows[k - 1].cells[4].innerHTML = `${total / 2 * donggop / 100}`;
                                            table.rows[k - 1].cells[5].innerHTML = `${total / 2 * donggop / 100 * 0.9}`;
                                            table.rows[k - 1].cells[6].innerHTML = `0`;
                                            table.rows[k - 1].cells[7].innerHTML = `0`;
                                        } else {
                                            table.rows[k - 1].cells[4].innerHTML = `${total / 2 * donggop / 100}`;
                                            table.rows[k - 1].cells[5].innerHTML = `${total / 2 * donggop / 100 * 0.9}`;
                                            table.rows[k - 1].cells[6].innerHTML = `${diem / 2}`;
                                            table.rows[k - 1].cells[7].innerHTML = `0`;
                                        }
                                    }
                                    var donggoptgc = document.querySelector('#donggop-0').value;
                                    table.rows[0].cells[4].innerHTML = `${total / 2 * donggoptgc / 100}`;
                                    table.rows[0].cells[5].innerHTML = `${total / 2 * donggoptgc / 100 * 0.9}`;
                                    table.rows[0].cells[6].innerHTML = `${diem / 2}`;
                                    table.rows[0].cells[7].innerHTML = `0`;
                                } if (table.rows[i].cells[3].textContent == "Tác giả liên hệ" && table.rows[i].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)" || table.rows[i].cells[2].textContent == "(1) UEF – (2) ngoài UEF (80%)") {
                                    var donggop = document.querySelector('#donggop-' + i).value;
                                    if (table.rows[i].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)") {
                                        tglh += 1;
                                    }
                                    if (tglh < 1) {
                                        if (table.rows[i].cells[2].textContent == "Tác giả phụ" && table.rows[i].cells[3].textContent == "Tác giả phụ") {

                                        }
                                        for (let j = 0; j < sltg; j++) {
                                            var donggop = document.querySelector('#donggop-' + j).value;
                                            table.rows[j].cells[4].innerHTML = `${total * donggop / 100}`;
                                            table.rows[j].cells[5].innerHTML = `${total * donggop / 100 * 0.9}`;
                                            table.rows[j].cells[6].innerHTML = `${diem / 2}`;
                                            table.rows[j].cells[7].innerHTML = `0`;
                                        }
                                    }

                                    break;
                                }

                            }
                            ///////
                            else if (coquantgc == "Cơ quan công tác duy nhất UEF (100%)" && table.rows[0].cells[3].textContent == "Tác giả chính") {
                                document.querySelector('#donggop-0').disabled = false;
                                var donggop = document.querySelector('#donggop-' + i).value;
                                var donggoptgc = document.querySelector('#donggop-0').value;
                                table.rows[0].cells[4].innerHTML = `${total * donggoptgc / 100}`;
                                table.rows[0].cells[5].innerHTML = `${total * donggoptgc / 100 * 0.9}`;
                                table.rows[0].cells[6].innerHTML = `${diem / 2}`;
                                table.rows[0].cells[7].innerHTML = `0`;
                                if (table.rows[i].cells[2].textContent == "(1) ngoài UEF, (2) UEF (20%)" || table.rows[i].cells[2].textContent == "Cơ quan công tác ngoài UEF (0%)") {
                                    table.rows[i].cells[4].innerHTML = `${(total) * (donggop / 100)}`;
                                    table.rows[i].cells[5].innerHTML = `${(total) * (donggop / 100) * 0.9}`;
                                    table.rows[i].cells[6].innerHTML = `0`;
                                    table.rows[i].cells[7].innerHTML = `0`;
                                } else {
                                    table.rows[i].cells[4].innerHTML = `${(total) * (donggop / 100)}`;
                                    table.rows[i].cells[5].innerHTML = `${(total) * (donggop / 100) * 0.9}`;
                                    table.rows[i].cells[6].innerHTML = `${diem / 2}`;
                                    table.rows[i].cells[7].innerHTML = `0`;
                                }
                            }

                        }
                    }
                    else if (sltg == 2 && valuerank != "Nghiên cứu mạnh") {
                        for (let i = 0; i < sltg; i++) {
                            var coquan = table.rows[i].cells[2].textContent;
                            var donggop = Number(document.querySelector('#donggop-' + i).value);
                            if (sltg == 2) {
                                if (coquan == "(1) ngoài UEF, (2) UEF (20%)" || coquan == "Cơ quan công tác ngoài UEF (0%)") {
                                    table.rows[i].cells[4].innerHTML = `0`;
                                    table.rows[i].cells[5].innerHTML = `0`;
                                    table.rows[i].cells[6].innerHTML = `0`;
                                    table.rows[i].cells[7].innerHTML = `0`;
                                } if (coquan == "(1) UEF – (2) ngoài UEF (80%)") {
                                    table.rows[i].cells[4].innerHTML = `${((total / 2) / sltg) * (donggop / 100)}`;
                                    table.rows[i].cells[5].innerHTML = `${(((total / 2) / sltg) * (donggop / 100)) * 0.9}`;
                                    table.rows[i].cells[6].innerHTML = `${diem / 2}`;
                                    table.rows[i].cells[7].innerHTML = `0`;
                                } else if (coquan == "Cơ quan công tác duy nhất UEF (100%)") {
                                    table.rows[i].cells[4].innerHTML = `${(total / 2) * (donggop / 100)}`;
                                    table.rows[i].cells[5].innerHTML = `${((total / 2)) * (donggop / 100) * 0.9}`;
                                    table.rows[i].cells[6].innerHTML = `${diem / 2}`;
                                    table.rows[i].cells[7].innerHTML = `0`;
                                }
                            }
                        }
                    }

                    else if (sltgc == 1 && sltg == 1) {
                        var coquan = table.rows[0].cells[2].textContent;
                        try {
                            var donggop = Number(document.querySelector('#donggop-0').value);

                        } catch { }

                        if (coquan == "(1) ngoài UEF, (2) UEF (20%)" || coquan == "Cơ quan công tác ngoài UEF (0%)") {
                            table.rows[0].cells[4].innerHTML = `0`;
                            table.rows[0].cells[5].innerHTML = `0`;
                            table.rows[0].cells[6].innerHTML = `0`;
                            table.rows[0].cells[7].innerHTML = `0`;

                        } else if (coquan == "(1) UEF – (2) ngoài UEF (80%)") {
                            table.rows[0].cells[4].innerHTML = `${total / 2}`;
                            table.rows[0].cells[5].innerHTML = `${(total / 2) * 0.9}`;
                            table.rows[0].cells[6].innerHTML = `${diem}`;
                            table.rows[0].cells[7].innerHTML = `${tietchuan}`;
                        } else {
                            table.rows[0].cells[4].innerHTML = `${total}`;
                            table.rows[0].cells[5].innerHTML = `${(total) * 0.9}`;
                            table.rows[0].cells[6].innerHTML = `${diem}`;
                            table.rows[0].cells[7].innerHTML = `${tietchuan}`;
                        }
                    }
                }
                ///4
                if (valuerank == "Giảng viên" && valueloaihinh == "Đề tài") {
                    for (let i = 0; i < sltg; i++) {
                        trtable += `<tr>
                                                                            <td>${i + 1}</td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            </tr>`;
                    }
                    table.innerHTML = trtable;
                    for (let i = 0; i < sltg; i++) {
                        var tacgia = document.querySelector('#inp-username-id-mail-' + i).value;
                        table.rows[i].cells[1].innerHTML = tacgia;
                    }
                    for (let i = 0; i < sltg; i++) {
                        var optionscongtac = document.querySelector('#coquancongtac-' + i);
                        var textcongtac = optionscongtac.options[optionscongtac.selectedIndex].textContent;
                        table.rows[i].cells[2].innerHTML = textcongtac;
                    } for (let i = 0; i < sltg; i++) {
                        var optionstg = document.querySelector('#tg-' + i);
                        var texttg = optionstg.options[optionstg.selectedIndex].textContent;
                        table.rows[i].cells[3].innerHTML = texttg;
                    }
                    if (sltg == 2) {
                        for (let i = 0; i < sltg; i++) {
                            var coquan = table.rows[i].cells[2].textContent;
                            if (sltg == 2) {
                                if (coquan == "(1) ngoài UEF, (2) UEF (20%)" || coquan == "Cơ quan công tác ngoài UEF (0%)") {
                                    table.rows[i].cells[4].innerHTML = `0`;
                                    table.rows[i].cells[5].innerHTML = `0`;
                                    table.rows[i].cells[6].innerHTML = `0`;
                                    table.rows[i].cells[7].innerHTML = `0`;
                                } if (coquan == "(1) UEF – (2) ngoài UEF (80%)") {
                                    table.rows[i].cells[4].innerHTML = `${((total / 2) / sltg)}`;
                                    table.rows[i].cells[5].innerHTML = `${(((total / 2) / sltg)) * 0.9}`;
                                    table.rows[i].cells[6].innerHTML = `${diem / 2}`;
                                    table.rows[i].cells[7].innerHTML = `${tietchuan}`;
                                } else if (coquan == "Cơ quan công tác duy nhất UEF (100%)") {
                                    table.rows[i].cells[4].innerHTML = `${(total / 2)}`;
                                    table.rows[i].cells[5].innerHTML = `${((total / 2)) * 0.9}`;
                                    table.rows[i].cells[6].innerHTML = `${diem / 2}`;
                                    table.rows[i].cells[7].innerHTML = `${tietchuan}`;
                                }
                            }
                        }
                    }
                    else if (sltg > 2 && (sltgc + sltglh) < sltg) {
                        for (let i = 0; i < sltg; i++) {

                            var coquan = table.rows[i].cells[2].textContent;
                            var optionstg1 = document.querySelector('#tg-' + i);
                            var texttg1 = optionstg1.options[optionstg1.selectedIndex].textContent;

                            if (coquan == "(1) ngoài UEF, (2) UEF (20%)" || coquan == "Cơ quan công tác ngoài UEF (0%)") {
                                table.rows[i].cells[4].innerHTML = `0`;
                                table.rows[i].cells[5].innerHTML = `0`;
                                table.rows[i].cells[6].innerHTML = `0`;
                                table.rows[i].cells[7].innerHTML = `0`;
                            } else if (coquan == "(1) UEF – (2) ngoài UEF (80%)") {
                                if (texttg1 == "Chủ nhiệm") {
                                    table.rows[i].cells[4].innerHTML = `${(((total * 0.8) / (sltgc + sltglh))) / 2}`;
                                    table.rows[i].cells[5].innerHTML = `${(((total * 0.8) / (sltgc + sltglh))) / 2 * 0.9}`;
                                    table.rows[i].cells[6].innerHTML = `${diem / 2}`;
                                    table.rows[i].cells[7].innerHTML = `${tietchuan}`;

                                } else if (texttg1 == "Thành viên") {
                                    table.rows[i].cells[4].innerHTML = `${(total * 0.2) / 2 / sltgp}`;
                                    table.rows[i].cells[5].innerHTML = `${((total * 0.2) / 2 / sltgp) * 0.9}`;
                                    table.rows[i].cells[6].innerHTML = `${diem / 2}`;
                                    table.rows[i].cells[7].innerHTML = `${tietchuan}`;
                                }

                            } else if (coquan == "Cơ quan công tác duy nhất UEF (100%)") {
                                if (texttg1 == "Chủ nhiệm") {

                                    table.rows[i].cells[4].innerHTML = `${(((total * 0.8) / (sltgc + sltglh)))}`;
                                    table.rows[i].cells[5].innerHTML = `${(((total * 0.8) / (sltgc + sltglh))) * 0.9}`;
                                    table.rows[i].cells[6].innerHTML = `${diem / 2}`;
                                    table.rows[i].cells[7].innerHTML = `${tietchuan}`;

                                } else if (texttg1 == "Thành viên") {
                                    table.rows[i].cells[4].innerHTML = `${((total * 0.2) / sltgp)}`;
                                    table.rows[i].cells[5].innerHTML = `${((total * 0.2) / sltgp) * 0.9}`;
                                    table.rows[i].cells[6].innerHTML = `${diem / 2}`;
                                    table.rows[i].cells[7].innerHTML = `${tietchuan}`;
                                }
                            }

                        }
                    }

                    if (sltgc == 1 && sltg == 1) {
                        var coquan = table.rows[0].cells[2].textContent;
                        try {
                            var donggop = Number(document.querySelector('#donggop-0').value);

                        } catch { }

                        if (coquan == "(1) ngoài UEF, (2) UEF (20%)" || coquan == "Cơ quan công tác ngoài UEF (0%)") {
                            table.rows[0].cells[4].innerHTML = `0`;
                            table.rows[0].cells[5].innerHTML = `0`;
                            table.rows[0].cells[6].innerHTML = `0`;
                            table.rows[0].cells[7].innerHTML = `0`;

                        } else if (coquan == "(1) UEF – (2) ngoài UEF (80%)") {
                            table.rows[0].cells[4].innerHTML = `${total / 2}`;
                            table.rows[0].cells[5].innerHTML = `${(total / 2) * 0.9}`;
                            table.rows[0].cells[6].innerHTML = `${diem}`;
                            table.rows[0].cells[7].innerHTML = `${tietchuan}`;
                        } else {
                            table.rows[0].cells[4].innerHTML = `${total}`;
                            table.rows[0].cells[5].innerHTML = `${(total) * 0.9}`;
                            table.rows[0].cells[6].innerHTML = `${diem}`;
                            table.rows[0].cells[7].innerHTML = `${tietchuan}`;
                        }
                    }
                }
                //////////////////
                if (valuerank == "Nghiên cứu viên 1" && valueloaihinh == "Nghiên cứu mạnh" && sltgc == 1 && sltglh == 1 && sltgp == 1 && sltg == 3) {
                    for (let i = 0; i < sltg; i++) {
                        trtable += `<tr>
                                                                                        <td>${i + 1}</td>
                                                                                        <td></td>
                                                                                        <td></td>
                                                                                        <td></td>
                                                                                        <td></td>
                                                                                        <td></td>
                                                                                        <td></td>
                                                                                        <td></td>
                                                                                    </tr>`;
                    }
                    table.innerHTML = trtable;
                    for (let i = 0; i < sltg; i++) {
                        var tacgia = document.querySelector('#inp-username-id-mail-' + i).value;
                        table.rows[i].cells[1].innerHTML = tacgia;
                    }
                    for (let i = 0; i < sltg; i++) {
                        var optionscongtac = document.querySelector('#coquancongtac-' + i);
                        var textcongtac = optionscongtac.options[optionscongtac.selectedIndex].textContent;
                        table.rows[i].cells[2].innerHTML = textcongtac;
                    } for (let i = 0; i < sltg; i++) {
                        var optionstg = document.querySelector('#tg-' + i);
                        var texttg = optionstg.options[optionstg.selectedIndex].textContent;
                        table.rows[i].cells[3].innerHTML = texttg;
                    }
                    for (let i = 1; i < sltg; i++) {
                        var coquantgc = table.rows[0].cells[2].textContent;
                        var optionstg = document.querySelector('#tg-' + i);
                        var texttg = optionstg.options[optionstg.selectedIndex].textContent;
                        var optionstgc = document.querySelector('#coquancongtac-0');
                        var texttgc = optionstgc.options[optionstgc.selectedIndex].textContent;
                        var coquan = table.rows[i].cells[2].textContent;
                        /// tgc 0%
                        if (texttgc == "(1) ngoài UEF, (2) UEF (20%)" || texttgc == "Cơ quan công tác ngoài UEF (0%)") {

                            var donggoptgc = Number(document.querySelector('#donggop-0').value);
                            //tglh 0%
                            if (table.rows[sltg - 1].cells[2].textContent != "Cơ quan công tác duy nhất UEF (100%)" && table.rows[sltg - 1].cells[2].textContent != "(1) UEF – (2) ngoài UEF (80%)") {

                                // tgc 0, tglh 0, tgp 50
                                if (table.rows[sltg - 2].cells[2].textContent == "(1) UEF – (2) ngoài UEF (80%)") {
                                    var donggop = document.querySelector('#donggop-' + i).value;
                                    var donggoptgc = document.querySelector('#donggop-0').value;
                                    table.rows[i].cells[4].innerHTML = `${total / 8 * donggop / 100}`;
                                    table.rows[i].cells[5].innerHTML = `${(total / 8 * donggop / 100) * 0.9}`;
                                    table.rows[i].cells[6].innerHTML = `${diem / 2}`;
                                    table.rows[i].cells[7].innerHTML = `0`;
                                    table.rows[0].cells[4].innerHTML = `${total / 8 * donggoptgc / 100}`;
                                    table.rows[0].cells[5].innerHTML = `${total / 8 * donggoptgc / 100 * 0.9} `;
                                    table.rows[0].cells[6].innerHTML = `0`;
                                    table.rows[0].cells[7].innerHTML = `0`;
                                    table.rows[2].cells[4].innerHTML = `${total / 8 * donggop / 100}`;
                                    table.rows[2].cells[5].innerHTML = `${(total / 8 * donggop / 100) * 0.9}`;
                                    table.rows[2].cells[6].innerHTML = `0`;
                                    table.rows[2].cells[7].innerHTML = `0`;

                                }
                                // tgc 0, tglh 0, tgp 100
                                else if (table.rows[sltg - 2].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)") {
                                    var donggop = document.querySelector('#donggop-' + i).value;
                                    var donggoptgc = document.querySelector('#donggop-0').value;
                                    table.rows[i].cells[4].innerHTML = `${total / 4 * donggop / 100}`;
                                    table.rows[i].cells[5].innerHTML = `${(total / 4 * donggop / 100) * 0.9}`;
                                    table.rows[i].cells[6].innerHTML = `${diem / 2}`;
                                    table.rows[i].cells[7].innerHTML = `0`;
                                    table.rows[0].cells[4].innerHTML = `${total / 4 * donggoptgc / 100}`;
                                    table.rows[0].cells[5].innerHTML = `${total / 4 * donggoptgc / 100 * 0.9} `;
                                    table.rows[0].cells[6].innerHTML = `0`;
                                    table.rows[0].cells[7].innerHTML = `0`;
                                    table.rows[2].cells[4].innerHTML = `${total / 4 * donggop / 100}`;
                                    table.rows[2].cells[5].innerHTML = `${(total / 4 * donggop / 100) * 0.9}`;
                                    table.rows[2].cells[6].innerHTML = `0`;
                                    table.rows[2].cells[7].innerHTML = `0`;
                                }
                                // tgc 0, tglh 0, tgp 0
                                else {
                                    var donggop = document.querySelector('#donggop-' + i).value;
                                    var donggoptgc = document.querySelector('#donggop-0').value;
                                    table.rows[i].cells[4].innerHTML = `0`;
                                    table.rows[i].cells[5].innerHTML = `0`;
                                    table.rows[i].cells[6].innerHTML = `0`;
                                    table.rows[i].cells[7].innerHTML = `0`;
                                    table.rows[0].cells[4].innerHTML = `0`;
                                    table.rows[0].cells[5].innerHTML = `0`;
                                    table.rows[0].cells[6].innerHTML = `0`;
                                    table.rows[0].cells[7].innerHTML = `0`;
                                    table.rows[2].cells[4].innerHTML = `0`;
                                    table.rows[2].cells[5].innerHTML = `0`;
                                    table.rows[2].cells[6].innerHTML = `0`;
                                    table.rows[2].cells[7].innerHTML = `0`;
                                }

                            }
                            //tglh 50
                            if (table.rows[sltg - 1].cells[2].textContent == "(1) UEF – (2) ngoài UEF (80%)") {
                                // tgc 0 tgp 50 tglh 50
                                if (table.rows[sltg - 2].cells[2].textContent == "(1) UEF – (2) ngoài UEF (80%)") {
                                    var donggop = document.querySelector('#donggop-' + i).value;
                                    var donggoptgc = document.querySelector('#donggop-0').value;
                                    table.rows[i].cells[4].innerHTML = `${total / 2 * donggop / 100}`;
                                    table.rows[i].cells[5].innerHTML = `${(total / 2 * donggop / 100) * 0.9}`;
                                    table.rows[i].cells[6].innerHTML = `${diem / 2}`;
                                    table.rows[i].cells[7].innerHTML = `0`;
                                    table.rows[0].cells[4].innerHTML = `${total / 2 * donggoptgc / 100}`;
                                    table.rows[0].cells[5].innerHTML = `${total / 2 * donggoptgc / 100 * 0.9} `;
                                    table.rows[0].cells[6].innerHTML = `0`;
                                    table.rows[0].cells[7].innerHTML = `0`;
                                    table.rows[2].cells[4].innerHTML = `${total / 2 * donggop / 100}`;
                                    table.rows[2].cells[5].innerHTML = `${(total / 2 * donggop / 100) * 0.9}`;
                                    table.rows[2].cells[6].innerHTML = `${diem / 2}`;
                                    table.rows[2].cells[7].innerHTML = `0`;
                                }
                                //tgc 0 tgp 100 thlh 50
                                else if (table.rows[sltg - 2].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)") {
                                    var donggop = document.querySelector('#donggop-' + i).value;
                                    var donggoptgc = document.querySelector('#donggop-0').value;
                                    table.rows[i].cells[4].innerHTML = `${total / 2 * donggop / 100}`;
                                    table.rows[i].cells[5].innerHTML = `${(total / 2 * donggop / 100) * 0.9}`;
                                    table.rows[i].cells[6].innerHTML = `${diem / 2}`;
                                    table.rows[i].cells[7].innerHTML = `0`;
                                    table.rows[0].cells[4].innerHTML = `${total / 2 * donggoptgc / 100}`;
                                    table.rows[0].cells[5].innerHTML = `${total / 2 * donggoptgc / 100 * 0.9} `;
                                    table.rows[0].cells[6].innerHTML = `0`;
                                    table.rows[0].cells[7].innerHTML = `0`;
                                    table.rows[2].cells[4].innerHTML = `${total / 2 * donggop / 100}`;
                                    table.rows[2].cells[5].innerHTML = `${(total / 2 * donggop / 100) * 0.9}`;
                                    table.rows[2].cells[6].innerHTML = `${diem / 2}`;
                                    table.rows[2].cells[7].innerHTML = `0`;
                                }
                                //tgc 0 tgp 0 thlh 50
                                else {
                                    var donggop = document.querySelector('#donggop-' + i).value;
                                    var donggoptgc = document.querySelector('#donggop-0').value;
                                    table.rows[i].cells[4].innerHTML = `${total / 2 * donggop / 100}`;
                                    table.rows[i].cells[5].innerHTML = `${(total / 2 * donggop / 100) * 0.9}`;
                                    table.rows[i].cells[6].innerHTML = `0`;
                                    table.rows[i].cells[7].innerHTML = `0`;
                                    table.rows[0].cells[4].innerHTML = `${total / 2 * donggoptgc / 100}`;
                                    table.rows[0].cells[5].innerHTML = `${total / 2 * donggoptgc / 100 * 0.9} `;
                                    table.rows[0].cells[6].innerHTML = `0`;
                                    table.rows[0].cells[7].innerHTML = `0`;
                                    table.rows[2].cells[4].innerHTML = `${total / 2 * donggop / 100}`;
                                    table.rows[2].cells[5].innerHTML = `${(total / 2 * donggop / 100) * 0.9}`;
                                    table.rows[2].cells[6].innerHTML = `${diem / 2}`;
                                    table.rows[2].cells[7].innerHTML = `0`;
                                }

                            }
                            //tglh 100
                            if (table.rows[sltg - 1].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)") {
                                //tgc 0 tgp 50 thlh 100
                                if (table.rows[sltg - 2].cells[2].textContent == "(1) UEF – (2) ngoài UEF (80%)") {
                                    var donggop = document.querySelector('#donggop-' + i).value;
                                    var donggoptgc = document.querySelector('#donggop-0').value;
                                    table.rows[i].cells[4].innerHTML = `${total * donggop / 100}`;
                                    table.rows[i].cells[5].innerHTML = `${(total * donggop / 100) * 0.9}`;
                                    table.rows[i].cells[6].innerHTML = `${diem / 2}`;
                                    table.rows[i].cells[7].innerHTML = `0`;
                                    table.rows[0].cells[4].innerHTML = `${total * donggoptgc / 100}`;
                                    table.rows[0].cells[5].innerHTML = `${total * donggoptgc / 100 * 0.9} `;
                                    table.rows[0].cells[6].innerHTML = `0`;
                                    table.rows[0].cells[7].innerHTML = `0`;
                                    table.rows[2].cells[4].innerHTML = `${total * donggop / 100}`;
                                    table.rows[2].cells[5].innerHTML = `${(total * donggop / 100) * 0.9}`;
                                    table.rows[2].cells[6].innerHTML = `${diem / 2}`;
                                    table.rows[2].cells[7].innerHTML = `0`;
                                }
                                //tgc 0 tgp 100 thlh 100
                                else if (table.rows[sltg - 2].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)") {
                                    var donggop = document.querySelector('#donggop-' + i).value;
                                    var donggoptgc = document.querySelector('#donggop-0').value;
                                    table.rows[i].cells[4].innerHTML = `${total * donggop / 100}`;
                                    table.rows[i].cells[5].innerHTML = `${(total * donggop / 100) * 0.9}`;
                                    table.rows[i].cells[6].innerHTML = `${diem / 2}`;
                                    table.rows[i].cells[7].innerHTML = `0`;
                                    table.rows[0].cells[4].innerHTML = `${total * donggoptgc / 100}`;
                                    table.rows[0].cells[5].innerHTML = `${total * donggoptgc / 100 * 0.9} `;
                                    table.rows[0].cells[6].innerHTML = `0`;
                                    table.rows[0].cells[7].innerHTML = `0`;
                                    table.rows[2].cells[4].innerHTML = `${total * donggop / 100}`;
                                    table.rows[2].cells[5].innerHTML = `${(total * donggop / 100) * 0.9}`;
                                    table.rows[2].cells[6].innerHTML = `${diem / 2}`;
                                    table.rows[2].cells[7].innerHTML = `0`;
                                }
                                //tgc 0 tgp 0 thlh 100
                                else {
                                    var donggop = document.querySelector('#donggop-' + i).value;
                                    var donggoptgc = document.querySelector('#donggop-0').value;
                                    table.rows[i].cells[4].innerHTML = `${total * donggop / 100}`;
                                    table.rows[i].cells[5].innerHTML = `${(total * donggop / 100) * 0.9}`;
                                    table.rows[i].cells[6].innerHTML = `0`;
                                    table.rows[i].cells[7].innerHTML = `0`;
                                    table.rows[0].cells[4].innerHTML = `${total * donggoptgc / 100}`;
                                    table.rows[0].cells[5].innerHTML = `${total * donggoptgc / 100 * 0.9} `;
                                    table.rows[0].cells[6].innerHTML = `0`;
                                    table.rows[0].cells[7].innerHTML = `0`;
                                    table.rows[2].cells[4].innerHTML = `${total * donggop / 100}`;
                                    table.rows[2].cells[5].innerHTML = `${(total * donggop / 100) * 0.9}`;
                                    table.rows[2].cells[6].innerHTML = `${diem / 2}`;
                                    table.rows[2].cells[7].innerHTML = `0`;
                                }

                            }
                        }
                        //tgc 50
                        if (texttgc == "(1) UEF – (2) ngoài UEF (80%)") {

                            var donggoptgc = Number(document.querySelector('#donggop-0').value);
                            //tglh 0%
                            if (table.rows[sltg - 1].cells[2].textContent == "(1) ngoài UEF, (2) UEF (20%)" || table.rows[sltg - 1].cells[2].textContent == "Cơ quan công tác ngoài UEF (0%)") {
                                // tgc 50, tglh 0, tgp 50
                                var donggop = document.querySelector('#donggop-' + i).value;
                                var donggoptgc = document.querySelector('#donggop-0').value;
                                table.rows[i].cells[4].innerHTML = `${total / 2 * donggop / 100}`;
                                table.rows[i].cells[5].innerHTML = `${(total / 2 * donggop / 100) * 0.9}`;
                                table.rows[i].cells[7].innerHTML = `0`;
                                table.rows[0].cells[4].innerHTML = `${total / 2 * donggoptgc / 100}`;
                                table.rows[0].cells[5].innerHTML = `${total / 2 * donggoptgc / 100 * 0.9} `;
                                table.rows[0].cells[6].innerHTML = `${diem / 2}`;
                                table.rows[0].cells[7].innerHTML = `0`;
                                table.rows[2].cells[4].innerHTML = `${total / 2 * donggop / 100}`;
                                table.rows[2].cells[5].innerHTML = `${(total / 2 * donggop / 100) * 0.9}`;
                                table.rows[2].cells[6].innerHTML = `0`;
                                table.rows[2].cells[7].innerHTML = `0`;
                                if (table.rows[sltg - 2].cells[2].textContent == "(1) UEF – (2) ngoài UEF (80%)") {
                                    table.rows[1].cells[6].innerHTML = `${diem / 2}`;

                                }
                                // tgc 50, tglh 0, tgp 100
                                else if (table.rows[sltg - 2].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)") {
                                    table.rows[1].cells[6].innerHTML = `${diem / 2}`;

                                }
                                // tgc 0, tglh 0, tgp 0
                                else {
                                    table.rows[1].cells[6].innerHTML = `0`;

                                }

                            }
                            //tglh 50
                            if (table.rows[sltg - 1].cells[2].textContent == "(1) UEF – (2) ngoài UEF (80%)") {
                                var donggop = document.querySelector('#donggop-' + i).value;
                                var donggoptgc = document.querySelector('#donggop-0').value;
                                table.rows[i].cells[4].innerHTML = `${total / 2 * donggop / 100}`;
                                table.rows[i].cells[5].innerHTML = `${(total / 2 * donggop / 100) * 0.9}`;
                                table.rows[i].cells[7].innerHTML = `0`;
                                table.rows[0].cells[4].innerHTML = `${total / 2 * donggoptgc / 100}`;
                                table.rows[0].cells[5].innerHTML = `${total / 2 * donggoptgc / 100 * 0.9} `;
                                table.rows[0].cells[6].innerHTML = `${diem / 2}`;
                                table.rows[0].cells[7].innerHTML = `0`;
                                table.rows[2].cells[4].innerHTML = `${total / 2 * donggop / 100}`;
                                table.rows[2].cells[5].innerHTML = `${(total / 2 * donggop / 100) * 0.9}`;
                                table.rows[2].cells[6].innerHTML = `${diem / 2}`;
                                table.rows[2].cells[7].innerHTML = `0`;
                                // tgc 0 tgp 50 tglh 50
                                if (table.rows[sltg - 2].cells[2].textContent == "(1) UEF – (2) ngoài UEF (80%)") {
                                    table.rows[1].cells[6].innerHTML = `${diem / 2}`;

                                }
                                //tgc 0 tgp 100 thlh 50
                                else if (table.rows[sltg - 2].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)") {
                                    table.rows[1].cells[6].innerHTML = `${diem / 2}`;

                                }
                                //tgc 0 tgp 0 thlh 50
                                else {
                                    table.rows[1].cells[6].innerHTML = `0`;

                                }

                            }
                            //tglh 100
                            if (table.rows[sltg - 1].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)") {
                                //tgc 0 tgp 50 thlh 100
                                var donggop = document.querySelector('#donggop-' + i).value;
                                var donggoptgc = document.querySelector('#donggop-0').value;
                                table.rows[i].cells[4].innerHTML = `${total * donggop / 100}`;
                                table.rows[i].cells[5].innerHTML = `${(total * donggop / 100) * 0.9}`;
                                table.rows[i].cells[7].innerHTML = `0`;
                                table.rows[0].cells[4].innerHTML = `${total * donggoptgc / 100}`;
                                table.rows[0].cells[5].innerHTML = `${total * donggoptgc / 100 * 0.9} `;
                                table.rows[0].cells[6].innerHTML = `${diem / 2}`;
                                table.rows[0].cells[7].innerHTML = `0`;
                                table.rows[2].cells[4].innerHTML = `${total * donggop / 100}`;
                                table.rows[2].cells[5].innerHTML = `${(total * donggop / 100) * 0.9}`;
                                table.rows[2].cells[6].innerHTML = `${diem / 2}`;
                                table.rows[2].cells[7].innerHTML = `0`;
                                if (table.rows[sltg - 2].cells[2].textContent == "(1) UEF – (2) ngoài UEF (80%)") {
                                    table.rows[1].cells[6].innerHTML = `${diem / 2}`;
                                }
                                //tgc 0 tgp 100 thlh 100
                                else if (table.rows[sltg - 2].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)") {
                                    table.rows[1].cells[6].innerHTML = `${diem / 2}`;

                                }
                                //tgc 0 tgp 0 thlh 100
                                else {
                                    table.rows[1].cells[6].innerHTML = `0`;

                                }

                            }
                        }
                        //////tgc 100
                        if (texttgc == "Cơ quan công tác duy nhất UEF (100%)") {

                            var donggop = document.querySelector('#donggop-' + i).value;
                            var donggoptgc = document.querySelector('#donggop-0').value;
                            table.rows[i].cells[4].innerHTML = `${total * donggop / 100}`;
                            table.rows[i].cells[5].innerHTML = `${(total * donggop / 100) * 0.9}`;
                            table.rows[i].cells[7].innerHTML = `0`;
                            table.rows[0].cells[4].innerHTML = `${total * donggoptgc / 100}`;
                            table.rows[0].cells[5].innerHTML = `${total * donggoptgc / 100 * 0.9} `;
                            table.rows[0].cells[6].innerHTML = `${diem / 2}`;
                            table.rows[0].cells[7].innerHTML = `0`;
                            table.rows[2].cells[4].innerHTML = `${total * donggop / 100}`;
                            table.rows[2].cells[5].innerHTML = `${(total * donggop / 100) * 0.9}`;
                            table.rows[2].cells[7].innerHTML = `0`;
                            //tglh 0%
                            if (table.rows[sltg - 1].cells[2].textContent == "(1) ngoài UEF, (2) UEF (20%)" || table.rows[sltg - 1].cells[2].textContent == "Cơ quan công tác ngoài UEF (0%)") {
                                // tgc 100, tglh 0, tgp 50
                                table.rows[2].cells[6].innerHTML = `0`;
                            }
                            //tglh 50
                            if (table.rows[sltg - 1].cells[2].textContent == "(1) UEF – (2) ngoài UEF (80%)") {
                                table.rows[2].cells[6].innerHTML = `${diem / 2}`;
                            }
                            //tglh 100
                            if (table.rows[sltg - 1].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)") {
                                //tgc 100 tgp 50 thlh 100
                                table.rows[2].cells[6].innerHTML = `${diem / 2}`;
                            }
                            //// kiểm tra cơ quan tác giả phụ
                            if (table.rows[sltg - 2].cells[2].textContent == "(1) ngoài UEF, (2) UEF (20%)" || table.rows[sltg - 2].cells[2].textContent == "Cơ quan công tác ngoài UEF (0%)") {
                                table.rows[1].cells[6].innerHTML = `0`;
                            }
                            if (table.rows[sltg - 2].cells[2].textContent == "(1) UEF – (2) ngoài UEF (80%)") {
                                table.rows[1].cells[6].innerHTML = `${diem / 2}`;
                            }
                            if (table.rows[sltg - 2].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)") {
                                table.rows[1].cells[6].innerHTML = `${diem / 2}`;
                            }
                        }
                    }
                }
                ////// 1 tác giả chính, 1 tác giả liên hệ
                if (valuerank == "Nghiên cứu viên 1" && valueloaihinh == "Nghiên cứu mạnh" && sltgc == 1 && sltglh == 1 && sltgp == 0 && sltg == 2) {
                    for (let i = 0; i < sltg; i++) {
                        trtable += `<tr>
                                                                                        <td>${i + 1}</td>
                                                                                        <td></td>
                                                                                        <td></td>
                                                                                        <td></td>
                                                                                        <td></td>
                                                                                        <td></td>
                                                                                        <td></td>
                                                                                        <td></td>
                                                                                    </tr>`;
                    }
                    table.innerHTML = trtable;
                    for (let i = 0; i < sltg; i++) {
                        var tacgia = document.querySelector('#inp-username-id-mail-' + i).value;
                        table.rows[i].cells[1].innerHTML = tacgia;
                    }
                    for (let i = 0; i < sltg; i++) {
                        var optionscongtac = document.querySelector('#coquancongtac-' + i);
                        var textcongtac = optionscongtac.options[optionscongtac.selectedIndex].textContent;
                        table.rows[i].cells[2].innerHTML = textcongtac;
                    } for (let i = 0; i < sltg; i++) {
                        var optionstg = document.querySelector('#tg-' + i);
                        var texttg = optionstg.options[optionstg.selectedIndex].textContent;
                        table.rows[i].cells[3].innerHTML = texttg;
                    }
                    for (let i = 1; i < sltg; i++) {
                        var coquantgc = table.rows[0].cells[2].textContent;

                        var optionstg = document.querySelector('#tg-' + i);
                        var texttg = optionstg.options[optionstg.selectedIndex].textContent;
                        var optionstgc = document.querySelector('#coquancongtac-0');
                        var texttgc = optionstgc.options[optionstgc.selectedIndex].textContent;
                        var coquan = table.rows[i].cells[2].textContent;
                        if (texttgc == "(1) ngoài UEF, (2) UEF (20%)" || texttgc == "Cơ quan công tác ngoài UEF (0%)") {
                            var donggoptgc = Number(document.querySelector('#donggop-0').value);
                            if (coquan == "Cơ quan công tác duy nhất UEF (100%)") {
                                document.querySelector('#donggop-' + i).disabled = false;
                                var donggop = document.querySelector('#donggop-' + i).value;
                                var donggoptgc = document.querySelector('#donggop-0').value;
                                table.rows[i].cells[4].innerHTML = `${total * donggop / 100}`;
                                table.rows[i].cells[5].innerHTML = `${(total * donggop / 100) * 0.9}`;
                                table.rows[i].cells[6].innerHTML = `${diem / 2}`;

                                table.rows[i].cells[7].innerHTML = `0`;
                                table.rows[0].cells[4].innerHTML = `${total * donggoptgc / 100}`;
                                table.rows[0].cells[5].innerHTML = `${total * donggoptgc / 100 * 0.9} `;
                                if (sltglh > 1) {
                                    table.rows[0].cells[6].innerHTML = `0`;
                                } else {
                                    table.rows[0].cells[6].innerHTML = `0`;
                                }
                                table.rows[0].cells[7].innerHTML = `0`;
                            }
                            if (coquan == "(1) ngoài UEF, (2) UEF (20%)" || coquan == "Cơ quan công tác ngoài UEF (0%)") {

                                table.rows[i].cells[4].innerHTML = `0`;
                                table.rows[i].cells[5].innerHTML = `0`;
                                if (sltglh > 1) {
                                    table.rows[i].cells[6].innerHTML = `0`;
                                } else {
                                    table.rows[i].cells[6].innerHTML = `0`;
                                }
                                table.rows[i].cells[6].innerHTML = `0`;

                                table.rows[0].cells[4].innerHTML = `0`;
                                table.rows[0].cells[5].innerHTML = `0`;
                                if (sltglh > 1) {
                                    table.rows[0].cells[6].innerHTML = `0`;
                                } else {
                                    table.rows[0].cells[6].innerHTML = `0`;
                                }
                                table.rows[0].cells[7].innerHTML = `0`;

                            } if (coquan == "(1) UEF – (2) ngoài UEF (80%)") {
                                document.querySelector('#donggop-' + i).disabled = false;
                                var donggop = document.querySelector('#donggop-' + i).value;
                                var donggoptgc = document.querySelector('#donggop-0').value;
                                table.rows[i].cells[4].innerHTML = `${total / 2 * donggop / 100}`;
                                table.rows[i].cells[5].innerHTML = `${(total / 2 * donggop / 100) * 0.9}`;
                                table.rows[i].cells[6].innerHTML = `${diem / 2}`;

                                table.rows[0].cells[4].innerHTML = `${total / 2 * donggoptgc / 100}`;
                                table.rows[0].cells[5].innerHTML = `${total / 2 * donggoptgc / 100 * 0.9} `;
                                if (sltglh > 1) {
                                    table.rows[0].cells[6].innerHTML = `0`;
                                } else {
                                    table.rows[0].cells[6].innerHTML = `0`;
                                }
                                table.rows[0].cells[7].innerHTML = `0`;
                            }
                        } if (texttgc == "(1) UEF – (2) ngoài UEF (80%)") {
                            var donggoptgc = Number(document.querySelector('#donggop-0').value);

                            if (coquan == "Cơ quan công tác duy nhất UEF (100%)") {
                                table.rows[0].cells[4].innerHTML = `${total * donggoptgc / 100}`;
                                table.rows[0].cells[5].innerHTML = `${(total * donggoptgc / 100) * 0.9}`;
                                table.rows[0].cells[6].innerHTML = `${diem / 2}`;

                                table.rows[0].cells[7].innerHTML = `0`;
                                document.querySelector('#donggop-' + i).disabled = false;
                                var donggop = document.querySelector('#donggop-' + i).value;
                                table.rows[1].cells[4].innerHTML = `${total * donggop / 100}`;
                                table.rows[1].cells[5].innerHTML = `${(total * donggop / 100) * 0.9}`;
                                table.rows[1].cells[6].innerHTML = `${diem / 2}`;

                                table.rows[1].cells[7].innerHTML = `0`;
                            }
                            if (coquan == "(1) ngoài UEF, (2) UEF (20%)" || coquan == "Cơ quan công tác ngoài UEF (0%)") {
                                document.querySelector('#donggop-' + i).disabled = false;
                                table.rows[0].cells[4].innerHTML = `${total / 2 * donggoptgc / 100}`;
                                table.rows[0].cells[5].innerHTML = `${(total / 2 * donggoptgc / 100) * 0.9}`;
                                table.rows[0].cells[6].innerHTML = `${diem / 2}`;

                                table.rows[0].cells[7].innerHTML = `0`;
                                var donggop = document.querySelector('#donggop-' + i).value;
                                table.rows[1].cells[4].innerHTML = `${total / 2 * donggop / 100}`;
                                table.rows[1].cells[5].innerHTML = `${(total / 2 * donggop / 100) * 0.9}`;
                                if (sltglh > 1) {
                                    table.rows[1].cells[6].innerHTML = `${diem / 2}`;
                                } else {
                                    table.rows[1].cells[6].innerHTML = `${diem}`;
                                }
                                table.rows[1].cells[7].innerHTML = `0`;
                            } if (coquan == "(1) UEF – (2) ngoài UEF (80%)") {
                                table.rows[0].cells[4].innerHTML = `${total / 2 * donggoptgc / 100}`;
                                table.rows[0].cells[5].innerHTML = `${(total / 2 * donggoptgc / 100) * 0.9}`;
                                table.rows[0].cells[6].innerHTML = `${diem / 2}`;

                                table.rows[0].cells[7].innerHTML = `0`;
                                document.querySelector('#donggop-' + i).disabled = false;
                                var donggop = document.querySelector('#donggop-' + i).value;
                                table.rows[i].cells[4].innerHTML = `${total / 2 * donggop / 100}`;
                                table.rows[i].cells[5].innerHTML = `${(total / 2 * donggop / 100) * 0.9}`;
                                table.rows[i].cells[6].innerHTML = `${diem / 2}`;

                                table.rows[i].cells[7].innerHTML = `0`;
                            }
                        }
                        if (texttgc == "Cơ quan công tác duy nhất UEF (100%)") {
                            var donggoptgc = Number(document.querySelector('#donggop-0').value);
                            table.rows[0].cells[4].innerHTML = `${total * donggoptgc / 100}`;
                            table.rows[0].cells[5].innerHTML = `${(total * donggoptgc / 100) * 0.9}`;
                            table.rows[0].cells[6].innerHTML = `${diem / 2}`;

                            table.rows[0].cells[7].innerHTML = `0`;
                            if (coquan == "Cơ quan công tác duy nhất UEF (100%)") {
                                document.querySelector('#donggop-' + i).disabled = false;
                                var donggop = document.querySelector('#donggop-' + i).value;
                                table.rows[i].cells[4].innerHTML = `${total * donggop / 100}`;
                                table.rows[i].cells[5].innerHTML = `${(total * donggop / 100) * 0.9}`;
                                if (sltglh > 1) {
                                    table.rows[i].cells[6].innerHTML = `${diem / 2}`;
                                } else {
                                    table.rows[i].cells[6].innerHTML = `${diem / 2}`;
                                }
                                table.rows[i].cells[7].innerHTML = `0`;

                            } if (coquan == "(1) ngoài UEF, (2) UEF (20%)" || coquan == "Cơ quan công tác ngoài UEF (0%)") {
                                table.rows[i].cells[4].innerHTML = `${total * donggop / 100}`;
                                table.rows[i].cells[5].innerHTML = `${total * donggop / 100 * 0.9}`;
                                if (sltglh > 1) {
                                    table.rows[i].cells[6].innerHTML = `0`;
                                } else {
                                    table.rows[i].cells[6].innerHTML = `0`;
                                }
                                table.rows[i].cells[7].innerHTML = `0`;
                            } if (coquan == "(1) UEF – (2) ngoài UEF (80%)") {
                                document.querySelector('#donggop-' + i).disabled = false;
                                var donggop = document.querySelector('#donggop-' + i).value;
                                table.rows[i].cells[4].innerHTML = `${total * donggop / 100}`;
                                table.rows[i].cells[5].innerHTML = `${(total * donggop / 100) * 0.9}`;
                                if (sltglh > 1) {
                                    table.rows[i].cells[6].innerHTML = `${diem / 2}`;
                                } else {
                                    table.rows[i].cells[6].innerHTML = `${diem / 2}`;
                                }
                                table.rows[i].cells[7].innerHTML = `0`;
                            }
                        }
                    }
                }
                ////// 1 tác giả chính, >1 tác giả liên hệ
                if (valuerank == "Nghiên cứu viên 1" && valueloaihinh == "Nghiên cứu mạnh" && sltg > 2 && sltgc == 1 && sltgp == 0 && sltglh > 1) {
                    for (let i = 0; i < sltg; i++) {
                        trtable += `<tr>
                                                                            <td>${i + 1}</td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                        </tr>`;
                    }
                    table.innerHTML = trtable;
                    for (let i = 0; i < sltg; i++) {
                        var tacgia = document.querySelector('#inp-username-id-mail-' + i).value;
                        table.rows[i].cells[1].innerHTML = tacgia;
                    }
                    for (let i = 0; i < sltg; i++) {
                        var optionscongtac = document.querySelector('#coquancongtac-' + i);
                        var textcongtac = optionscongtac.options[optionscongtac.selectedIndex].textContent;
                        table.rows[i].cells[2].innerHTML = textcongtac;
                    } for (let i = 0; i < sltg; i++) {
                        var optionstg = document.querySelector('#tg-' + i);
                        var texttg = optionstg.options[optionstg.selectedIndex].textContent;
                        table.rows[i].cells[3].innerHTML = texttg;
                    }
                    for (let i = 1; i < sltg; i++) {
                        var coquantgc = table.rows[0].cells[2].textContent;
                        var optionstg = document.querySelector('#tg-' + i);
                        var texttg = optionstg.options[optionstg.selectedIndex].textContent;
                        var optionstgc = document.querySelector('#coquancongtac-0');
                        var texttgc = optionstgc.options[optionstgc.selectedIndex].textContent;
                        var coquan = table.rows[i].cells[2].textContent;
                        if (texttgc == "(1) ngoài UEF, (2) UEF (20%)" || texttgc == "Cơ quan công tác ngoài UEF (0%)") {
                            var donggoptgc = Number(document.querySelector('#donggop-0').value);
                            if (coquan == "Cơ quan công tác duy nhất UEF (100%)") {
                                document.querySelector('#donggop-' + i).disabled = false;
                                var donggop = document.querySelector('#donggop-' + i).value;
                                var donggoptgc = document.querySelector('#donggop-0').value;
                                table.rows[i].cells[4].innerHTML = `${total * donggop / 100}`;
                                table.rows[i].cells[5].innerHTML = `${(total * donggop / 100) * 0.9}`;
                                if (sltglh > 1) {
                                    table.rows[i].cells[6].innerHTML = `${diem / 2}`;
                                } else {
                                    table.rows[i].cells[6].innerHTML = `${diem}`;
                                }
                                table.rows[i].cells[7].innerHTML = `0`;
                                table.rows[0].cells[4].innerHTML = `${total * donggoptgc / 100}`;
                                table.rows[0].cells[5].innerHTML = `${total * donggoptgc / 100 * 0.9} `;
                                if (sltglh > 1) {
                                    table.rows[0].cells[6].innerHTML = `0`;
                                } else {
                                    table.rows[0].cells[6].innerHTML = `0`;
                                }
                                table.rows[0].cells[7].innerHTML = `0`;
                            }
                            if (coquan == "(1) ngoài UEF, (2) UEF (20%)" || coquan == "Cơ quan công tác ngoài UEF (0%)") {

                                table.rows[i].cells[4].innerHTML = `0`;
                                table.rows[i].cells[5].innerHTML = `0`;
                                if (sltglh > 1) {
                                    table.rows[i].cells[6].innerHTML = `0`;
                                } else {
                                    table.rows[i].cells[6].innerHTML = `0`;
                                }
                                table.rows[i].cells[6].innerHTML = `0`;

                                table.rows[0].cells[4].innerHTML = `0`;
                                table.rows[0].cells[5].innerHTML = `0`;
                                if (sltglh > 1) {
                                    table.rows[0].cells[6].innerHTML = `0`;
                                } else {
                                    table.rows[0].cells[6].innerHTML = `0`;
                                }
                                table.rows[0].cells[7].innerHTML = `0`;

                            } if (coquan == "(1) UEF – (2) ngoài UEF (80%)") {
                                document.querySelector('#donggop-' + i).disabled = false;
                                var donggop = document.querySelector('#donggop-' + i).value;
                                var donggoptgc = document.querySelector('#donggop-0').value;
                                table.rows[i].cells[4].innerHTML = `${total / 2 * donggop / 100}`;
                                table.rows[i].cells[5].innerHTML = `${(total / 2 * donggop / 100) * 0.9}`;
                                if (sltglh > 1) {
                                    table.rows[i].cells[6].innerHTML = `${diem / 2}`;
                                } else {
                                    table.rows[i].cells[6].innerHTML = `${diem}`;
                                }
                                table.rows[0].cells[4].innerHTML = `${total / 2 * donggoptgc / 100}`;
                                table.rows[0].cells[5].innerHTML = `${total / 2 * donggoptgc / 100 * 0.9} `;
                                if (sltglh > 1) {
                                    table.rows[0].cells[6].innerHTML = `0`;
                                } else {
                                    table.rows[0].cells[6].innerHTML = `0`;
                                }
                                table.rows[0].cells[7].innerHTML = `0`;
                            }
                        } if (texttgc == "(1) UEF – (2) ngoài UEF (80%)") {
                            var donggoptgc = Number(document.querySelector('#donggop-0').value);

                            if (coquan == "Cơ quan công tác duy nhất UEF (100%)") {
                                table.rows[0].cells[4].innerHTML = `${total * donggoptgc / 100}`;
                                table.rows[0].cells[5].innerHTML = `${(total * donggoptgc / 100) * 0.9}`;
                                if (sltglh > 1) {
                                    table.rows[0].cells[6].innerHTML = `${diem / 2}`;
                                } else {
                                    table.rows[0].cells[6].innerHTML = `${diem}`;
                                }
                                table.rows[0].cells[7].innerHTML = `0`;
                                document.querySelector('#donggop-' + i).disabled = false;
                                var donggop = document.querySelector('#donggop-' + i).value;
                                table.rows[i].cells[4].innerHTML = `${total * donggop / 100}`;
                                table.rows[i].cells[5].innerHTML = `${(total * donggop / 100) * 0.9}`;
                                if (sltglh > 1) {
                                    table.rows[i].cells[6].innerHTML = `${diem / 2}`;
                                } else {
                                    table.rows[i].cells[6].innerHTML = `${diem}`;
                                }
                                table.rows[i].cells[7].innerHTML = `0`;

                            }
                            if (coquan == "(1) ngoài UEF, (2) UEF (20%)" || coquan == "Cơ quan công tác ngoài UEF (0%)") {
                                document.querySelector('#donggop-' + i).disabled = false;
                                table.rows[0].cells[4].innerHTML = `${total / 2 * donggoptgc / 100}`;
                                table.rows[0].cells[5].innerHTML = `${(total / 2 * donggoptgc / 100) * 0.9}`;
                                if (sltglh > 1) {
                                    table.rows[0].cells[6].innerHTML = `${diem / 2}`;
                                } else {
                                    table.rows[0].cells[6].innerHTML = `${diem}`;
                                }
                                table.rows[0].cells[7].innerHTML = `0`;
                                var donggop = document.querySelector('#donggop-' + i).value;
                                table.rows[1].cells[4].innerHTML = `${total / 2 * donggop / 100}`;
                                table.rows[1].cells[5].innerHTML = `${(total / 2 * donggop / 100) * 0.9}`;
                                if (sltglh > 1) {
                                    table.rows[1].cells[6].innerHTML = `${diem / 2}`;
                                } else {
                                    table.rows[1].cells[6].innerHTML = `${diem}`;
                                }
                                table.rows[1].cells[7].innerHTML = `0`;
                            } if (coquan == "(1) UEF – (2) ngoài UEF (80%)") {
                                table.rows[0].cells[4].innerHTML = `${total / 2 * donggoptgc / 100}`;
                                table.rows[0].cells[5].innerHTML = `${(total / 2 * donggoptgc / 100) * 0.9}`;
                                if (sltglh > 1) {
                                    table.rows[0].cells[6].innerHTML = `${diem / 2}`;
                                } else {
                                    table.rows[0].cells[6].innerHTML = `${diem}`;
                                }
                                table.rows[0].cells[7].innerHTML = `0`;
                                document.querySelector('#donggop-' + i).disabled = false;
                                var donggop = document.querySelector('#donggop-' + i).value;
                                table.rows[i].cells[4].innerHTML = `${total / 2 * donggop / 100}`;
                                table.rows[i].cells[5].innerHTML = `${(total / 2 * donggop / 100) * 0.9}`;
                                if (sltglh > 1) {
                                    table.rows[i].cells[6].innerHTML = `${diem / 2}`;
                                } else {
                                    table.rows[i].cells[6].innerHTML = `${diem}`;

                                }
                                table.rows[i].cells[7].innerHTML = `0`;
                            }
                        }
                        if (texttgc == "Cơ quan công tác duy nhất UEF (100%)") {
                            var donggoptgc = Number(document.querySelector('#donggop-0').value);
                            table.rows[0].cells[4].innerHTML = `${total * donggoptgc / 100}`;
                            table.rows[0].cells[5].innerHTML = `${(total * donggoptgc / 100) * 0.9}`;
                            table.rows[0].cells[6].innerHTML = `${diem / 2}`;
                            table.rows[0].cells[7].innerHTML = `0`;
                            if (coquan == "Cơ quan công tác duy nhất UEF (100%)") {
                                document.querySelector('#donggop-' + i).disabled = false;
                                table.rows[0].cells[4].innerHTML = `${total * donggoptgc / 100}`;
                                table.rows[0].cells[5].innerHTML = `${(total * donggoptgc / 100) * 0.9}`;
                                table.rows[0].cells[6].innerHTML = `${diem / 2}`;
                                table.rows[0].cells[7].innerHTML = `0`;
                                var donggop = document.querySelector('#donggop-' + i).value;
                                table.rows[i].cells[4].innerHTML = `${total * donggop / 100}`;
                                table.rows[i].cells[5].innerHTML = `${(total * donggop / 100) * 0.9}`;
                                if (sltglh > 1) {
                                    table.rows[i].cells[6].innerHTML = `${diem / 2}`;
                                } else {
                                    table.rows[i].cells[6].innerHTML = `${diem / 2}`;
                                }
                                table.rows[i].cells[7].innerHTML = `0`;

                            } if (coquan == "(1) ngoài UEF, (2) UEF (20%)" || coquan == "Cơ quan công tác ngoài UEF (0%)") {
                                table.rows[i].cells[4].innerHTML = `${total * donggop / 100}`;
                                table.rows[i].cells[5].innerHTML = `${total * donggop / 100 * 0.9}`;
                                if (sltglh > 1) {
                                    table.rows[i].cells[6].innerHTML = `0`;
                                } else {
                                    table.rows[i].cells[6].innerHTML = `0`;
                                }
                                table.rows[i].cells[7].innerHTML = `0`;
                            } if (coquan == "(1) UEF – (2) ngoài UEF (80%)") {
                                document.querySelector('#donggop-' + i).disabled = false;
                                var donggop = document.querySelector('#donggop-' + i).value;
                                table.rows[i].cells[4].innerHTML = `${total * donggop / 100}`;
                                table.rows[i].cells[5].innerHTML = `${(total * donggop / 100) * 0.9}`;
                                if (sltglh > 1) {
                                    table.rows[i].cells[6].innerHTML = `${diem / 2}`;
                                } else {
                                    table.rows[i].cells[6].innerHTML = `${diem / 2}`;
                                }
                                table.rows[i].cells[7].innerHTML = `0`;
                            }
                        }
                    }
                }
                ////// có 1 tác giả chính
                if (valuerank == "Nghiên cứu viên 1" && valueloaihinh == "Nghiên cứu mạnh" && sltg == 1) {
                    for (let i = 0; i < sltg; i++) {
                        trtable += `<tr>
                                                                            <td>${i + 1}</td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                        </tr>`;
                    }
                    table.innerHTML = trtable;
                    for (let i = 0; i < sltg; i++) {
                        var tacgia = document.querySelector('#inp-username-id-mail-' + i).value;
                        table.rows[i].cells[1].innerHTML = tacgia;
                    }
                    for (let i = 0; i < sltg; i++) {
                        var optionscongtac = document.querySelector('#coquancongtac-' + i);
                        var textcongtac = optionscongtac.options[optionscongtac.selectedIndex].textContent;
                        table.rows[i].cells[2].innerHTML = textcongtac;
                    } for (let i = 0; i < sltg; i++) {
                        var optionstg = document.querySelector('#tg-' + i);
                        var texttg = optionstg.options[optionstg.selectedIndex].textContent;
                        table.rows[i].cells[3].innerHTML = texttg;
                    }

                    for (let i = 0; i < sltg; i++) {

                        if (table.rows[0].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)") {
                            table.rows[0].cells[4].innerHTML = `${((total))}`;
                            table.rows[0].cells[5].innerHTML = `${(((total))) * 0.9}`;
                            table.rows[0].cells[6].innerHTML = `${diem}`;
                            table.rows[0].cells[7].innerHTML = `0`;
                        } else if (table.rows[0].cells[2].textContent == "(1) UEF – (2) ngoài UEF (80%)") {
                            table.rows[0].cells[4].innerHTML = `${((total / 2))}`;
                            table.rows[0].cells[5].innerHTML = `${(((total / 2))) * 0.9}`;
                            table.rows[0].cells[6].innerHTML = `${diem}`;
                            table.rows[0].cells[7].innerHTML = `0`;
                        } else {
                            table.rows[0].cells[4].innerHTML = `0`;
                            table.rows[0].cells[5].innerHTML = `0`;
                            table.rows[0].cells[6].innerHTML = `0`;
                            table.rows[0].cells[7].innerHTML = `0`;
                        }

                    }

                }
                ///// 1 chính, 1 phụ hoặc 1 chính 1 liên hệ

                if (valuerank == "Nghiên cứu viên 1" && valueloaihinh == "Nghiên cứu mạnh" && sltg == 2 && sltgc == 1 && sltgp == 1) {
                    for (let i = 0; i < sltg; i++) {
                        trtable += `<tr>
                                                                            <td>${i + 1}</td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                        </tr>`;
                    }
                    table.innerHTML = trtable;
                    for (let i = 0; i < sltg; i++) {
                        var tacgia = document.querySelector('#inp-username-id-mail-' + i).value;
                        table.rows[i].cells[1].innerHTML = tacgia;
                    }
                    for (let i = 0; i < sltg; i++) {
                        var optionscongtac = document.querySelector('#coquancongtac-' + i);
                        var textcongtac = optionscongtac.options[optionscongtac.selectedIndex].textContent;
                        table.rows[i].cells[2].innerHTML = textcongtac;
                    } for (let i = 0; i < sltg; i++) {
                        var optionstg = document.querySelector('#tg-' + i);
                        var texttg = optionstg.options[optionstg.selectedIndex].textContent;
                        table.rows[i].cells[3].innerHTML = texttg;
                    }
                    if (sltg == 2) {
                        for (let i = 0; i < sltg; i++) {

                            var donggop = Number(document.querySelector('#donggop-' + i).value);
                            var optionscongtac = document.querySelector('#coquancongtac-' + 0);
                            var coquan = optionscongtac.options[optionscongtac.selectedIndex].textContent;
                            var donggoptgc = Number(document.querySelector('#donggop-0').value);

                            if (coquan == "(1) ngoài UEF, (2) UEF (20%)" || coquan == "Cơ quan công tác ngoài UEF (0%)") {
                                if (table.rows[1].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)") {
                                    table.rows[0].cells[4].innerHTML = `${((total)) * (donggoptgc / 100)}`;
                                    table.rows[0].cells[5].innerHTML = `${(((total)) * (donggoptgc / 100)) * 0.9}`;
                                    table.rows[0].cells[6].innerHTML = `0`;
                                    table.rows[0].cells[7].innerHTML = `0`;
                                    table.rows[1].cells[4].innerHTML = `${((total)) * (donggop / 100)}`;
                                    table.rows[1].cells[5].innerHTML = `${(((total)) * (donggop / 100)) * 0.9}`;
                                    table.rows[1].cells[6].innerHTML = `0`;
                                    table.rows[1].cells[7].innerHTML = `0`;
                                } else if (table.rows[1].cells[2].textContent == "(1) UEF – (2) ngoài UEF (80%)") {
                                    table.rows[0].cells[4].innerHTML = `${((total / 2)) * (donggoptgc / 100)}`;
                                    table.rows[0].cells[5].innerHTML = `${(((total / 2)) * (donggop / 100)) * 0.9}`;
                                    table.rows[0].cells[6].innerHTML = `0`;
                                    table.rows[0].cells[7].innerHTML = `0`;
                                    table.rows[1].cells[4].innerHTML = `${((total / 2)) * (donggop / 100)}`;
                                    table.rows[1].cells[5].innerHTML = `${(((total / 2)) * (donggop / 100)) * 0.9}`;
                                    table.rows[1].cells[6].innerHTML = `0`;
                                    table.rows[1].cells[7].innerHTML = `0`;
                                } else if (table.rows[1].cells[2].textContent == "(1) ngoài UEF, (2) UEF (20%)" || table.rows[1].cells[2].textContent == "Cơ quan công tác ngoài UEF (0%)") {
                                    table.rows[0].cells[4].innerHTML = `0`;
                                    table.rows[0].cells[5].innerHTML = `0`;
                                    table.rows[0].cells[6].innerHTML = `0`;
                                    table.rows[0].cells[7].innerHTML = `0`;
                                    table.rows[1].cells[4].innerHTML = `0`;
                                    table.rows[1].cells[5].innerHTML = `0`;
                                    table.rows[1].cells[6].innerHTML = `0`;
                                    table.rows[1].cells[7].innerHTML = `0`;

                                }

                            } if (coquan == "(1) UEF – (2) ngoài UEF (80%)") {
                                table.rows[i].cells[4].innerHTML = `${((total / 2)) * (donggop / 100)}`;
                                table.rows[i].cells[5].innerHTML = `${(((total / 2)) * (donggop / 100)) * 0.9}`;
                                table.rows[i].cells[6].innerHTML = `${diem / 2}`;
                                table.rows[i].cells[7].innerHTML = `0`;
                                var donggoptgc = Number(document.querySelector('#donggop-0').value);

                                if (table.rows[1].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)") {
                                    table.rows[1].cells[4].innerHTML = `${((total)) * (donggop / 100)}`;
                                    table.rows[1].cells[5].innerHTML = `${(((total)) * (donggop / 100)) * 0.9}`;
                                    table.rows[1].cells[6].innerHTML = `0`;
                                    table.rows[1].cells[7].innerHTML = `0`;
                                    table.rows[0].cells[4].innerHTML = `${((total)) * (donggoptgc / 100)}`;
                                    table.rows[0].cells[5].innerHTML = `${(((total)) * (donggoptgc / 100)) * 0.9}`;
                                    table.rows[0].cells[6].innerHTML = `${diem / 2}`;
                                    table.rows[0].cells[7].innerHTML = `0`;
                                }

                            } else if (coquan == "Cơ quan công tác duy nhất UEF (100%)") {
                                table.rows[i].cells[4].innerHTML = `${(total) * (donggop / 100)}`;
                                table.rows[i].cells[5].innerHTML = `${((total)) * (donggop / 100) * 0.9}`;
                                table.rows[i].cells[6].innerHTML = `${diem / 2}`;
                                table.rows[i].cells[7].innerHTML = `0`;
                            }
                        }

                    }
                }
                ///// nhiều hơn 3 tác giả: 1 chính, 1 phụ, 1 liên hệ

                if (valuerank == "Nghiên cứu viên 1" && valueloaihinh == "Nghiên cứu mạnh" && sltgc > 0 && sltglh == 1 && sltgp > 1 && sltg > 2) {
                    for (let i = 0; i < sltg; i++) {
                        trtable += `<tr>
                                                                            <td>${i + 1}</td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                        </tr>`;
                    }
                    table.innerHTML = trtable;
                    for (let i = 0; i < sltg; i++) {
                        var tacgia = document.querySelector('#inp-username-id-mail-' + i).value;
                        table.rows[i].cells[1].innerHTML = tacgia;
                    }
                    for (let i = 0; i < sltg; i++) {
                        var optionscongtac = document.querySelector('#coquancongtac-' + i);
                        var textcongtac = optionscongtac.options[optionscongtac.selectedIndex].textContent;
                        table.rows[i].cells[2].innerHTML = textcongtac;
                    } for (let i = 0; i < sltg; i++) {
                        var optionstg = document.querySelector('#tg-' + i);
                        var texttg = optionstg.options[optionstg.selectedIndex].textContent;
                        table.rows[i].cells[3].innerHTML = texttg;
                    }
                    if (table.rows[0].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)") {
                        for (let j = 0; j < sltg; j++) {
                            if (table.rows[j].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)") {
                                for (let k = 0; k < sltg; k++) {
                                    var donggoptgc = document.querySelector('#donggop-' + k).value;
                                    table.rows[k].cells[4].innerHTML = `${total / sltglh * donggoptgc / 100}`;
                                    table.rows[k].cells[5].innerHTML = `${total / sltglh * donggoptgc / 100 * 0.9}`;
                                    if (table.rows[k].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)" || table.rows[k].cells[2].textContent == "(1) UEF – (2) ngoài UEF (80%)") {
                                        table.rows[k].cells[6].innerHTML = `${diem / 2}`;
                                    } else {
                                        table.rows[k].cells[6].innerHTML = `0`;
                                    }
                                    table.rows[k].cells[7].innerHTML = `0`;
                                }
                                break;
                            }
                            if (table.rows[j].cells[2].textContent == "(1) UEF – (2) ngoài UEF (80%)") {
                                var coquanhutech = 0;
                                for (let g = (j + 1); g < sltg; g++) {
                                    if (table.rows[g].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)") {
                                        coquanhutech += 1;
                                    }
                                }
                                if (coquanhutech < 1) {
                                    for (let k = 0; k < sltg; k++) {
                                        var donggoptgc = document.querySelector('#donggop-' + k).value;
                                        table.rows[k].cells[4].innerHTML = `${total / 2 / sltglh * donggoptgc / 100}`;
                                        table.rows[k].cells[5].innerHTML = `${total / 2 / sltglh * donggoptgc / 100 * 0.9}`;
                                        if (table.rows[k].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)" || table.rows[k].cells[2].textContent == "(1) UEF – (2) ngoài UEF (80%)") {
                                            table.rows[k].cells[6].innerHTML = `${diem / 2}`;
                                        } else {
                                            table.rows[k].cells[6].innerHTML = `0`;
                                        }
                                        table.rows[k].cells[7].innerHTML = `0`;
                                    }
                                    break;
                                }
                            } else {
                                for (let j = 1; j < (sltg - sltglh); j++) {
                                    if (table.rows[j].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)") {
                                        for (let k = 0; k < sltg; k++) {
                                            var donggoptgc = document.querySelector('#donggop-' + k).value;
                                            table.rows[k].cells[4].innerHTML = `${total / 4 * donggoptgc / 100}`;
                                            table.rows[k].cells[5].innerHTML = `${total / 4 * donggoptgc / 100 * 0.9}`;
                                            if (table.rows[k].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)" || table.rows[k].cells[2].textContent == "(1) UEF – (2) ngoài UEF (80%)") {
                                                table.rows[k].cells[6].innerHTML = `${diem / 2}`;
                                            } else {
                                                table.rows[k].cells[6].innerHTML = `0`;
                                            }
                                            table.rows[k].cells[7].innerHTML = `0`;
                                        }
                                        break;
                                    }
                                    if (table.rows[j].cells[2].textContent == "(1) UEF – (2) ngoài UEF (80%)") {
                                        var coquanhutech = 0;
                                        for (let g = (j); g < sltg; g++) {
                                            if (table.rows[g].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)") {
                                                coquanhutech += 1;
                                            }
                                        }
                                        if (coquanhutech < 1) {
                                            for (let k = 0; k < sltg; k++) {
                                                var donggoptgc = document.querySelector('#donggop-' + k).value;
                                                table.rows[k].cells[4].innerHTML = `${total / 4 / 2 * donggoptgc / 100}`;
                                                table.rows[k].cells[5].innerHTML = `${total / 4 / 2 * donggoptgc / 100 * 0.9}`;
                                                if (table.rows[k].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)" || table.rows[k].cells[2].textContent == "(1) UEF – (2) ngoài UEF (80%)") {
                                                    table.rows[k].cells[6].innerHTML = `${diem / 2}`;
                                                } else {
                                                    table.rows[k].cells[6].innerHTML = `0`;
                                                }
                                                table.rows[k].cells[7].innerHTML = `0`;
                                            }
                                            break;
                                        }
                                    } else {
                                        for (let j = 2; j < (sltg - sltglh); j++) {
                                            if (table.rows[j].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)") {
                                                for (let k = 0; k < sltg; k++) {
                                                    var donggoptgc = document.querySelector('#donggop-' + k).value;
                                                    table.rows[k].cells[4].innerHTML = `${total / 4 * donggoptgc / 100}`;
                                                    table.rows[k].cells[5].innerHTML = `${total / 4 * donggoptgc / 100 * 0.9}`;
                                                    if (table.rows[k].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)" || table.rows[k].cells[2].textContent == "(1) UEF – (2) ngoài UEF (80%)") {
                                                        table.rows[k].cells[6].innerHTML = `${diem / 2}`;
                                                    } else {
                                                        table.rows[k].cells[6].innerHTML = `0`;
                                                    }
                                                    table.rows[k].cells[7].innerHTML = `0`;
                                                }
                                                break;
                                            }
                                            if (table.rows[j].cells[2].textContent == "(1) UEF – (2) ngoài UEF (80%)") {
                                                var coquanhutech = 0;
                                                for (let g = (j); g < sltg; g++) {
                                                    if (table.rows[g].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)") {
                                                        coquanhutech += 1;
                                                    }
                                                }
                                                if (coquanhutech < 1) {
                                                    for (let k = 0; k < sltg; k++) {
                                                        var donggoptgc = document.querySelector('#donggop-' + k).value;
                                                        table.rows[k].cells[4].innerHTML = `${total / 4 / 2 * donggoptgc / 100}`;
                                                        table.rows[k].cells[5].innerHTML = `${total / 4 / 2 * donggoptgc / 100 * 0.9}`;
                                                        if (table.rows[k].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)" || table.rows[k].cells[2].textContent == "(1) UEF – (2) ngoài UEF (80%)") {
                                                            table.rows[k].cells[6].innerHTML = `${diem / 2}`;
                                                        } else {
                                                            table.rows[k].cells[6].innerHTML = `0`;
                                                        }
                                                        table.rows[k].cells[7].innerHTML = `0`;
                                                    }
                                                    break;
                                                }
                                            } else {
                                                for (let k = 0; k < sltg; k++) {

                                                    table.rows[k].cells[4].innerHTML = `0`;
                                                    table.rows[k].cells[5].innerHTML = `0`;
                                                    if (table.rows[k].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)" || table.rows[k].cells[2].textContent == "(1) UEF – (2) ngoài UEF (80%)") {
                                                        table.rows[k].cells[6].innerHTML = `0`;
                                                    } else {
                                                        table.rows[k].cells[6].innerHTML = `0`;
                                                    }
                                                    table.rows[k].cells[7].innerHTML = `0`;
                                                }
                                            }
                                        }
                                        break;
                                    }

                                }
                            }
                        }
                    }
                    ////////////
                    if (table.rows[0].cells[2].textContent == "(1) UEF – (2) ngoài UEF (80%)") {
                        if (table.rows[sltg - 1].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)") {
                            for (let j = 0; j < sltg; j++) {
                                if (table.rows[j].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)") {
                                    for (let k = 0; k < sltg; k++) {
                                        var donggoptgc = document.querySelector('#donggop-' + k).value;
                                        table.rows[k].cells[4].innerHTML = `${total / sltglh * donggoptgc / 100}`;
                                        table.rows[k].cells[5].innerHTML = `${total / sltglh * donggoptgc / 100 * 0.9}`;
                                        if (table.rows[k].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)" || table.rows[k].cells[2].textContent == "(1) UEF – (2) ngoài UEF (80%)") {
                                            table.rows[k].cells[6].innerHTML = `${diem / 2}`;
                                        } else {
                                            table.rows[k].cells[6].innerHTML = `0`;
                                        }
                                        table.rows[k].cells[7].innerHTML = `0`;
                                    }
                                    break;
                                }
                                if (table.rows[j].cells[2].textContent == "(1) UEF – (2) ngoài UEF (80%)") {
                                    var coquanhutech = 0;
                                    for (let g = (j + 1); g < sltg; g++) {
                                        if (table.rows[g].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)") {
                                            coquanhutech += 1;
                                        }
                                    }
                                    if (coquanhutech < 1) {
                                        for (let k = 0; k < sltg; k++) {
                                            var donggoptgc = document.querySelector('#donggop-' + k).value;
                                            table.rows[k].cells[4].innerHTML = `${total / 2 / sltglh * donggoptgc / 100}`;
                                            table.rows[k].cells[5].innerHTML = `${total / 2 / sltglh * donggoptgc / 100 * 0.9}`;
                                            if (table.rows[k].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)" || table.rows[k].cells[2].textContent == "(1) UEF – (2) ngoài UEF (80%)") {
                                                table.rows[k].cells[6].innerHTML = `${diem / 2}`;
                                            } else {
                                                table.rows[k].cells[6].innerHTML = `0`;
                                            }
                                            table.rows[k].cells[7].innerHTML = `0`;
                                        }
                                        break;
                                    }
                                } else {
                                    for (let j = 1; j < (sltg - sltglh); j++) {
                                        if (table.rows[j].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)") {
                                            for (let k = 0; k < sltg; k++) {
                                                var donggoptgc = document.querySelector('#donggop-' + k).value;
                                                table.rows[k].cells[4].innerHTML = `${total / 4 * donggoptgc / 100}`;
                                                table.rows[k].cells[5].innerHTML = `${total / 4 * donggoptgc / 100 * 0.9}`;
                                                if (table.rows[k].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)" || table.rows[k].cells[2].textContent == "(1) UEF – (2) ngoài UEF (80%)") {
                                                    table.rows[k].cells[6].innerHTML = `${diem / 2}`;
                                                } else {
                                                    table.rows[k].cells[6].innerHTML = `0`;
                                                }
                                                table.rows[k].cells[7].innerHTML = `0`;
                                            }
                                            break;
                                        }
                                        if (table.rows[j].cells[2].textContent == "(1) UEF – (2) ngoài UEF (80%)") {
                                            var coquanhutech = 0;
                                            for (let g = (j); g < sltg; g++) {
                                                if (table.rows[g].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)") {
                                                    coquanhutech += 1;
                                                }
                                            }
                                            if (coquanhutech < 1) {
                                                for (let k = 0; k < sltg; k++) {
                                                    var donggoptgc = document.querySelector('#donggop-' + k).value;
                                                    table.rows[k].cells[4].innerHTML = `${total / 4 / 2 * donggoptgc / 100}`;
                                                    table.rows[k].cells[5].innerHTML = `${total / 4 / 2 * donggoptgc / 100 * 0.9}`;
                                                    if (table.rows[k].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)" || table.rows[k].cells[2].textContent == "(1) UEF – (2) ngoài UEF (80%)") {
                                                        table.rows[k].cells[6].innerHTML = `${diem / 2}`;
                                                    } else {
                                                        table.rows[k].cells[6].innerHTML = `0`;
                                                    }
                                                    table.rows[k].cells[7].innerHTML = `0`;
                                                }
                                                break;
                                            }
                                        } else {
                                            for (let j = 2; j < (sltg - sltglh); j++) {
                                                if (table.rows[j].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)") {
                                                    for (let k = 0; k < sltg; k++) {
                                                        var donggoptgc = document.querySelector('#donggop-' + k).value;
                                                        table.rows[k].cells[4].innerHTML = `${total / 4 * donggoptgc / 100}`;
                                                        table.rows[k].cells[5].innerHTML = `${total / 4 * donggoptgc / 100 * 0.9}`;
                                                        if (table.rows[k].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)" || table.rows[k].cells[2].textContent == "(1) UEF – (2) ngoài UEF (80%)") {
                                                            table.rows[k].cells[6].innerHTML = `${diem / 2}`;
                                                        } else {
                                                            table.rows[k].cells[6].innerHTML = `0`;
                                                        }
                                                        table.rows[k].cells[7].innerHTML = `0`;
                                                    }
                                                    break;
                                                }
                                                if (table.rows[j].cells[2].textContent == "(1) UEF – (2) ngoài UEF (80%)") {
                                                    var coquanhutech = 0;
                                                    for (let g = (j); g < sltg; g++) {
                                                        if (table.rows[g].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)") {
                                                            coquanhutech += 1;
                                                        }
                                                    }
                                                    if (coquanhutech < 1) {
                                                        for (let k = 0; k < sltg; k++) {
                                                            var donggoptgc = document.querySelector('#donggop-' + k).value;
                                                            table.rows[k].cells[4].innerHTML = `${total / 4 / 2 * donggoptgc / 100}`;
                                                            table.rows[k].cells[5].innerHTML = `${total / 4 / 2 * donggoptgc / 100 * 0.9}`;
                                                            if (table.rows[k].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)" || table.rows[k].cells[2].textContent == "(1) UEF – (2) ngoài UEF (80%)") {
                                                                table.rows[k].cells[6].innerHTML = `${diem / 2}`;
                                                            } else {
                                                                table.rows[k].cells[6].innerHTML = `0`;
                                                            }
                                                            table.rows[k].cells[7].innerHTML = `0`;
                                                        }
                                                        break;
                                                    }
                                                } else {
                                                    for (let k = 0; k < sltg; k++) {

                                                        table.rows[k].cells[4].innerHTML = `0`;
                                                        table.rows[k].cells[5].innerHTML = `0`;
                                                        if (table.rows[k].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)" || table.rows[k].cells[2].textContent == "(1) UEF – (2) ngoài UEF (80%)") {
                                                            table.rows[k].cells[6].innerHTML = `0`;
                                                        } else {
                                                            table.rows[k].cells[6].innerHTML = `0`;
                                                        }
                                                        table.rows[k].cells[7].innerHTML = `0`;
                                                    }
                                                }
                                            }
                                            break;
                                        }

                                    }
                                }
                            }
                        }
                        if (table.rows[sltg - 1].cells[2].textContent != "Cơ quan công tác duy nhất UEF (100%)") {
                            if (table.rows[0].cells[sltg - 1].textContent != "Cơ quan công tác duy nhất UEF (100%)") {
                                for (let j = 0; j < sltg; j++) {
                                    if (table.rows[j].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)") {
                                        for (let k = 0; k < sltg; k++) {
                                            var donggoptgc = document.querySelector('#donggop-' + k).value;
                                            table.rows[k].cells[4].innerHTML = `${total / 2 * donggoptgc / 100}`;
                                            table.rows[k].cells[5].innerHTML = `${total / 2 * donggoptgc / 100 * 0.9}`;
                                            if (table.rows[k].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)" || table.rows[k].cells[2].textContent == "(1) UEF – (2) ngoài UEF (80%)") {
                                                table.rows[k].cells[6].innerHTML = `${diem / 2}`;
                                            } else {
                                                table.rows[k].cells[6].innerHTML = `0`;
                                            }
                                            table.rows[k].cells[7].innerHTML = `0`;
                                        }
                                        break;
                                    }
                                    if (table.rows[j].cells[2].textContent == "(1) UEF – (2) ngoài UEF (80%)") {
                                        var coquanhutech = 0;
                                        for (let g = (j + 1); g < sltg; g++) {
                                            if (table.rows[g].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)") {
                                                coquanhutech += 1;
                                            }
                                        }
                                        if (coquanhutech < 1) {
                                            for (let k = 0; k < sltg; k++) {
                                                var donggoptgc = document.querySelector('#donggop-' + k).value;
                                                table.rows[k].cells[4].innerHTML = `${total / 2 * donggoptgc / 100}`;
                                                table.rows[k].cells[5].innerHTML = `${total / 2 * donggoptgc / 100 * 0.9}`;
                                                if (table.rows[k].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)" || table.rows[k].cells[2].textContent == "(1) UEF – (2) ngoài UEF (80%)") {
                                                    table.rows[k].cells[6].innerHTML = `${diem / 2}`;
                                                } else {
                                                    table.rows[k].cells[6].innerHTML = `0`;
                                                }
                                                table.rows[k].cells[7].innerHTML = `0`;
                                            }
                                            break;
                                        }
                                    } else {
                                        for (let j = 1; j < (sltg - sltglh); j++) {
                                            if (table.rows[j].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)") {
                                                for (let k = 0; k < sltg; k++) {
                                                    var donggoptgc = document.querySelector('#donggop-' + k).value;
                                                    table.rows[k].cells[4].innerHTML = `${total / 2 * donggoptgc / 100}`;
                                                    table.rows[k].cells[5].innerHTML = `${total / 2 * donggoptgc / 100 * 0.9}`;
                                                    if (table.rows[k].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)" || table.rows[k].cells[2].textContent == "(1) UEF – (2) ngoài UEF (80%)") {
                                                        table.rows[k].cells[6].innerHTML = `${diem / 2}`;
                                                    } else {
                                                        table.rows[k].cells[6].innerHTML = `0`;
                                                    }
                                                    table.rows[k].cells[7].innerHTML = `0`;
                                                }
                                                break;
                                            }
                                            if (table.rows[j].cells[2].textContent == "(1) UEF – (2) ngoài UEF (80%)") {
                                                var coquanhutech = 0;
                                                for (let g = (j); g < sltg; g++) {
                                                    if (table.rows[g].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)") {
                                                        coquanhutech += 1;
                                                    }
                                                }
                                                if (coquanhutech < 1) {
                                                    for (let k = 0; k < sltg; k++) {
                                                        var donggoptgc = document.querySelector('#donggop-' + k).value;
                                                        table.rows[k].cells[4].innerHTML = `${total / 2 * donggoptgc / 100}`;
                                                        table.rows[k].cells[5].innerHTML = `${total / 2 * donggoptgc / 100 * 0.9}`;
                                                        if (table.rows[k].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)" || table.rows[k].cells[2].textContent == "(1) UEF – (2) ngoài UEF (80%)") {
                                                            table.rows[k].cells[6].innerHTML = `${diem / 2}`;
                                                        } else {
                                                            table.rows[k].cells[6].innerHTML = `0`;
                                                        }
                                                        table.rows[k].cells[7].innerHTML = `0`;
                                                    }
                                                    break;
                                                }
                                            } else {
                                                for (let j = 2; j < (sltg - sltglh); j++) {
                                                    if (table.rows[j].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)") {
                                                        for (let k = 0; k < sltg; k++) {
                                                            var donggoptgc = document.querySelector('#donggop-' + k).value;
                                                            table.rows[k].cells[4].innerHTML = `${total / 2 * donggoptgc / 100}`;
                                                            table.rows[k].cells[5].innerHTML = `${total / 2 * donggoptgc / 100 * 0.9}`;
                                                            if (table.rows[k].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)" || table.rows[k].cells[2].textContent == "(1) UEF – (2) ngoài UEF (80%)") {
                                                                table.rows[k].cells[6].innerHTML = `${diem / 2}`;
                                                            } else {
                                                                table.rows[k].cells[6].innerHTML = `0`;
                                                            }
                                                            table.rows[k].cells[7].innerHTML = `0`;
                                                        }
                                                        break;
                                                    }
                                                    if (table.rows[j].cells[2].textContent == "(1) UEF – (2) ngoài UEF (80%)") {
                                                        var coquanhutech = 0;
                                                        for (let g = (j); g < sltg; g++) {
                                                            if (table.rows[g].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)") {
                                                                coquanhutech += 1;
                                                            }
                                                        }
                                                        if (coquanhutech < 1) {
                                                            for (let k = 0; k < sltg; k++) {
                                                                var donggoptgc = document.querySelector('#donggop-' + k).value;
                                                                table.rows[k].cells[4].innerHTML = `${total / 2 * donggoptgc / 100}`;
                                                                table.rows[k].cells[5].innerHTML = `${total / 2 * donggoptgc / 100 * 0.9}`;
                                                                if (table.rows[k].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)" || table.rows[k].cells[2].textContent == "(1) UEF – (2) ngoài UEF (80%)") {
                                                                    table.rows[k].cells[6].innerHTML = `${diem / 2}`;
                                                                } else {
                                                                    table.rows[k].cells[6].innerHTML = `0`;
                                                                }
                                                                table.rows[k].cells[7].innerHTML = `0`;
                                                            }
                                                            break;
                                                        }
                                                    } else {
                                                        for (let k = 0; k < sltg; k++) {

                                                            table.rows[k].cells[4].innerHTML = `0`;
                                                            table.rows[k].cells[5].innerHTML = `0`;
                                                            if (table.rows[k].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)" || table.rows[k].cells[2].textContent == "(1) UEF – (2) ngoài UEF (80%)") {
                                                                table.rows[k].cells[6].innerHTML = `0`;
                                                            } else {
                                                                table.rows[k].cells[6].innerHTML = `0`;
                                                            }
                                                            table.rows[k].cells[7].innerHTML = `0`;
                                                        }
                                                    }
                                                }
                                                break;
                                            }

                                        }
                                    }
                                }
                            }
                        }
                    }

                    ////////////
                    if (table.rows[0].cells[2].textContent != "(1) UEF – (2) ngoài UEF (80%)" && table.rows[0].cells[2].textContent != "Cơ quan công tác duy nhất UEF (100%)") {
                        if (table.rows[sltg - 1].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)") {
                            for (let j = 0; j < sltg; j++) {
                                if (table.rows[j].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)") {
                                    for (let k = 0; k < sltg; k++) {
                                        var donggoptgc = document.querySelector('#donggop-' + k).value;
                                        table.rows[k].cells[4].innerHTML = `${total / sltglh * donggoptgc / 100}`;
                                        table.rows[k].cells[5].innerHTML = `${total / sltglh * donggoptgc / 100 * 0.9}`;
                                        if (table.rows[k].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)" || table.rows[k].cells[2].textContent == "(1) UEF – (2) ngoài UEF (80%)") {
                                            table.rows[k].cells[6].innerHTML = `${diem / 2}`;
                                        } else {
                                            table.rows[k].cells[6].innerHTML = `0`;
                                        }
                                        table.rows[k].cells[7].innerHTML = `0`;
                                    }
                                    break;
                                }
                                if (table.rows[j].cells[2].textContent == "(1) UEF – (2) ngoài UEF (80%)") {
                                    var coquanhutech = 0;
                                    for (let g = (j + 1); g < sltg; g++) {
                                        if (table.rows[g].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)") {
                                            coquanhutech += 1;
                                        }
                                    }
                                    if (coquanhutech < 1) {
                                        for (let k = 0; k < sltg; k++) {
                                            var donggoptgc = document.querySelector('#donggop-' + k).value;
                                            table.rows[k].cells[4].innerHTML = `${total / 2 / sltglh * donggoptgc / 100}`;
                                            table.rows[k].cells[5].innerHTML = `${total / 2 / sltglh * donggoptgc / 100 * 0.9}`;
                                            if (table.rows[k].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)" || table.rows[k].cells[2].textContent == "(1) UEF – (2) ngoài UEF (80%)") {
                                                table.rows[k].cells[6].innerHTML = `${diem / 2}`;
                                            } else {
                                                table.rows[k].cells[6].innerHTML = `0`;
                                            }
                                            table.rows[k].cells[7].innerHTML = `0`;
                                        }
                                        break;
                                    }
                                } else {
                                    for (let j = 1; j < (sltg - sltglh); j++) {
                                        if (table.rows[j].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)") {
                                            for (let k = 0; k < sltg; k++) {
                                                var donggoptgc = document.querySelector('#donggop-' + k).value;
                                                table.rows[k].cells[4].innerHTML = `${total / 4 * donggoptgc / 100}`;
                                                table.rows[k].cells[5].innerHTML = `${total / 4 * donggoptgc / 100 * 0.9}`;
                                                if (table.rows[k].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)" || table.rows[k].cells[2].textContent == "(1) UEF – (2) ngoài UEF (80%)") {
                                                    table.rows[k].cells[6].innerHTML = `${diem / 2}`;
                                                } else {
                                                    table.rows[k].cells[6].innerHTML = `0`;
                                                }
                                                table.rows[k].cells[7].innerHTML = `0`;
                                            }
                                            break;
                                        }
                                        if (table.rows[j].cells[2].textContent == "(1) UEF – (2) ngoài UEF (80%)") {
                                            var coquanhutech = 0;
                                            for (let g = (j); g < sltg; g++) {
                                                if (table.rows[g].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)") {
                                                    coquanhutech += 1;
                                                }
                                            }
                                            if (coquanhutech < 1) {
                                                for (let k = 0; k < sltg; k++) {
                                                    var donggoptgc = document.querySelector('#donggop-' + k).value;
                                                    table.rows[k].cells[4].innerHTML = `${total / 4 / 2 * donggoptgc / 100}`;
                                                    table.rows[k].cells[5].innerHTML = `${total / 4 / 2 * donggoptgc / 100 * 0.9}`;
                                                    if (table.rows[k].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)" || table.rows[k].cells[2].textContent == "(1) UEF – (2) ngoài UEF (80%)") {
                                                        table.rows[k].cells[6].innerHTML = `${diem / 2}`;
                                                    } else {
                                                        table.rows[k].cells[6].innerHTML = `0`;
                                                    }
                                                    table.rows[k].cells[7].innerHTML = `0`;
                                                }
                                                break;
                                            }
                                        } else {
                                            for (let j = 2; j < (sltg - sltglh); j++) {
                                                if (table.rows[j].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)") {
                                                    for (let k = 0; k < sltg; k++) {
                                                        var donggoptgc = document.querySelector('#donggop-' + k).value;
                                                        table.rows[k].cells[4].innerHTML = `${total / 4 * donggoptgc / 100}`;
                                                        table.rows[k].cells[5].innerHTML = `${total / 4 * donggoptgc / 100 * 0.9}`;
                                                        if (table.rows[k].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)" || table.rows[k].cells[2].textContent == "(1) UEF – (2) ngoài UEF (80%)") {
                                                            table.rows[k].cells[6].innerHTML = `${diem / 2}`;
                                                        } else {
                                                            table.rows[k].cells[6].innerHTML = `0`;
                                                        }
                                                        table.rows[k].cells[7].innerHTML = `0`;
                                                    }
                                                    break;
                                                }
                                                if (table.rows[j].cells[2].textContent == "(1) UEF – (2) ngoài UEF (80%)") {
                                                    var coquanhutech = 0;
                                                    for (let g = (j); g < sltg; g++) {
                                                        if (table.rows[g].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)") {
                                                            coquanhutech += 1;
                                                        }
                                                    }
                                                    if (coquanhutech < 1) {
                                                        for (let k = 0; k < sltg; k++) {
                                                            var donggoptgc = document.querySelector('#donggop-' + k).value;
                                                            table.rows[k].cells[4].innerHTML = `${total / 4 / 2 * donggoptgc / 100}`;
                                                            table.rows[k].cells[5].innerHTML = `${total / 4 / 2 * donggoptgc / 100 * 0.9}`;
                                                            if (table.rows[k].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)" || table.rows[k].cells[2].textContent == "(1) UEF – (2) ngoài UEF (80%)") {
                                                                table.rows[k].cells[6].innerHTML = `${diem / 2}`;
                                                            } else {
                                                                table.rows[k].cells[6].innerHTML = `0`;
                                                            }
                                                            table.rows[k].cells[7].innerHTML = `0`;
                                                        }
                                                        break;
                                                    }
                                                } else {
                                                    for (let k = 0; k < sltg; k++) {

                                                        table.rows[k].cells[4].innerHTML = `0`;
                                                        table.rows[k].cells[5].innerHTML = `0`;
                                                        if (table.rows[k].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)" || table.rows[k].cells[2].textContent == "(1) UEF – (2) ngoài UEF (80%)") {
                                                            table.rows[k].cells[6].innerHTML = `0`;
                                                        } else {
                                                            table.rows[k].cells[6].innerHTML = `0`;
                                                        }
                                                        table.rows[k].cells[7].innerHTML = `0`;
                                                    }
                                                }
                                            }
                                            break;
                                        }

                                    }
                                }
                            }
                        }
                        if (table.rows[sltg - 1].cells[2].textContent == "(1) UEF – (2) ngoài UEF (80%)") {
                            if (table.rows[0].cells[sltg - 1].textContent != "Cơ quan công tác duy nhất UEF (100%)") {
                                for (let j = 0; j < sltg; j++) {
                                    if (table.rows[j].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)") {
                                        for (let k = 0; k < sltg; k++) {
                                            var donggoptgc = document.querySelector('#donggop-' + k).value;
                                            table.rows[k].cells[4].innerHTML = `${total / 2 * donggoptgc / 100}`;
                                            table.rows[k].cells[5].innerHTML = `${total / 2 * donggoptgc / 100 * 0.9}`;
                                            if (table.rows[k].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)" || table.rows[k].cells[2].textContent == "(1) UEF – (2) ngoài UEF (80%)") {
                                                table.rows[k].cells[6].innerHTML = `${diem / 2}`;
                                            } else {
                                                table.rows[k].cells[6].innerHTML = `0`;
                                            }
                                            table.rows[k].cells[7].innerHTML = `0`;
                                        }
                                        break;
                                    }
                                    if (table.rows[j].cells[2].textContent == "(1) UEF – (2) ngoài UEF (80%)") {
                                        var coquanhutech = 0;
                                        for (let g = (j + 1); g < sltg; g++) {
                                            if (table.rows[g].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)") {
                                                coquanhutech += 1;
                                            }
                                        }
                                        if (coquanhutech < 1) {
                                            for (let k = 0; k < sltg; k++) {
                                                var donggoptgc = document.querySelector('#donggop-' + k).value;
                                                table.rows[k].cells[4].innerHTML = `${total / 2 * donggoptgc / 100}`;
                                                table.rows[k].cells[5].innerHTML = `${total / 2 * donggoptgc / 100 * 0.9}`;
                                                if (table.rows[k].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)" || table.rows[k].cells[2].textContent == "(1) UEF – (2) ngoài UEF (80%)") {
                                                    table.rows[k].cells[6].innerHTML = `${diem / 2}`;
                                                } else {
                                                    table.rows[k].cells[6].innerHTML = `0`;
                                                }
                                                table.rows[k].cells[7].innerHTML = `0`;
                                            }
                                            break;
                                        }
                                    } else {
                                        for (let j = 1; j < (sltg - sltglh); j++) {
                                            if (table.rows[j].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)") {
                                                for (let k = 0; k < sltg; k++) {
                                                    var donggoptgc = document.querySelector('#donggop-' + k).value;
                                                    table.rows[k].cells[4].innerHTML = `${total / 2 * donggoptgc / 100}`;
                                                    table.rows[k].cells[5].innerHTML = `${total / 2 * donggoptgc / 100 * 0.9}`;
                                                    if (table.rows[k].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)" || table.rows[k].cells[2].textContent == "(1) UEF – (2) ngoài UEF (80%)") {
                                                        table.rows[k].cells[6].innerHTML = `${diem / 2}`;
                                                    } else {
                                                        table.rows[k].cells[6].innerHTML = `0`;
                                                    }
                                                    table.rows[k].cells[7].innerHTML = `0`;
                                                }
                                                break;
                                            }
                                            if (table.rows[j].cells[2].textContent == "(1) UEF – (2) ngoài UEF (80%)") {
                                                var coquanhutech = 0;
                                                for (let g = (j); g < sltg; g++) {
                                                    if (table.rows[g].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)") {
                                                        coquanhutech += 1;
                                                    }
                                                }
                                                if (coquanhutech < 1) {
                                                    for (let k = 0; k < sltg; k++) {
                                                        var donggoptgc = document.querySelector('#donggop-' + k).value;
                                                        table.rows[k].cells[4].innerHTML = `${total / 2 * donggoptgc / 100}`;
                                                        table.rows[k].cells[5].innerHTML = `${total / 2 * donggoptgc / 100 * 0.9}`;
                                                        if (table.rows[k].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)" || table.rows[k].cells[2].textContent == "(1) UEF – (2) ngoài UEF (80%)") {
                                                            table.rows[k].cells[6].innerHTML = `${diem / 2}`;
                                                        } else {
                                                            table.rows[k].cells[6].innerHTML = `0`;
                                                        }
                                                        table.rows[k].cells[7].innerHTML = `0`;
                                                    }
                                                    break;
                                                }
                                            } else {
                                                for (let j = 2; j < (sltg - sltglh); j++) {
                                                    if (table.rows[j].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)") {
                                                        for (let k = 0; k < sltg; k++) {
                                                            var donggoptgc = document.querySelector('#donggop-' + k).value;
                                                            table.rows[k].cells[4].innerHTML = `${total / 2 * donggoptgc / 100}`;
                                                            table.rows[k].cells[5].innerHTML = `${total / 2 * donggoptgc / 100 * 0.9}`;
                                                            if (table.rows[k].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)" || table.rows[k].cells[2].textContent == "(1) UEF – (2) ngoài UEF (80%)") {
                                                                table.rows[k].cells[6].innerHTML = `${diem / 2}`;
                                                            } else {
                                                                table.rows[k].cells[6].innerHTML = `0`;
                                                            }
                                                            table.rows[k].cells[7].innerHTML = `0`;
                                                        }
                                                        break;
                                                    }
                                                    if (table.rows[j].cells[2].textContent == "(1) UEF – (2) ngoài UEF (80%)") {
                                                        var coquanhutech = 0;
                                                        for (let g = (j); g < sltg; g++) {
                                                            if (table.rows[g].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)") {
                                                                coquanhutech += 1;
                                                            }
                                                        }
                                                        if (coquanhutech < 1) {
                                                            for (let k = 0; k < sltg; k++) {
                                                                var donggoptgc = document.querySelector('#donggop-' + k).value;
                                                                table.rows[k].cells[4].innerHTML = `${total / 2 * donggoptgc / 100}`;
                                                                table.rows[k].cells[5].innerHTML = `${total / 2 * donggoptgc / 100 * 0.9}`;
                                                                if (table.rows[k].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)" || table.rows[k].cells[2].textContent == "(1) UEF – (2) ngoài UEF (80%)") {
                                                                    table.rows[k].cells[6].innerHTML = `${diem / 2}`;
                                                                } else {
                                                                    table.rows[k].cells[6].innerHTML = `0`;
                                                                }
                                                                table.rows[k].cells[7].innerHTML = `0`;
                                                            }
                                                            break;
                                                        }
                                                    } else {
                                                        for (let k = 0; k < sltg; k++) {

                                                            table.rows[k].cells[4].innerHTML = `0`;
                                                            table.rows[k].cells[5].innerHTML = `0`;
                                                            if (table.rows[k].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)" || table.rows[k].cells[2].textContent == "(1) UEF – (2) ngoài UEF (80%)") {
                                                                table.rows[k].cells[6].innerHTML = `0`;
                                                            } else {
                                                                table.rows[k].cells[6].innerHTML = `0`;
                                                            }
                                                            table.rows[k].cells[7].innerHTML = `0`;
                                                        }
                                                    }
                                                }
                                                break;
                                            }

                                        }
                                    }
                                }
                            }
                        }
                        if (table.rows[sltg - 1].cells[2].textContent != "(1) UEF – (2) ngoài UEF (80%)" && table.rows[sltg - 1].cells[2].textContent != "Cơ quan công tác duy nhất UEF (100%)") {
                            var hutech = 0;
                            var qt = 0;
                            var ngoai = 0;
                            for (let k = 1; k < sltg; k++) {
                                if (table.rows[k].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)") {
                                    hutech += 1;
                                }
                                if (table.rows[k].cells[2].textContent == "(1) UEF – (2) ngoài UEF (80%)") {
                                    qt += 1;

                                } else {
                                    ngoai += 1;
                                }

                            }
                            if (hutech > 0) {
                                for (let n = 0; n < sltg; n++) {
                                    var donggop = document.querySelector('#donggop-' + n).value;
                                    table.rows[n].cells[4].innerHTML = `${total / 4 * donggop / 100}`;
                                    table.rows[n].cells[5].innerHTML = `${total / 4 * donggop / 100 * 0.9}`;
                                    table.rows[n].cells[6].innerHTML = `${diem / 2}`;
                                    table.rows[n].cells[7].innerHTML = `0`;
                                }
                            } else if (hutech == 0 && qt > 0) {
                                for (let n = 0; n < sltg; n++) {
                                    var donggop = document.querySelector('#donggop-' + n).value;
                                    table.rows[n].cells[4].innerHTML = `${total / 8 * donggop / 100}`;
                                    table.rows[n].cells[5].innerHTML = `${total / 8 * donggop / 100 * 0.9}`;
                                    table.rows[n].cells[6].innerHTML = `${diem / 2}`;
                                    table.rows[n].cells[7].innerHTML = `0`;
                                }
                            } else if (hutech == 0 && qt == 0 && ngoai > 0) {
                                for (let n = 0; n < sltg; n++) {
                                    var donggop = document.querySelector('#donggop-' + n).value;
                                    table.rows[n].cells[4].innerHTML = `0`;
                                    table.rows[n].cells[5].innerHTML = `0`;
                                    table.rows[n].cells[6].innerHTML = `0`;
                                    table.rows[n].cells[7].innerHTML = `0`;
                                }
                            }
                        }

                    }
                    ////////////
                    else if (sltgc > 2 && sltgp > 0 && sltglh > 0) {
                        var tsltlh = 0;
                        var tglh = 0;
                        for (let i = 1; i < sltg; i++) {
                            var coquan = table.rows[i].cells[2].textContent;
                            var coquantgc = table.rows[0].cells[2].textContent;
                            if (coquantgc == "(1) UEF – (2) ngoài UEF (80%)" && table.rows[0].cells[3].textContent == "Tác giả chính") {
                                document.querySelector('#donggop-0').disabled = false;
                                if (table.rows[i].cells[3].textContent == "Tác giả liên hệ" && table.rows[i].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)") {
                                    var donggop = document.querySelector('#donggop-' + i).value;
                                    if (table.rows[i].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)") {
                                        tsltlh += 1;
                                    }
                                    if (tsltlh > 1 || tsltlh == 1) {
                                        for (let j = 0; j < sltg; j++) {
                                            var donggop = document.querySelector('#donggop-' + j).value;
                                            table.rows[j].cells[4].innerHTML = `${total * donggop / 100}`;
                                            table.rows[j].cells[5].innerHTML = `${total * donggop / 100 * 0.9}`;
                                            table.rows[j].cells[6].innerHTML = `${diem / 2}`;
                                            table.rows[j].cells[7].innerHTML = `0`;
                                        }
                                    }
                                    var donggoptgc = document.querySelector('#donggop-0').value;
                                    table.rows[0].cells[4].innerHTML = `${total * donggoptgc / 100}`;
                                    table.rows[0].cells[5].innerHTML = `${total * donggoptgc / 100 * 0.9}`;
                                    table.rows[0].cells[6].innerHTML = `${diem / 2}`;
                                    table.rows[0].cells[7].innerHTML = `0`;
                                    break;
                                }
                                else if (table.rows[i].cells[3].textContent == "Tác giả liên hệ" && table.rows[i].cells[2].textContent == "(1) UEF – (2) ngoài UEF (80%)" || table.rows[i].cells[2].textContent == "(1) ngoài UEF, (2) UEF (20%)" || table.rows[i].cells[2].textContent == "Cơ quan công tác ngoài UEF (0%)") {
                                    var donggop = document.querySelector('#donggop-' + i).value;
                                    table.rows[i].cells[4].innerHTML = `${total / 2 * donggop / 100}`;
                                    table.rows[i].cells[5].innerHTML = `${total / 2 * donggop / 100 * 0.9}`;
                                    table.rows[i].cells[6].innerHTML = `${diem / 2}`;
                                    table.rows[i].cells[7].innerHTML = `0`;
                                    for (let j = 1; j < (sltgp + 1); j++) {
                                        var donggop = document.querySelector('#donggop-' + j).value;

                                        if (table.rows[j].cells[2].textContent == "(1) ngoài UEF, (2) UEF (20%)" || table.rows[j].cells[2].textContent == "Cơ quan công tác ngoài UEF (0%)") {
                                            table.rows[j].cells[4].innerHTML = `${total / 2 * donggop / 100}`;
                                            table.rows[j].cells[5].innerHTML = `${total / 2 * donggop / 100 * 0.9}`;
                                            table.rows[j].cells[6].innerHTML = `0`;
                                            table.rows[j].cells[7].innerHTML = `0`;
                                        } else {
                                            table.rows[j].cells[4].innerHTML = `${total / 2 * donggop / 100}`;
                                            table.rows[j].cells[5].innerHTML = `${total / 2 * donggop / 100 * 0.9}`;
                                            table.rows[j].cells[6].innerHTML = `${diem / 2}`;
                                            table.rows[j].cells[7].innerHTML = `0`;
                                        }
                                    }
                                    for (let k = (sltgc + sltgp + 1); k < (sltg + 1); k++) {
                                        var donggop = document.querySelector('#donggop-' + (k - 1)).value;
                                        if (table.rows[k - 1].cells[2].textContent == "(1) ngoài UEF, (2) UEF (20%)" || table.rows[k - 1].cells[2].textContent == "Cơ quan công tác ngoài UEF (0%)") {
                                            table.rows[k - 1].cells[4].innerHTML = `${total / 2 * donggop / 100}`;
                                            table.rows[k - 1].cells[5].innerHTML = `${total / 2 * donggop / 100 * 0.9}`;
                                            table.rows[k - 1].cells[6].innerHTML = `0`;
                                            table.rows[k - 1].cells[7].innerHTML = `0`;
                                        } else {
                                            table.rows[k - 1].cells[4].innerHTML = `${total / 2 * donggop / 100}`;
                                            table.rows[k - 1].cells[5].innerHTML = `${total / 2 * donggop / 100 * 0.9}`;
                                            table.rows[k - 1].cells[6].innerHTML = `${diem / 2}`;
                                            table.rows[k - 1].cells[7].innerHTML = `0`;
                                        }
                                    }
                                    var donggoptgc = document.querySelector('#donggop-0').value;
                                    table.rows[0].cells[4].innerHTML = `${total / 2 * donggoptgc / 100}`;
                                    table.rows[0].cells[5].innerHTML = `${total / 2 * donggoptgc / 100 * 0.9}`;
                                    table.rows[0].cells[6].innerHTML = `${diem / 2}`;
                                    table.rows[0].cells[7].innerHTML = `0`;
                                }
                            }
                            ////////
                            else if (coquantgc == "Cơ quan công tác ngoài UEF (0%)" || coquantgc == "(1) ngoài UEF, (2) UEF (20%)" && table.rows[0].cells[3].textContent == "Tác giả chính") {
                                document.querySelector('#donggop-0').disabled = false;
                                if (table.rows[i].cells[3].textContent == "Tác giả liên hệ" && table.rows[i].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)") {
                                    var donggop = document.querySelector('#donggop-' + i).value;
                                    table.rows[i].cells[4].innerHTML = `${total * donggop / 100}`;
                                    table.rows[i].cells[5].innerHTML = `${total * donggop / 100 * 0.9}`;
                                    table.rows[i].cells[6].innerHTML = `${diem / 2}`;
                                    table.rows[i].cells[7].innerHTML = `0`;
                                    for (let j = 1; j < (sltgp + 1); j++) {
                                        var donggop = document.querySelector('#donggop-' + j).value;

                                        if (table.rows[j].cells[2].textContent == "(1) ngoài UEF, (2) UEF (20%)" || table.rows[j].cells[2].textContent == "Cơ quan công tác ngoài UEF (0%)") {
                                            table.rows[j].cells[4].innerHTML = `${total * donggop / 100}`;
                                            table.rows[j].cells[5].innerHTML = `${total * donggop / 100 * 0.9}`;
                                            table.rows[j].cells[6].innerHTML = `0`;
                                            table.rows[j].cells[7].innerHTML = `0`;
                                        } else {
                                            table.rows[j].cells[4].innerHTML = `${total * donggop / 1000}`;
                                            table.rows[j].cells[5].innerHTML = `${total * donggop / 100 * 0.9}`;
                                            table.rows[j].cells[6].innerHTML = `${diem / 2}`;
                                            table.rows[j].cells[7].innerHTML = `0`;
                                        }
                                    }
                                    for (let k = (sltgc + sltgp + 1); k < (sltg + 1); k++) {
                                        var donggop = document.querySelector('#donggop-' + (k - 1)).value;
                                        if (table.rows[k - 1].cells[2].textContent == "(1) ngoài UEF, (2) UEF (20%)" || table.rows[k - 1].cells[2].textContent == "Cơ quan công tác ngoài UEF (0%)") {
                                            table.rows[k - 1].cells[4].innerHTML = `${total * donggop / 100}`;
                                            table.rows[k - 1].cells[5].innerHTML = `${total * donggop / 100 * 0.9}`;
                                            table.rows[k - 1].cells[6].innerHTML = `0`;
                                            table.rows[k - 1].cells[7].innerHTML = `0`;
                                        } else {
                                            table.rows[k - 1].cells[4].innerHTML = `${total * donggop / 100}`;
                                            table.rows[k - 1].cells[5].innerHTML = `${total * donggop / 100 * 0.9}`;
                                            table.rows[k - 1].cells[6].innerHTML = `${diem / 2}`;
                                            table.rows[k - 1].cells[7].innerHTML = `0`;
                                        }
                                    }
                                    var donggoptgc = document.querySelector('#donggop-0').value;

                                    break;
                                }

                                else if (table.rows[i].cells[3].textContent == "Tác giả liên hệ" && table.rows[i].cells[2].textContent == "(1) UEF – (2) ngoài UEF (80%)") {
                                    var donggop = document.querySelector('#donggop-' + i).value;
                                    table.rows[i].cells[4].innerHTML = `${total / 2 * donggop / 100}`;
                                    table.rows[i].cells[5].innerHTML = `${total / 2 * donggop / 100 * 0.9}`;
                                    table.rows[i].cells[6].innerHTML = `${diem / 2}`;
                                    table.rows[i].cells[7].innerHTML = `0`;
                                    for (let j = 1; j < (sltgp + 1); j++) {
                                        var donggop = document.querySelector('#donggop-' + j).value;

                                        if (table.rows[j].cells[2].textContent == "(1) ngoài UEF, (2) UEF (20%)" || table.rows[j].cells[2].textContent == "Cơ quan công tác ngoài UEF (0%)") {
                                            table.rows[j].cells[4].innerHTML = `${total / 2 * donggop / 100}`;
                                            table.rows[j].cells[5].innerHTML = `${total / 2 * donggop / 100 * 0.9}`;
                                            table.rows[j].cells[6].innerHTML = `0`;
                                            table.rows[j].cells[7].innerHTML = `0`;
                                        } else {
                                            table.rows[j].cells[4].innerHTML = `${total / 2 * donggop / 100}`;
                                            table.rows[j].cells[5].innerHTML = `${total / 2 * donggop / 100 * 0.9}`;
                                            table.rows[j].cells[6].innerHTML = `${diem / 2}`;
                                            table.rows[j].cells[7].innerHTML = `0`;
                                        }
                                    }
                                    for (let k = (sltgc + sltgp + 1); k < (sltg + 1); k++) {
                                        var donggop = document.querySelector('#donggop-' + (k - 1)).value;
                                        if (table.rows[k - 1].cells[2].textContent == "(1) ngoài UEF, (2) UEF (20%)" || table.rows[k - 1].cells[2].textContent == "Cơ quan công tác ngoài UEF (0%)") {
                                            table.rows[k - 1].cells[4].innerHTML = `${total / 2 * donggop / 100}`;
                                            table.rows[k - 1].cells[5].innerHTML = `${total / 2 * donggop / 100 * 0.9}`;
                                            table.rows[k - 1].cells[6].innerHTML = `0`;
                                            table.rows[k - 1].cells[7].innerHTML = `0`;
                                        } else {
                                            table.rows[k - 1].cells[4].innerHTML = `${total / 2 * donggop / 100}`;
                                            table.rows[k - 1].cells[5].innerHTML = `${total / 2 * donggop / 100 * 0.9}`;
                                            table.rows[k - 1].cells[6].innerHTML = `${diem / 2}`;
                                            table.rows[k - 1].cells[7].innerHTML = `0`;
                                        }
                                    }
                                    var donggoptgc = document.querySelector('#donggop-0').value;
                                    table.rows[0].cells[4].innerHTML = `${total / 2 * donggoptgc / 100}`;
                                    table.rows[0].cells[5].innerHTML = `${total / 2 * donggoptgc / 100 * 0.9}`;
                                    table.rows[0].cells[6].innerHTML = `${diem / 2}`;
                                    table.rows[0].cells[7].innerHTML = `0`;
                                } if (table.rows[i].cells[3].textContent == "Tác giả liên hệ" && table.rows[i].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)" || table.rows[i].cells[2].textContent == "(1) UEF – (2) ngoài UEF (80%)") {
                                    var donggop = document.querySelector('#donggop-' + i).value;
                                    if (table.rows[i].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)") {
                                        tglh += 1;
                                    }
                                    if (tglh < 1) {
                                        if (table.rows[i].cells[2].textContent == "Tác giả phụ" && table.rows[i].cells[3].textContent == "Tác giả phụ") {

                                        }
                                        for (let j = 0; j < sltg; j++) {
                                            var donggop = document.querySelector('#donggop-' + j).value;
                                            table.rows[j].cells[4].innerHTML = `${total * donggop / 100}`;
                                            table.rows[j].cells[5].innerHTML = `${total * donggop / 100 * 0.9}`;
                                            table.rows[j].cells[6].innerHTML = `${diem / 2}`;
                                            table.rows[j].cells[7].innerHTML = `0`;
                                        }
                                    }

                                    break;
                                }

                            }
                            ///////
                            else if (coquantgc == "Cơ quan công tác duy nhất UEF (100%)" && table.rows[0].cells[3].textContent == "Tác giả chính") {
                                document.querySelector('#donggop-0').disabled = false;
                                var donggop = document.querySelector('#donggop-' + i).value;
                                var donggoptgc = document.querySelector('#donggop-0').value;
                                table.rows[0].cells[4].innerHTML = `${total * donggoptgc / 100}`;
                                table.rows[0].cells[5].innerHTML = `${total * donggoptgc / 100 * 0.9}`;
                                table.rows[0].cells[6].innerHTML = `${diem / 2}`;
                                table.rows[0].cells[7].innerHTML = `0`;
                                if (table.rows[i].cells[2].textContent == "(1) ngoài UEF, (2) UEF (20%)" || table.rows[i].cells[2].textContent == "Cơ quan công tác ngoài UEF (0%)") {
                                    table.rows[i].cells[4].innerHTML = `${(total) * (donggop / 100)}`;
                                    table.rows[i].cells[5].innerHTML = `${(total) * (donggop / 100) * 0.9}`;
                                    table.rows[i].cells[6].innerHTML = `0`;
                                    table.rows[i].cells[7].innerHTML = `0`;
                                } else {
                                    table.rows[i].cells[4].innerHTML = `${(total) * (donggop / 100)}`;
                                    table.rows[i].cells[5].innerHTML = `${(total) * (donggop / 100) * 0.9}`;
                                    table.rows[i].cells[6].innerHTML = `${diem / 2}`;
                                    table.rows[i].cells[7].innerHTML = `0`;
                                }
                            }

                        }
                    }
                    else if (sltg == 2 && valuerank != "Nghiên cứu mạnh") {
                        for (let i = 0; i < sltg; i++) {
                            var coquan = table.rows[i].cells[2].textContent;
                            var donggop = Number(document.querySelector('#donggop-' + i).value);
                            if (sltg == 2) {
                                if (coquan == "(1) ngoài UEF, (2) UEF (20%)" || coquan == "Cơ quan công tác ngoài UEF (0%)") {
                                    table.rows[i].cells[4].innerHTML = `0`;
                                    table.rows[i].cells[5].innerHTML = `0`;
                                    table.rows[i].cells[6].innerHTML = `0`;
                                    table.rows[i].cells[7].innerHTML = `0`;
                                } if (coquan == "(1) UEF – (2) ngoài UEF (80%)") {
                                    table.rows[i].cells[4].innerHTML = `${((total / 2) / sltg) * (donggop / 100)}`;
                                    table.rows[i].cells[5].innerHTML = `${(((total / 2) / sltg) * (donggop / 100)) * 0.9}`;
                                    table.rows[i].cells[6].innerHTML = `${diem / 2}`;
                                    table.rows[i].cells[7].innerHTML = `0`;
                                } else if (coquan == "Cơ quan công tác duy nhất UEF (100%)") {
                                    table.rows[i].cells[4].innerHTML = `${(total / 2) * (donggop / 100)}`;
                                    table.rows[i].cells[5].innerHTML = `${((total / 2)) * (donggop / 100) * 0.9}`;
                                    table.rows[i].cells[6].innerHTML = `${diem / 2}`;
                                    table.rows[i].cells[7].innerHTML = `0`;
                                }
                            }
                        }
                    }

                    else if (sltgc == 1 && sltg == 1) {
                        var coquan = table.rows[0].cells[2].textContent;
                        try {
                            var donggop = Number(document.querySelector('#donggop-0').value);

                        } catch { }

                        if (coquan == "(1) ngoài UEF, (2) UEF (20%)" || coquan == "Cơ quan công tác ngoài UEF (0%)") {
                            table.rows[0].cells[4].innerHTML = `0`;
                            table.rows[0].cells[5].innerHTML = `0`;
                            table.rows[0].cells[6].innerHTML = `0`;
                            table.rows[0].cells[7].innerHTML = `0`;

                        } else if (coquan == "(1) UEF – (2) ngoài UEF (80%)") {
                            table.rows[0].cells[4].innerHTML = `${total / 2}`;
                            table.rows[0].cells[5].innerHTML = `${(total / 2) * 0.9}`;
                            table.rows[0].cells[6].innerHTML = `${diem}`;
                            table.rows[0].cells[7].innerHTML = `${tietchuan}`;
                        } else {
                            table.rows[0].cells[4].innerHTML = `${total}`;
                            table.rows[0].cells[5].innerHTML = `${(total) * 0.9}`;
                            table.rows[0].cells[6].innerHTML = `${diem}`;
                            table.rows[0].cells[7].innerHTML = `${tietchuan}`;
                        }
                    }
                }

                ///////////////////
                if (valuerank == "Nghiên cứu viên 1" && valueloaihinh == "Nghiên cứu mạnh" && sltgc > 0 && sltglh > 1 && sltgp > 1 && sltg > 4) {
                    for (let i = 0; i < sltg; i++) {
                        trtable += `<tr>
                                                                            <td>${i + 1}</td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                            <td></td>
                                                                        </tr>`;
                    }
                    table.innerHTML = trtable;
                    for (let i = 0; i < sltg; i++) {
                        var tacgia = document.querySelector('#inp-username-id-mail-' + i).value;
                        table.rows[i].cells[1].innerHTML = tacgia;
                    }
                    for (let i = 0; i < sltg; i++) {
                        var optionscongtac = document.querySelector('#coquancongtac-' + i);
                        var textcongtac = optionscongtac.options[optionscongtac.selectedIndex].textContent;
                        table.rows[i].cells[2].innerHTML = textcongtac;
                    } for (let i = 0; i < sltg; i++) {
                        var optionstg = document.querySelector('#tg-' + i);
                        var texttg = optionstg.options[optionstg.selectedIndex].textContent;
                        table.rows[i].cells[3].innerHTML = texttg;
                    }
                    if (table.rows[0].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)") {
                        for (let j = 0; j < sltg; j++) {
                            if (table.rows[j].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)") {
                                for (let k = 0; k < sltg; k++) {
                                    var donggoptgc = document.querySelector('#donggop-' + k).value;
                                    table.rows[k].cells[4].innerHTML = `${total * donggoptgc / 100}`;
                                    table.rows[k].cells[5].innerHTML = `${total * donggoptgc / 100 * 0.9}`;
                                    if (table.rows[k].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)" || table.rows[k].cells[2].textContent == "(1) UEF – (2) ngoài UEF (80%)") {
                                        table.rows[k].cells[6].innerHTML = `${diem / 2}`;
                                    } else {
                                        table.rows[k].cells[6].innerHTML = `0`;
                                    }
                                    table.rows[k].cells[7].innerHTML = `0`;
                                }
                                break;
                            }
                            if (table.rows[j].cells[2].textContent == "(1) UEF – (2) ngoài UEF (80%)") {
                                var coquanhutech = 0;
                                for (let g = (j + 1); g < sltg; g++) {
                                    if (table.rows[g].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)") {
                                        coquanhutech += 1;
                                    }
                                }
                                if (coquanhutech < 1) {
                                    for (let k = 0; k < sltg; k++) {
                                        var donggoptgc = document.querySelector('#donggop-' + k).value;
                                        table.rows[k].cells[4].innerHTML = `${total / 2 / sltglh * donggoptgc / 100}`;
                                        table.rows[k].cells[5].innerHTML = `${total / 2 / sltglh * donggoptgc / 100 * 0.9}`;
                                        if (table.rows[k].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)" || table.rows[k].cells[2].textContent == "(1) UEF – (2) ngoài UEF (80%)") {
                                            table.rows[k].cells[6].innerHTML = `${diem / 2}`;
                                        } else {
                                            table.rows[k].cells[6].innerHTML = `0`;
                                        }
                                        table.rows[k].cells[7].innerHTML = `0`;
                                    }
                                    break;
                                }
                            } else {
                                for (let j = 1; j < (sltg - sltglh); j++) {
                                    if (table.rows[j].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)") {
                                        for (let k = 0; k < sltg; k++) {
                                            var donggoptgc = document.querySelector('#donggop-' + k).value;
                                            table.rows[k].cells[4].innerHTML = `${total / 4 * donggoptgc / 100}`;
                                            table.rows[k].cells[5].innerHTML = `${total / 4 * donggoptgc / 100 * 0.9}`;
                                            if (table.rows[k].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)" || table.rows[k].cells[2].textContent == "(1) UEF – (2) ngoài UEF (80%)") {
                                                table.rows[k].cells[6].innerHTML = `${diem / 2}`;
                                            } else {
                                                table.rows[k].cells[6].innerHTML = `0`;
                                            }
                                            table.rows[k].cells[7].innerHTML = `0`;
                                        }
                                        break;
                                    }
                                    if (table.rows[j].cells[2].textContent == "(1) UEF – (2) ngoài UEF (80%)") {
                                        var coquanhutech = 0;
                                        for (let g = (j); g < sltg; g++) {
                                            if (table.rows[g].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)") {
                                                coquanhutech += 1;
                                            }
                                        }
                                        if (coquanhutech < 1) {
                                            for (let k = 0; k < sltg; k++) {
                                                var donggoptgc = document.querySelector('#donggop-' + k).value;
                                                table.rows[k].cells[4].innerHTML = `${total / 4 / 2 * donggoptgc / 100}`;
                                                table.rows[k].cells[5].innerHTML = `${total / 4 / 2 * donggoptgc / 100 * 0.9}`;
                                                if (table.rows[k].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)" || table.rows[k].cells[2].textContent == "(1) UEF – (2) ngoài UEF (80%)") {
                                                    table.rows[k].cells[6].innerHTML = `${diem / 2}`;
                                                } else {
                                                    table.rows[k].cells[6].innerHTML = `0`;
                                                }
                                                table.rows[k].cells[7].innerHTML = `0`;
                                            }
                                            break;
                                        }
                                    } else {
                                        for (let j = 2; j < (sltg - sltglh); j++) {
                                            if (table.rows[j].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)") {
                                                for (let k = 0; k < sltg; k++) {
                                                    var donggoptgc = document.querySelector('#donggop-' + k).value;
                                                    table.rows[k].cells[4].innerHTML = `${total / 4 * donggoptgc / 100}`;
                                                    table.rows[k].cells[5].innerHTML = `${total / 4 * donggoptgc / 100 * 0.9}`;
                                                    if (table.rows[k].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)" || table.rows[k].cells[2].textContent == "(1) UEF – (2) ngoài UEF (80%)") {
                                                        table.rows[k].cells[6].innerHTML = `${diem / 2}`;
                                                    } else {
                                                        table.rows[k].cells[6].innerHTML = `0`;
                                                    }
                                                    table.rows[k].cells[7].innerHTML = `0`;
                                                }
                                                break;
                                            }
                                            if (table.rows[j].cells[2].textContent == "(1) UEF – (2) ngoài UEF (80%)") {
                                                var coquanhutech = 0;
                                                for (let g = (j); g < sltg; g++) {
                                                    if (table.rows[g].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)") {
                                                        coquanhutech += 1;
                                                    }
                                                }
                                                if (coquanhutech < 1) {
                                                    for (let k = 0; k < sltg; k++) {
                                                        var donggoptgc = document.querySelector('#donggop-' + k).value;
                                                        table.rows[k].cells[4].innerHTML = `${total / 4 / 2 * donggoptgc / 100}`;
                                                        table.rows[k].cells[5].innerHTML = `${total / 4 / 2 * donggoptgc / 100 * 0.9}`;
                                                        if (table.rows[k].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)" || table.rows[k].cells[2].textContent == "(1) UEF – (2) ngoài UEF (80%)") {
                                                            table.rows[k].cells[6].innerHTML = `${diem / 2}`;
                                                        } else {
                                                            table.rows[k].cells[6].innerHTML = `0`;
                                                        }
                                                        table.rows[k].cells[7].innerHTML = `0`;
                                                    }
                                                    break;
                                                }
                                            } else {
                                                for (let k = 0; k < sltg; k++) {

                                                    table.rows[k].cells[4].innerHTML = `0`;
                                                    table.rows[k].cells[5].innerHTML = `0`;
                                                    if (table.rows[k].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)" || table.rows[k].cells[2].textContent == "(1) UEF – (2) ngoài UEF (80%)") {
                                                        table.rows[k].cells[6].innerHTML = `0`;
                                                    } else {
                                                        table.rows[k].cells[6].innerHTML = `0`;
                                                    }
                                                    table.rows[k].cells[7].innerHTML = `0`;
                                                }
                                            }
                                        }
                                        break;
                                    }

                                }
                            }
                        }
                    }
                    ////////////
                    if (table.rows[0].cells[2].textContent == "(1) UEF – (2) ngoài UEF (80%)") {

                        for (let j = 0; j < sltg; j++) {
                            for (let k = 0; k < sltg; k++) {
                                var donggoptgc = document.querySelector('#donggop-' + k).value;
                                table.rows[k].cells[4].innerHTML = `${total / 2 * donggoptgc / 100}`;
                                table.rows[k].cells[5].innerHTML = `${total / 2 * donggoptgc / 100 * 0.9}`;
                                if (table.rows[k].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)" || table.rows[k].cells[2].textContent == "(1) UEF – (2) ngoài UEF (80%)") {
                                    table.rows[k].cells[6].innerHTML = `${diem / 2}`;
                                } else {
                                    table.rows[k].cells[6].innerHTML = `0`;
                                }
                                table.rows[k].cells[7].innerHTML = `0`;
                            }
                        }
                    }

                    ////////////
                    if (table.rows[0].cells[2].textContent != "(1) UEF – (2) ngoài UEF (80%)" && table.rows[0].cells[2].textContent != "Cơ quan công tác duy nhất UEF (100%)") {
                        var tglh100 = 0;
                        var tglh50 = 0;
                        var tglh0 = 0;
                        for (let i = (sltg - sltglh); i < sltg; i++) {
                            if (table.rows[i].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)") {
                                tglh100 += 1;
                            } if (table.rows[i].cells[2].textContent == "(1) UEF – (2) ngoài UEF (80%)") {
                                tglh50 += 1;
                            } if (table.rows[i].cells[2].textContent != "Cơ quan công tác duy nhất UEF (100%)" && table.rows[i].cells[2].textContent != "(1) UEF – (2) ngoài UEF (80%)") {
                                tglh0 += 1;
                            }
                        }
                        if (tglh100 > 0) {
                            for (let j = 0; j < sltg; j++) {
                                var donggop = document.querySelector('#donggop-' + j).value;
                                table.rows[j].cells[4].innerHTML = `${total / sltglh * donggop / 100}`;
                                table.rows[j].cells[5].innerHTML = `${total / sltglh * donggop / 100 * 0.9}`;
                                if (table.rows[j].cells[2].textContent != "Cơ quan công tác duy nhất UEF (100%)" && table.rows[j].cells[2].textContent != "(1) UEF – (2) ngoài UEF (80%)") {
                                    table.rows[j].cells[6].innerHTML = `0`;

                                } else {
                                    table.rows[j].cells[6].innerHTML = `${diem / 2}`;

                                }
                                table.rows[j].cells[7].innerHTML = `0`;
                            }
                        } if (tglh50 > 0 && tglh100 == 0) {
                            for (let j = 0; j < sltg; j++) {
                                var donggop = document.querySelector('#donggop-' + j).value;
                                table.rows[j].cells[4].innerHTML = `${total / 2 / sltglh * donggop / 100}`;
                                table.rows[j].cells[5].innerHTML = `${total / 2 / sltglh * donggop / 100 * 0.9}`;
                                if (table.rows[j].cells[2].textContent != "Cơ quan công tác duy nhất UEF (100%)" && table.rows[j].cells[2].textContent != "(1) UEF – (2) ngoài UEF (80%)") {
                                    table.rows[j].cells[6].innerHTML = `0`;

                                } else {
                                    table.rows[j].cells[6].innerHTML = `${diem / 2}`;

                                }
                                table.rows[j].cells[7].innerHTML = `0`;
                            }
                        } if (tglh0 > 0 && tglh100 == 0 && tglh50 == 0) {
                            //alert("a");
                            var tgp100 = 0;
                            var tgp50 = 0;
                            var tgp0 = 0;
                            for (let i = 1; i < (sltg - sltglh); i++) {
                                if (table.rows[i].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)") {
                                    tgp100 += 1;
                                } if (table.rows[i].cells[2].textContent == "(1) UEF – (2) ngoài UEF (80%)") {
                                    tgp50 += 1;
                                } if (table.rows[i].cells[2].textContent != "Cơ quan công tác duy nhất UEF (100%)" && table.rows[i].cells[2].textContent != "(1) UEF – (2) ngoài UEF (80%)") {
                                    tgp0 += 1;
                                }
                            } if (tgp100 > 0) {
                                for (let j = 0; j < sltg; j++) {
                                    var donggop = document.querySelector('#donggop-' + j).value;
                                    table.rows[j].cells[4].innerHTML = `${total * 0.25 * donggop / 100}`;
                                    table.rows[j].cells[5].innerHTML = `${total * 0.25 * donggop / 100 * 0.9}`;
                                    if (table.rows[j].cells[2].textContent != "Cơ quan công tác duy nhất UEF (100%)" && table.rows[j].cells[2].textContent != "(1) UEF – (2) ngoài UEF (80%)") {
                                        table.rows[j].cells[6].innerHTML = `0`;

                                    } else {
                                        table.rows[j].cells[6].innerHTML = `${diem / 2}`;

                                    }
                                    table.rows[j].cells[7].innerHTML = `0`;
                                }
                            } if (tgp50 == 0 && tglh50 > 0) {
                                for (let j = 0; j < sltg; j++) {
                                    var donggop = document.querySelector('#donggop-' + j).value;
                                    table.rows[j].cells[4].innerHTML = `${total * 0.25 / 2 * donggop / 100}`;
                                    table.rows[j].cells[5].innerHTML = `${total * 0.25 / 2 * donggop / 100 * 0.9}`;
                                    if (table.rows[j].cells[2].textContent != "Cơ quan công tác duy nhất UEF (100%)" && table.rows[j].cells[2].textContent != "(1) UEF – (2) ngoài UEF (80%)") {
                                        table.rows[j].cells[6].innerHTML = `0`;

                                    } else {
                                        table.rows[j].cells[6].innerHTML = `${diem / 2}`;

                                    }
                                    table.rows[j].cells[7].innerHTML = `0`;
                                }
                            } if (tgp0 > 0 && tgp100 == 0 && tgp50 == 0) {
                                for (let j = 0; j < sltg; j++) {
                                    var donggop = document.querySelector('#donggop-' + j).value;
                                    table.rows[j].cells[4].innerHTML = `0`;
                                    table.rows[j].cells[5].innerHTML = `0`;
                                    table.rows[j].cells[6].innerHTML = `0`;
                                    table.rows[j].cells[7].innerHTML = `0`;
                                }
                            }

                        }

                    }
                    ////////////
                    else if (sltgc > 2 && sltgp > 0 && sltglh > 0) {
                        var tsltlh = 0;
                        var tglh = 0;
                        for (let i = 1; i < sltg; i++) {
                            var coquan = table.rows[i].cells[2].textContent;
                            var coquantgc = table.rows[0].cells[2].textContent;
                            if (coquantgc == "(1) UEF – (2) ngoài UEF (80%)" && table.rows[0].cells[3].textContent == "Tác giả chính") {
                                document.querySelector('#donggop-0').disabled = false;
                                if (table.rows[i].cells[3].textContent == "Tác giả liên hệ" && table.rows[i].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)") {
                                    var donggop = document.querySelector('#donggop-' + i).value;
                                    if (table.rows[i].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)") {
                                        tsltlh += 1;
                                    }
                                    if (tsltlh > 1 || tsltlh == 1) {
                                        for (let j = 0; j < sltg; j++) {
                                            var donggop = document.querySelector('#donggop-' + j).value;
                                            table.rows[j].cells[4].innerHTML = `${total * donggop / 100}`;
                                            table.rows[j].cells[5].innerHTML = `${total * donggop / 100 * 0.9}`;
                                            table.rows[j].cells[6].innerHTML = `${diem / 2}`;
                                            table.rows[j].cells[7].innerHTML = `0`;
                                        }
                                    }
                                    var donggoptgc = document.querySelector('#donggop-0').value;
                                    table.rows[0].cells[4].innerHTML = `${total * donggoptgc / 100}`;
                                    table.rows[0].cells[5].innerHTML = `${total * donggoptgc / 100 * 0.9}`;
                                    table.rows[0].cells[6].innerHTML = `${diem / 2}`;
                                    table.rows[0].cells[7].innerHTML = `0`;
                                    break;
                                }
                                else if (table.rows[i].cells[3].textContent == "Tác giả liên hệ" && table.rows[i].cells[2].textContent == "(1) UEF – (2) ngoài UEF (80%)" || table.rows[i].cells[2].textContent == "(1) ngoài UEF, (2) UEF (20%)" || table.rows[i].cells[2].textContent == "Cơ quan công tác ngoài UEF (0%)") {
                                    var donggop = document.querySelector('#donggop-' + i).value;
                                    table.rows[i].cells[4].innerHTML = `${total / 2 * donggop / 100}`;
                                    table.rows[i].cells[5].innerHTML = `${total / 2 * donggop / 100 * 0.9}`;
                                    table.rows[i].cells[6].innerHTML = `${diem / 2}`;
                                    table.rows[i].cells[7].innerHTML = `0`;
                                    for (let j = 1; j < (sltgp + 1); j++) {
                                        var donggop = document.querySelector('#donggop-' + j).value;

                                        if (table.rows[j].cells[2].textContent == "(1) ngoài UEF, (2) UEF (20%)" || table.rows[j].cells[2].textContent == "Cơ quan công tác ngoài UEF (0%)") {
                                            table.rows[j].cells[4].innerHTML = `${total / 2 * donggop / 100}`;
                                            table.rows[j].cells[5].innerHTML = `${total / 2 * donggop / 100 * 0.9}`;
                                            table.rows[j].cells[6].innerHTML = `0`;
                                            table.rows[j].cells[7].innerHTML = `0`;
                                        } else {
                                            table.rows[j].cells[4].innerHTML = `${total / 2 * donggop / 100}`;
                                            table.rows[j].cells[5].innerHTML = `${total / 2 * donggop / 100 * 0.9}`;
                                            table.rows[j].cells[6].innerHTML = `${diem / 2}`;
                                            table.rows[j].cells[7].innerHTML = `0`;
                                        }
                                    }
                                    for (let k = (sltgc + sltgp + 1); k < (sltg + 1); k++) {
                                        var donggop = document.querySelector('#donggop-' + (k - 1)).value;
                                        if (table.rows[k - 1].cells[2].textContent == "(1) ngoài UEF, (2) UEF (20%)" || table.rows[k - 1].cells[2].textContent == "Cơ quan công tác ngoài UEF (0%)") {
                                            table.rows[k - 1].cells[4].innerHTML = `${total / 2 * donggop / 100}`;
                                            table.rows[k - 1].cells[5].innerHTML = `${total / 2 * donggop / 100 * 0.9}`;
                                            table.rows[k - 1].cells[6].innerHTML = `0`;
                                            table.rows[k - 1].cells[7].innerHTML = `0`;
                                        } else {
                                            table.rows[k - 1].cells[4].innerHTML = `${total / 2 * donggop / 100}`;
                                            table.rows[k - 1].cells[5].innerHTML = `${total / 2 * donggop / 100 * 0.9}`;
                                            table.rows[k - 1].cells[6].innerHTML = `${diem / 2}`;
                                            table.rows[k - 1].cells[7].innerHTML = `0`;
                                        }
                                    }
                                    var donggoptgc = document.querySelector('#donggop-0').value;
                                    table.rows[0].cells[4].innerHTML = `${total / 2 * donggoptgc / 100}`;
                                    table.rows[0].cells[5].innerHTML = `${total / 2 * donggoptgc / 100 * 0.9}`;
                                    table.rows[0].cells[6].innerHTML = `${diem / 2}`;
                                    table.rows[0].cells[7].innerHTML = `0`;
                                }
                            }
                            ////////
                            else if (coquantgc == "Cơ quan công tác ngoài UEF (0%)" || coquantgc == "(1) ngoài UEF, (2) UEF (20%)" && table.rows[0].cells[3].textContent == "Tác giả chính") {
                                document.querySelector('#donggop-0').disabled = false;
                                if (table.rows[i].cells[3].textContent == "Tác giả liên hệ" && table.rows[i].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)") {
                                    var donggop = document.querySelector('#donggop-' + i).value;
                                    table.rows[i].cells[4].innerHTML = `${total * donggop / 100}`;
                                    table.rows[i].cells[5].innerHTML = `${total * donggop / 100 * 0.9}`;
                                    table.rows[i].cells[6].innerHTML = `${diem / 2}`;
                                    table.rows[i].cells[7].innerHTML = `0`;
                                    for (let j = 1; j < (sltgp + 1); j++) {
                                        var donggop = document.querySelector('#donggop-' + j).value;

                                        if (table.rows[j].cells[2].textContent == "(1) ngoài UEF, (2) UEF (20%)" || table.rows[j].cells[2].textContent == "Cơ quan công tác ngoài UEF (0%)") {
                                            table.rows[j].cells[4].innerHTML = `${total * donggop / 100}`;
                                            table.rows[j].cells[5].innerHTML = `${total * donggop / 100 * 0.9}`;
                                            table.rows[j].cells[6].innerHTML = `0`;
                                            table.rows[j].cells[7].innerHTML = `0`;
                                        } else {
                                            table.rows[j].cells[4].innerHTML = `${total * donggop / 1000}`;
                                            table.rows[j].cells[5].innerHTML = `${total * donggop / 100 * 0.9}`;
                                            table.rows[j].cells[6].innerHTML = `${diem / 2}`;
                                            table.rows[j].cells[7].innerHTML = `0`;
                                        }
                                    }
                                    for (let k = (sltgc + sltgp + 1); k < (sltg + 1); k++) {
                                        var donggop = document.querySelector('#donggop-' + (k - 1)).value;
                                        if (table.rows[k - 1].cells[2].textContent == "(1) ngoài UEF, (2) UEF (20%)" || table.rows[k - 1].cells[2].textContent == "Cơ quan công tác ngoài UEF (0%)") {
                                            table.rows[k - 1].cells[4].innerHTML = `${total * donggop / 100}`;
                                            table.rows[k - 1].cells[5].innerHTML = `${total * donggop / 100 * 0.9}`;
                                            table.rows[k - 1].cells[6].innerHTML = `0`;
                                            table.rows[k - 1].cells[7].innerHTML = `0`;
                                        } else {
                                            table.rows[k - 1].cells[4].innerHTML = `${total * donggop / 100}`;
                                            table.rows[k - 1].cells[5].innerHTML = `${total * donggop / 100 * 0.9}`;
                                            table.rows[k - 1].cells[6].innerHTML = `${diem / 2}`;
                                            table.rows[k - 1].cells[7].innerHTML = `0`;
                                        }
                                    }
                                    var donggoptgc = document.querySelector('#donggop-0').value;

                                    break;
                                }

                                else if (table.rows[i].cells[3].textContent == "Tác giả liên hệ" && table.rows[i].cells[2].textContent == "(1) UEF – (2) ngoài UEF (80%)") {
                                    var donggop = document.querySelector('#donggop-' + i).value;
                                    table.rows[i].cells[4].innerHTML = `${total / 2 * donggop / 100}`;
                                    table.rows[i].cells[5].innerHTML = `${total / 2 * donggop / 100 * 0.9}`;
                                    table.rows[i].cells[6].innerHTML = `${diem / 2}`;
                                    table.rows[i].cells[7].innerHTML = `0`;
                                    for (let j = 1; j < (sltgp + 1); j++) {
                                        var donggop = document.querySelector('#donggop-' + j).value;

                                        if (table.rows[j].cells[2].textContent == "(1) ngoài UEF, (2) UEF (20%)" || table.rows[j].cells[2].textContent == "Cơ quan công tác ngoài UEF (0%)") {
                                            table.rows[j].cells[4].innerHTML = `${total / 2 * donggop / 100}`;
                                            table.rows[j].cells[5].innerHTML = `${total / 2 * donggop / 100 * 0.9}`;
                                            table.rows[j].cells[6].innerHTML = `0`;
                                            table.rows[j].cells[7].innerHTML = `0`;
                                        } else {
                                            table.rows[j].cells[4].innerHTML = `${total / 2 * donggop / 100}`;
                                            table.rows[j].cells[5].innerHTML = `${total / 2 * donggop / 100 * 0.9}`;
                                            table.rows[j].cells[6].innerHTML = `${diem / 2}`;
                                            table.rows[j].cells[7].innerHTML = `0`;
                                        }
                                    }
                                    for (let k = (sltgc + sltgp + 1); k < (sltg + 1); k++) {
                                        var donggop = document.querySelector('#donggop-' + (k - 1)).value;
                                        if (table.rows[k - 1].cells[2].textContent == "(1) ngoài UEF, (2) UEF (20%)" || table.rows[k - 1].cells[2].textContent == "Cơ quan công tác ngoài UEF (0%)") {
                                            table.rows[k - 1].cells[4].innerHTML = `${total / 2 * donggop / 100}`;
                                            table.rows[k - 1].cells[5].innerHTML = `${total / 2 * donggop / 100 * 0.9}`;
                                            table.rows[k - 1].cells[6].innerHTML = `0`;
                                            table.rows[k - 1].cells[7].innerHTML = `0`;
                                        } else {
                                            table.rows[k - 1].cells[4].innerHTML = `${total / 2 * donggop / 100}`;
                                            table.rows[k - 1].cells[5].innerHTML = `${total / 2 * donggop / 100 * 0.9}`;
                                            table.rows[k - 1].cells[6].innerHTML = `${diem / 2}`;
                                            table.rows[k - 1].cells[7].innerHTML = `0`;
                                        }
                                    }
                                    var donggoptgc = document.querySelector('#donggop-0').value;
                                    table.rows[0].cells[4].innerHTML = `${total / 2 * donggoptgc / 100}`;
                                    table.rows[0].cells[5].innerHTML = `${total / 2 * donggoptgc / 100 * 0.9}`;
                                    table.rows[0].cells[6].innerHTML = `${diem / 2}`;
                                    table.rows[0].cells[7].innerHTML = `0`;
                                } if (table.rows[i].cells[3].textContent == "Tác giả liên hệ" && table.rows[i].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)" || table.rows[i].cells[2].textContent == "(1) UEF – (2) ngoài UEF (80%)") {
                                    var donggop = document.querySelector('#donggop-' + i).value;
                                    if (table.rows[i].cells[2].textContent == "Cơ quan công tác duy nhất UEF (100%)") {
                                        tglh += 1;
                                    }
                                    if (tglh < 1) {
                                        if (table.rows[i].cells[2].textContent == "Tác giả phụ" && table.rows[i].cells[3].textContent == "Tác giả phụ") {

                                        }
                                        for (let j = 0; j < sltg; j++) {
                                            var donggop = document.querySelector('#donggop-' + j).value;
                                            table.rows[j].cells[4].innerHTML = `${total * donggop / 100}`;
                                            table.rows[j].cells[5].innerHTML = `${total * donggop / 100 * 0.9}`;
                                            table.rows[j].cells[6].innerHTML = `${diem / 2}`;
                                            table.rows[j].cells[7].innerHTML = `0`;
                                        }
                                    }

                                    break;
                                }

                            }
                            ///////
                            else if (coquantgc == "Cơ quan công tác duy nhất UEF (100%)" && table.rows[0].cells[3].textContent == "Tác giả chính") {
                                document.querySelector('#donggop-0').disabled = false;
                                var donggop = document.querySelector('#donggop-' + i).value;
                                var donggoptgc = document.querySelector('#donggop-0').value;
                                table.rows[0].cells[4].innerHTML = `${total * donggoptgc / 100}`;
                                table.rows[0].cells[5].innerHTML = `${total * donggoptgc / 100 * 0.9}`;
                                table.rows[0].cells[6].innerHTML = `${diem / 2}`;
                                table.rows[0].cells[7].innerHTML = `0`;
                                if (table.rows[i].cells[2].textContent == "(1) ngoài UEF, (2) UEF (20%)" || table.rows[i].cells[2].textContent == "Cơ quan công tác ngoài UEF (0%)") {
                                    table.rows[i].cells[4].innerHTML = `${(total) * (donggop / 100)}`;
                                    table.rows[i].cells[5].innerHTML = `${(total) * (donggop / 100) * 0.9}`;
                                    table.rows[i].cells[6].innerHTML = `0`;
                                    table.rows[i].cells[7].innerHTML = `0`;
                                } else {
                                    table.rows[i].cells[4].innerHTML = `${(total) * (donggop / 100)}`;
                                    table.rows[i].cells[5].innerHTML = `${(total) * (donggop / 100) * 0.9}`;
                                    table.rows[i].cells[6].innerHTML = `${diem / 2}`;
                                    table.rows[i].cells[7].innerHTML = `0`;
                                }
                            }

                        }
                    }
                    else if (sltg == 2 && valuerank != "Nghiên cứu mạnh") {
                        for (let i = 0; i < sltg; i++) {
                            var coquan = table.rows[i].cells[2].textContent;
                            var donggop = Number(document.querySelector('#donggop-' + i).value);
                            if (sltg == 2) {
                                if (coquan == "(1) ngoài UEF, (2) UEF (20%)" || coquan == "Cơ quan công tác ngoài UEF (0%)") {
                                    table.rows[i].cells[4].innerHTML = `0`;
                                    table.rows[i].cells[5].innerHTML = `0`;
                                    table.rows[i].cells[6].innerHTML = `0`;
                                    table.rows[i].cells[7].innerHTML = `0`;
                                } if (coquan == "(1) UEF – (2) ngoài UEF (80%)") {
                                    table.rows[i].cells[4].innerHTML = `${((total / 2) / sltg) * (donggop / 100)}`;
                                    table.rows[i].cells[5].innerHTML = `${(((total / 2) / sltg) * (donggop / 100)) * 0.9}`;
                                    table.rows[i].cells[6].innerHTML = `${diem / 2}`;
                                    table.rows[i].cells[7].innerHTML = `0`;
                                } else if (coquan == "Cơ quan công tác duy nhất UEF (100%)") {
                                    table.rows[i].cells[4].innerHTML = `${(total / 2) * (donggop / 100)}`;
                                    table.rows[i].cells[5].innerHTML = `${((total / 2)) * (donggop / 100) * 0.9}`;
                                    table.rows[i].cells[6].innerHTML = `${diem / 2}`;
                                    table.rows[i].cells[7].innerHTML = `0`;
                                }
                            }
                        }
                    }

                    else if (sltgc == 1 && sltg == 1) {
                        var coquan = table.rows[0].cells[2].textContent;
                        try {
                            var donggop = Number(document.querySelector('#donggop-0').value);

                        } catch { }

                        if (coquan == "(1) ngoài UEF, (2) UEF (20%)" || coquan == "Cơ quan công tác ngoài UEF (0%)") {
                            table.rows[0].cells[4].innerHTML = `0`;
                            table.rows[0].cells[5].innerHTML = `0`;
                            table.rows[0].cells[6].innerHTML = `0`;
                            table.rows[0].cells[7].innerHTML = `0`;

                        } else if (coquan == "(1) UEF – (2) ngoài UEF (80%)") {
                            table.rows[0].cells[4].innerHTML = `${total / 2}`;
                            table.rows[0].cells[5].innerHTML = `${(total / 2) * 0.9}`;
                            table.rows[0].cells[6].innerHTML = `${diem}`;
                            table.rows[0].cells[7].innerHTML = `${tietchuan}`;
                        } else {
                            table.rows[0].cells[4].innerHTML = `${total}`;
                            table.rows[0].cells[5].innerHTML = `${(total) * 0.9}`;
                            table.rows[0].cells[6].innerHTML = `${diem}`;
                            table.rows[0].cells[7].innerHTML = `${tietchuan}`;
                        }
                    }
                }
                ////////
            }
        }
        function clear_hinhthuc() {
            document.querySelector('#yeucauchatluong').innerHTML = ``;
            document.querySelector('#tbtacgia').innerHTML = ``;
            document.querySelector('#tbtacgia2').innerHTML = ``;
            document.querySelector('#tongtacgia').innerHTML = ``;
            document.querySelector('#chondanhmuc').innerHTML = ``;
            try {
                document.querySelector('#tongthanhtien').innerHTML = ``;
            } catch { }
            document.querySelector('#sltgc').value = ``;
            document.querySelector('#sltgp').value = ``;
            document.querySelector('#sltglh').value = ``;
            document.querySelector('#quydoi').checked = false;

            document.querySelector('#loaisanpham').innerHTML = ``;
            try {
                document.querySelector('#tongthanhtien').innerHTML = ``;
            } catch { }
            document.querySelector('#loaibaibao').innerHTML = ``;
            var valuerank = document.querySelector('input[name="tick-rank"]:checked').value;
            var valueloaihinh = document.querySelector('input[name="tick-rank-kekhai"]:checked').value;
            document.querySelector('#yeucauchatluong').innerHTML = ``;
            document.querySelector('#loaibaibao').innerHTML = ``;
            document.querySelector('#loaisanpham').innerHTML = ``;
            if (valuerank == "Nghiên cứu viên 1" && valueloaihinh == "Nghiên cứu mạnh") {
                document.querySelector('#kekhaitietchuan').innerHTML = `<div class="custom-control custom-radio">
                                                                            <input class="custom-control-input" type="radio" id="quydoi" name="thanhtoan-quydoi" value="KÊ KHAI TIẾT CHUẨN" onclick="loadradio2()">
                                                                            <label for="quydoi" class="custom-control-label">KÊ KHAI TIẾT CHUẨN</label>
                                                                        </div>`;
                document.querySelector('#tbtacgia').innerHTML = `<thead>
                                                                            <th width="2%">STT</th>
                                                                            <th width="20%">Mã nhân viên</th>
                                                                            <th width="20%">Cơ quan công tác</th>
                                                                            <th width="10%">Loại tác giả</th>
                                                                            <th width="7%">Đóng góp (%)</th>
                                                                            </thead>

                                                                            <tbody id="addtacgia" onchange="loadtable()">
                                                                            </tbody>`;
                themtacgia();

            }
            if (valuerank == "Giảng viên" && valueloaihinh == "Nghiên cứu mạnh") {
                document.querySelector('#kekhaitietchuan').innerHTML = `<div class="custom-control custom-radio">
                                                                            <input class="custom-control-input" type="radio" id="quydoi" name="thanhtoan-quydoi" value="KÊ KHAI TIẾT CHUẨN" onclick="loadradio2()">
                                                                            <label for="quydoi" class="custom-control-label">THANH TOÁN TRỰC TIẾP/ ĐIỂM HOÀN THÀNH</label>
                                                                        </div>`;

                document.querySelector('#tbtacgia').innerHTML = `<thead>
                                                                            <th width="2%">STT</th>
                                                                            <th width="20%">Mã nhân viên</th>
                                                                            <th width="20%">Cơ quan công tác</th>
                                                                            <th width="10%">Loại tác giả</th>
                                                                            <th width="7%">Đóng góp (%)</th>
                                                                            </thead>

                                                                            <tbody id="addtacgia" onchange="loadtable()">
                                                                            </tbody>`;
                themtacgia();

            }
            if (valuerank == "Giảng viên" && valueloaihinh == "Khối lượng") {
                document.querySelector('#kekhaitietchuan').innerHTML = `<div class="custom-control custom-radio">
                                                                            <input class="custom-control-input" type="radio" id="quydoi" name="thanhtoan-quydoi" value="KÊ KHAI TIẾT CHUẨN" onclick="loadradio2()">
                                                                            <label for="quydoi" class="custom-control-label">KÊ KHAI TIẾT CHUẨN</label>
                                                                        </div>`;
                document.querySelector('#tbtacgia').innerHTML = `<thead>
                                                                            <th width="2%">STT</th>
                                                                            <th width="20%">Mã nhân viên</th>
                                                                            <th width="20%">Cơ quan công tác</th>
                                                                            <th width="10%">Loại tác giả</th>
                                                                            </thead>

                                                                            <tbody id="addtacgia" onchange="loadtable()">
                                                                            </tbody>`;
                themtacgia();
            } if (valuerank == "Giảng viên" && valueloaihinh == "Đề tài") {
                document.querySelector('#kekhaitietchuan').innerHTML = `<div class="custom-control custom-radio">
                                                                            <input class="custom-control-input" type="radio" id="quydoi" name="thanhtoan-quydoi" value="KÊ KHAI TIẾT CHUẨN" onclick="loadradio2()">
                                                                            <label for="quydoi" class="custom-control-label">THANH TOÁN TRỰC TIẾP/ ĐIỂM HOÀN THÀNH</label>
                                                                        </div>`;
                document.querySelector('#tbtacgia').innerHTML = `<thead>
                                                                            <th width="2%">STT</th>
                                                                            <th width="20%">Mã nhân viên</th>
                                                                            <th width="20%">Cơ quan công tác</th>
                                                                            <th width="10%">Loại tác giả</th>
                                                                            </thead>

                                                                            <tbody id="addtacgia" onchange="loadtable()">
                                                                            </tbody>`;
                themtacgia();

            }
            if (valuerank == "Nghiên cứu viên 1" && valueloaihinh == "Khối lượng") {
                document.querySelector('#tbtacgia').innerHTML = `<thead>
                                                                            <th width="2%">STT</th>
                                                                            <th width="20%">Mã nhân viên</th>
                                                                            <th width="20%">Cơ quan công tác</th>
                                                                            <th width="10%">Loại tác giả</th>
                                                                            </thead>

                                                                            <tbody id="addtacgia" onchange="loadtable()">
                                                                            </tbody>`;
                themtacgia();
            }

        }
        function themtacgia() {
            var a = ``;
            var sltgc = Number(document.querySelector('#sltgc').value);
            var sltgp = Number(document.querySelector('#sltgp').value);
            var sltglh = Number(document.querySelector('#sltglh').value);
            var valuerank = document.querySelector('input[name="tick-rank"]:checked').value;
            var valueloaihinh = document.querySelector('input[name="tick-rank-kekhai"]:checked').value;
            var sltg = sltgc + sltgp + sltglh;
            let i = 0;

            document.querySelector('#tbtacgia2').innerHTML = `<thead>
                                                                <th width="2%">STT</th>
                                                                <th width="15%">Mã nhân viên</th>
                                                                <th width="15%">Cơ quan công tác</th>
                                                                <th width="15%">Loại tác giả</th>
                                                                <th width="10%">Tổng nhận trước thuế</th>
                                                                <th width="10%">Thực nhận</th>
                                                                <th width="5%">Điểm</th>
                                                                <th width="5%">Tiết chuẩn</th>
                                                                </thead>

                                                                <tbody id="tablethanhtoan">
                                                                </tbody>`;
            document.querySelector('#tongtacgia').innerHTML = `<a>Tổng số tác giả: <a id="tongsltg">${sltg}</a></a>`;
            if (sltgc == 1 && valueloaihinh == "Đề tài" && valuerank == "Giảng viên") {

                for (i; i < sltgc; i++) {
                    a += `<tr><td>${i + 1}</td>
                                                                                <td ><input class="form-control" type="text" placeholder="Nhập Mã GV/Tên tác giả phụ thuộc UEF" id="inp-username-id-mail-${i}" oninput="inpsearch(${i},render_user)" />
                                                                                <div id="themtg" style="display: flex">
                                                                                    <div width: 50%">
                                                                                        <dl id="dl-user-${i}">
                                                                                        </dl>
                                                                                    </div>
                                                                                </div></td>
                                                                                <td ><div class="form-group">
                                                                                <select name="coquancongtac" id="coquancongtac-${i}" class="form-control">
                                                                                    <option value="0"> --Chọn cơ quan công tác--</option>
                                                                                    <option value="1">Cơ quan công tác duy nhất UEF (100%)</option>
                                                                                    <option value="0.5">(1) UEF – (2) ngoài UEF (80%)</option>
                                                                                    <option value="0">(1) ngoài UEF, (2) UEF (20%)</option>
                                                                                    <option value="0">Cơ quan công tác ngoài UEF (0%)</option>
                                                                                </select>
                                                                            </div></td>
                                                                                <td>
                                                                                <div class="form-group">
                                                                                <select name="coquancongtac" id="tg-${i}" class="form-control">
                                                                                     <option >Chủ nhiệm</option>
                                                                                     <option >Thành viên</option>
                                                                                     </select></td></tr>`;
                }
                for (i; i < (sltgp + sltgc); i++) {
                    a += `<tr><td>${i + 1}</td>
                                                                                <td ><input class="form-control" type="text" placeholder="Nhập Mã GV/Tên tác giả phụ thuộc UEF" id="inp-username-id-mail-${i}" oninput="inpsearch(${i},render_user)" />
                                                                                <div id="themtg" style="display: flex">
                                                                                    <div width: 50%">
                                                                                        <dl id="dl-user-${i}">
                                                                                        </dl>
                                                                                    </div>
                                                                                </div></td>
                                                                                <td ><div class="form-group">
                                                                                <select name="coquancongtac" id="coquancongtac-${i}" class="form-control">
                                                                                    <option value="0"> --Chọn cơ quan công tác--</option>
                                                                                    <option value="1">Cơ quan công tác duy nhất UEF (100%)</option>
                                                                                    <option value="0.5">(1) UEF – (2) ngoài UEF (80%)</option>
                                                                                    <option value="0">(1) ngoài UEF, (2) UEF (20%)</option>
                                                                                    <option value="0">Cơ quan công tác ngoài UEF (0%)</option>
                                                                                </select>
                                                                            </div></td>
                                                                                <td>
                                                                                <div class="form-group">
                                                                                <select name="coquancongtac" id="tg-${i}" class="form-control">
                                                                                     <option >Thành viên</option>

                                                                                <option >Chủ nhiệm</option>
                                                                                     </select>
                                                                                     </td>
                                                                                     </tr>`;
                } for (i; i < sltg; i++) {
                    a += `<tr><td>${i + 1}</td>
                                                                                <td ><input class="form-control" type="text" placeholder="Nhập Mã GV/Tên tác giả phụ thuộc UEF" id="inp-username-id-mail-${i}" oninput="inpsearch(${i},render_user)" />
                                                                                <div id="themtg" style="display: flex">
                                                                                    <div width: 50%">
                                                                                        <dl id="dl-user-${i}">
                                                                                        </dl>
                                                                                    </div>
                                                                                </div></td>
                                                                                <td ><div class="form-group">
                                                                                <select name="coquancongtac" id="coquancongtac-${i}" class="form-control">
                                                                                    <option value="0"> --Chọn cơ quan công tác--</option>

                                                                                    <option value="1">Cơ quan công tác duy nhất UEF (100%)</option>
                                                                                    <option value="0.5">(1) UEF – (2) ngoài UEF (80%)</option>
                                                                                    <option value="0">(1) ngoài UEF, (2) UEF (20%)</option>
                                                                                    <option value="0">Cơ quan công tác ngoài UEF (0%)</option>
                                                                                </select>
                                                                            </div></td>
                                                                                <td>
                                                                                <div class="form-group">
                                                                                <select name="coquancongtac" id="tg-${i}" class="form-control">
                                                                                     <option >Thành viên</option>

                                                                                     <option >Chủ nhiệm</option></select>
                                                                                     </td></tr>`;
                }

                document.querySelector('#addtacgia').innerHTML = a;
            }
            if (sltgc == 1 && valueloaihinh == "Khối lượng" && valuerank == "Giảng viên") {

                for (i; i < sltgc; i++) {
                    a += `<tr><td>${i + 1}</td>
                                                                                <td ><input class="form-control" type="text" placeholder="Nhập Mã GV/Tên tác giả phụ thuộc UEF" id="inp-username-id-mail-${i}" oninput="inpsearch(${i},render_user)" />
                                                                                <div id="themtg" style="display: flex">
                                                                                    <div width: 50%">
                                                                                        <dl id="dl-user-${i}">
                                                                                        </dl>
                                                                                    </div>
                                                                                </div></td>
                                                                                <td ><div class="form-group">
                                                                                <select name="coquancongtac" id="coquancongtac-${i}" class="form-control">
                                                                                    <option value="0"> --Chọn cơ quan công tác--</option>

                                                                                    <option value="1">Cơ quan công tác duy nhất UEF (100%)</option>
                                                                                    <option value="0.5">(1) UEF – (2) ngoài UEF (80%)</option>
                                                                                    <option value="0">(1) ngoài UEF, (2) UEF (20%)</option>
                                                                                    <option value="0">Cơ quan công tác ngoài UEF (0%)</option>
                                                                                </select>
                                                                            </div></td>
                                                                                <td>
                                                                                <div class="form-group">
                                                                                <select name="coquancongtac" id="tg-${i}" class="form-control" disabled>
                                                                                     <option >Tác giả chính</option>
                                                                                     </select></td></tr>`;
                }
                for (i; i < (sltgp + sltgc); i++) {
                    a += `<tr><td>${i + 1}</td>
                                                                                <td ><input class="form-control" type="text" placeholder="Nhập Mã GV/Tên tác giả phụ thuộc UEF" id="inp-username-id-mail-${i}" oninput="inpsearch(${i},render_user)" />
                                                                                <div id="themtg" style="display: flex">
                                                                                    <div width: 50%">
                                                                                        <dl id="dl-user-${i}">
                                                                                        </dl>
                                                                                    </div>
                                                                                </div></td>
                                                                                <td ><div class="form-group">
                                                                                <select name="coquancongtac" id="coquancongtac-${i}" class="form-control">
                                                                                    <option value="0"> --Chọn cơ quan công tác--</option>
                                                                                    <option value="1">Cơ quan công tác duy nhất UEF (100%)</option>
                                                                                    <option value="0.5">(1) UEF – (2) ngoài UEF (80%)</option>
                                                                                    <option value="0">(1) ngoài UEF, (2) UEF (20%)</option>
                                                                                    <option value="0">Cơ quan công tác ngoài UEF (0%)</option>
                                                                                </select>
                                                                            </div></td>
                                                                                <td>
                                                                                <div class="form-group">
                                                                                <select name="coquancongtac" id="tg-${i}" class="form-control" disabled>

                                                                                     <option>Tác giả phụ</option>
                                                                                     </td>
                                                                                     </tr>`;
                } for (i; i < sltg; i++) {
                    a += `<tr><td>${i + 1}</td>
                                                                                <td ><input class="form-control" type="text" placeholder="Nhập Mã GV/Tên tác giả phụ thuộc UEF" id="inp-username-id-mail-${i}" oninput="inpsearch(${i},render_user)" />
                                                                                <div id="themtg" style="display: flex">
                                                                                    <div width: 50%">
                                                                                        <dl id="dl-user-${i}">
                                                                                        </dl>
                                                                                    </div>
                                                                                </div></td>
                                                                                <td ><div class="form-group">
                                                                                <select name="coquancongtac" id="coquancongtac-${i}" class="form-control">
                                                                                    <option value="0"> --Chọn cơ quan công tác--</option>

                                                                                    <option value="1">Cơ quan công tác duy nhất UEF (100%)</option>
                                                                                    <option value="0.5">(1) UEF – (2) ngoài UEF (80%)</option>
                                                                                    <option value="0">(1) ngoài UEF, (2) UEF (20%)</option>
                                                                                    <option value="0">Cơ quan công tác ngoài UEF (0%)</option>
                                                                                </select>
                                                                            </div></td>
                                                                                <td>
                                                                                <div class="form-group">
                                                                                <select name="coquancongtac" id="tg-${i}" class="form-control" disabled>

                                                                                     <option>Tác giả liên hệ</option>
                                                                                     </td></tr>`;
                }

                document.querySelector('#addtacgia').innerHTML = a;
            }
            ///
            if (sltgc == 1 && valueloaihinh == "Khối lượng" && valuerank == "Nghiên cứu viên 1") {

                for (i; i < sltgc; i++) {
                    a += `<tr><td>${i + 1}</td>
                                                                                <td ><input class="form-control" type="text" placeholder="Nhập Mã GV/Tên tác giả phụ thuộc UEF" id="inp-username-id-mail-${i}" oninput="inpsearch(${i},render_user)" />
                                                                                <div id="themtg" style="display: flex">
                                                                                    <div width: 50%">
                                                                                        <dl id="dl-user-${i}">
                                                                                        </dl>
                                                                                    </div>
                                                                                </div></td>
                                                                                <td ><div class="form-group">
                                                                                <select name="coquancongtac" id="coquancongtac-${i}" class="form-control">
                                                                                    <option value="0"> --Chọn cơ quan công tác--</option>

                                                                                    <option value="1">Cơ quan công tác duy nhất UEF (100%)</option>
                                                                                    <option value="0.5">(1) UEF – (2) ngoài UEF (80%)</option>
                                                                                    <option value="0">(1) ngoài UEF, (2) UEF (20%)</option>
                                                                                    <option value="0">Cơ quan công tác ngoài UEF (0%)</option>
                                                                                </select>
                                                                            </div></td>
                                                                                <td>
                                                                                <div class="form-group">
                                                                                <select name="coquancongtac" id="tg-${i}" class="form-control" disabled>
                                                                                     <option >Tác giả chính</option>
                                                                                     </select></td></tr>`;
                }
                for (i; i < (sltgp + sltgc); i++) {
                    a += `<tr><td>${i + 1}</td>
                                                                                <td ><input class="form-control" type="text" placeholder="Nhập Mã GV/Tên tác giả phụ thuộc UEF" id="inp-username-id-mail-${i}" oninput="inpsearch(${i},render_user)" />
                                                                                <div id="themtg" style="display: flex">
                                                                                    <div width: 50%">
                                                                                        <dl id="dl-user-${i}">
                                                                                        </dl>
                                                                                    </div>
                                                                                </div></td>
                                                                                <td ><div class="form-group">
                                                                                <select name="coquancongtac" id="coquancongtac-${i}" class="form-control">
                                                                                    <option value="0"> --Chọn cơ quan công tác--</option>
                                                                                    <option value="1">Cơ quan công tác duy nhất UEF (100%)</option>
                                                                                    <option value="0.5">(1) UEF – (2) ngoài UEF (80%)</option>
                                                                                    <option value="0">(1) ngoài UEF, (2) UEF (20%)</option>
                                                                                    <option value="0">Cơ quan công tác ngoài UEF (0%)</option>
                                                                                </select>
                                                                            </div></td>
                                                                                <td>
                                                                                <div class="form-group">
                                                                                <select name="coquancongtac" id="tg-${i}" class="form-control" disabled>

                                                                                     <option>Tác giả phụ</option>
                                                                                     </td>
                                                                                     </tr>`;
                } for (i; i < sltg; i++) {
                    a += `<tr><td>${i + 1}</td>
                                                                                <td ><input class="form-control" type="text" placeholder="Nhập Mã GV/Tên tác giả phụ thuộc UEF" id="inp-username-id-mail-${i}" oninput="inpsearch(${i},render_user)" />
                                                                                <div id="themtg" style="display: flex">
                                                                                    <div width: 50%">
                                                                                        <dl id="dl-user-${i}">
                                                                                        </dl>
                                                                                    </div>
                                                                                </div></td>
                                                                                <td ><div class="form-group">
                                                                                <select name="coquancongtac" id="coquancongtac-${i}" class="form-control">
                                                                                    <option value="0"> --Chọn cơ quan công tác--</option>

                                                                                    <option value="1">Cơ quan công tác duy nhất UEF (100%)</option>
                                                                                    <option value="0.5">(1) UEF – (2) ngoài UEF (80%)</option>
                                                                                    <option value="0">(1) ngoài UEF, (2) UEF (20%)</option>
                                                                                    <option value="0">Cơ quan công tác ngoài UEF (0%)</option>
                                                                                </select>
                                                                            </div></td>
                                                                                <td>
                                                                                <div class="form-group">
                                                                                <select name="coquancongtac" id="tg-${i}" class="form-control" disabled>

                                                                                     <option>Tác giả liên hệ</option>
                                                                                     </td></tr>`;
                }

                document.querySelector('#addtacgia').innerHTML = a;
            }
            ///
            if (sltgc == 1 && valueloaihinh == "Nghiên cứu mạnh" && valuerank == "Giảng viên" || valuerank == "Nghiên cứu viên 1") {

                for (i; i < sltgc; i++) {
                    a += `<tr><td>${i + 1}</td>
                                                                                <td ><input class="form-control" type="text" placeholder="Nhập Mã GV/Tên tác giả phụ thuộc UEF" id="inp-username-id-mail-${i}" oninput="inpsearch(${i},render_user)" />
                                                                                <div id="themtg" style="display: flex">
                                                                                    <div width: 50%">
                                                                                        <dl id="dl-user-${i}">
                                                                                        </dl>
                                                                                    </div>
                                                                                </div></td>
                                                                                <td ><div class="form-group">
                                                                                <select name="coquancongtac" id="coquancongtac-${i}" class="form-control">
                                                                                    <option value="0"> --Chọn cơ quan công tác--</option>

                                                                                    <option value="1">Cơ quan công tác duy nhất UEF (100%)</option>
                                                                                    <option value="0.5">(1) UEF – (2) ngoài UEF (80%)</option>
                                                                                    <option value="0">(1) ngoài UEF, (2) UEF (20%)</option>
                                                                                    <option value="0">Cơ quan công tác ngoài UEF (0%)</option>
                                                                                </select>
                                                                            </div></td>
                                                                                <td>
                                                                                <div class="form-group">
                                                                                <select name="coquancongtac" id="tg-${i}" class="form-control" disabled>
                                                                                     <option >Tác giả chính</option>
                                                                                     <td><input class="form-control" type="number" placeholder="Nhập % đóng góp" id="donggop-${i}" /></td>
                                                                                     </select></td></tr>`;
                }
                for (i; i < (sltgp + sltgc); i++) {
                    a += `<tr><td>${i + 1}</td>
                                                                                <td ><input class="form-control" type="text" placeholder="Nhập Mã GV/Tên tác giả phụ thuộc UEF" id="inp-username-id-mail-${i}" oninput="inpsearch(${i},render_user)" />
                                                                                <div id="themtg" style="display: flex">
                                                                                    <div width: 50%">
                                                                                        <dl id="dl-user-${i}">
                                                                                        </dl>
                                                                                    </div>
                                                                                </div></td>
                                                                                <td ><div class="form-group">
                                                                                <select name="coquancongtac" id="coquancongtac-${i}" class="form-control">
                                                                                    <option value="0"> --Chọn cơ quan công tác--</option>
                                                                                    <option value="1">Cơ quan công tác duy nhất UEF (100%)</option>
                                                                                    <option value="0.5">(1) UEF – (2) ngoài UEF (80%)</option>
                                                                                    <option value="0">(1) ngoài UEF, (2) UEF (20%)</option>
                                                                                    <option value="0">Cơ quan công tác ngoài UEF (0%)</option>
                                                                                </select>
                                                                            </div></td>
                                                                                <td>
                                                                                <div class="form-group">
                                                                                <select name="coquancongtac" id="tg-${i}" class="form-control" disabled>

                                                                                     <option>Tác giả phụ</option>
                                                                                     </td>
                                                                                     <td><input class="form-control" type="number" placeholder="Nhập % đóng góp" id="donggop-${i}" /></td>
                                                                                     </tr>`;
                } for (i; i < sltg; i++) {
                    a += `<tr><td>${i + 1}</td>
                                                                                <td ><input class="form-control" type="text" placeholder="Nhập Mã GV/Tên tác giả phụ thuộc UEF" id="inp-username-id-mail-${i}" oninput="inpsearch(${i},render_user)" />
                                                                                <div id="themtg" style="display: flex">
                                                                                    <div width: 50%">
                                                                                        <dl id="dl-user-${i}">
                                                                                        </dl>
                                                                                    </div>
                                                                                </div></td>
                                                                                <td ><div class="form-group">
                                                                                <select name="coquancongtac" id="coquancongtac-${i}" class="form-control">
                                                                                    <option value="0"> --Chọn cơ quan công tác--</option>

                                                                                    <option value="1">Cơ quan công tác duy nhất UEF (100%)</option>
                                                                                    <option value="0.5">(1) UEF – (2) ngoài UEF (80%)</option>
                                                                                    <option value="0">(1) ngoài UEF, (2) UEF (20%)</option>
                                                                                    <option value="0">Cơ quan công tác ngoài UEF (0%)</option>
                                                                                </select>
                                                                            </div></td>
                                                                                <td>
                                                                                <div class="form-group">
                                                                                <select name="coquancongtac" id="tg-${i}" class="form-control" disabled>

                                                                                     <option>Tác giả liên hệ</option>
                                                                                     <td><input class="form-control" type="number" placeholder="Nhập % đóng góp" id="donggop-${i}" /></td>
                                                                                     </td></tr>`;
                }

                document.querySelector('#addtacgia').innerHTML = a;
            }

            else if (sltgc > 1) {
                alert("Duy nhất 1 tác giả chính!");
            }

        }
    </script>
</div>
<div class="card card-info">
    <div class="card-header">
        <h3 class="card-title">Thực nhận trước và sau thuế</h3>
    </div>
    <style>
        table, th, td {
            border: 1px solid black;
        }

        th {
            background-color: blue;
            color: white;
        }
    </style>
    <table class="table table-bordered table-striped" style="width:100%" id="tbtacgia2">
    </table>
</div>

<div style="display: flex; justify-content: center;">
    <input class="btn btn-info" id="inpsearchs" type="submit" value="Xác nhận gửi" onclick="handleSend()">
</div>

<script>
    // api
    const linkapilsp = "https://localhost:44364/api/ThanhToanGV/Get-LSP?lsp="

    const linkapiID = "https://localhost:44364/api/ThanhToanGV/Get-ID?id=";
    //------------------------------

    //------------------------------

    //element
    document.querySelector('#tacgia').onchange = function () {
        document.querySelector('#yeucauchatluong').innerHTML = ``;
        document.querySelector('#loaisanpham').innerHTML = ``;
        try {
            document.querySelector('#tongthanhtien').innerHTML = `value`;
        } catch { }
        //document.querySelector('#thanhtoan').checked = false;
    }
    function movedmk() {
        document.querySelector('#div-dmk').innerHTML = ``;
    }

    function clear_tacgia() {
        document.querySelector('#yeucauchatluong').innerHTML = ``;
        document.querySelector('#tbtacgia').innerHTML = ``;
        document.querySelector('#tbtacgia2').innerHTML = ``;
        document.querySelector('#tongtacgia').innerHTML = ``;
        document.querySelector('#chondanhmuc').innerHTML = ``;
        try {
            document.querySelector('#tongthanhtien').innerHTML = ``;
        } catch { }
        document.querySelector('#sltgc').value = ``;
        document.querySelector('#sltgp').value = ``;
        document.querySelector('#sltglh').value = ``;
        document.querySelector('#quydoi').checked = false;

        document.querySelector('#loaisanpham').innerHTML = ``;
        try {
            document.querySelector('#tongthanhtien').innerHTML = ``;
        } catch { }
        document.querySelector('#loaibaibao').innerHTML = ``;
        //document.querySelector('#thanhtoan').checked = false;
        render_fr_httt();
    }
    //------------------

    function Start() {
        //Get_issn(renderGet_issn);
        /*Get_loaisanpham(render_lsp);*/
    }
    Start();
    function Get_issn(callback) {
        var searchBtn = document.querySelector('#inpsearch-3');
        var valueoption = document.querySelector('#option-national-country');
        var textvalueoption = valueoption.options[valueoption.selectedIndex].textContent;
        if (textvalueoption == "Quốc tế") {
            var value = "https://localhost:44364/api/DanhMuc/Get-issn?issn=";
            var inputSearch = document.querySelector('input[name="search-issn-eissn"]').value;
            if (inputSearch == "") {
                alert("empty");
            } else {
                fetch(value + inputSearch, {
                    headers: {
                        'Authorization': 'Bearer ' + _token,
                        'Content-Type': 'application/json'
                    }
                })
                    .then(function (response) {
                        if (response.status == 404) {
                            fetch("https://localhost:44364/api/DanhMuc/Get-eissn?eissn=" + inputSearch, {
                                headers: {
                                    'Authorization': 'Bearer ' + _token,
                                    'Content-Type': 'application/json'
                                }
                            }).then(function (res) {
                                if (res.status == 404) {
                                    fetch("https://localhost:44364/api/DanhMucScimago/Get-issn?issn=" + inputSearch, {
                                        headers: {
                                            'Authorization': 'Bearer ' + _token,
                                            'Content-Type': 'application/json'
                                        }
                                    })
                                        .then(function (res2) {
                                            if (res2.status == 404) {
                                                fetch("https://localhost:44364/api/DanhMucScimago/Get-eissn?eissn=" + inputSearch, {
                                                    headers: {
                                                        'Authorization': 'Bearer ' + _token,
                                                        'Content-Type': 'application/json'
                                                    }
                                                })
                                                    .then(function (res3) {
                                                        return res3.json();
                                                    })
                                                    .then(callback)
                                            }
                                            else {
                                                return res2.json();
                                            }
                                        })
                                        .then(callback)
                                }
                                else {
                                    return res.json();
                                }

                            }).then(callback)

                        }
                        else {
                            return response.json();
                        }
                    })
                    .then(callback)
            }
        }
        else if (textvalueoption == "Trong nước") {
            var value = "https://localhost:44364/api/DanhMucTrongNuoc/Get-DanhMucTrongNuoc?issn=";
            var inputSearch = document.querySelector('input[name="search-issn-eissn"]').value;
            if (inputSearch == "") {
                alert("empty");
            } else {
                fetch(value + inputSearch, {
                    headers: {
                        'Authorization': 'Bearer ' + _token,
                        //
                        'Content-Type': 'application/json'
                    }
                })
                    .then(function (response) {
                        return response.json();
                    })
                    .then(callback)
            }
        }
    }
    function danhMucKhac() {
        document.querySelector('#checkbox-result-issn-eissn').innerHTML = ``;
        document.querySelector('#div-dmk').innerHTML = `
                            <div class="input-group mb-3">
                            <input class="form-control" " id="inp-name-dmk" placeholder="Name"><br />
                    </div>
                    <div class="input-group mb-3">
                            <input class="form-control" id="inp-issn-dmk" placeholder="Issn"><br />
                    </div>
                    <div class="input-group mb-3">
                            <input class="form-control" id="inp-iessn-dmk" placeholder="Eissn"><br />
                    </div>
                    <div class="input-group mb-3"><input class="form-control" id="inp-catigory-dmk" placeholder="Category">
                    </div>
                            `;
    }
    function render_kinhphi(q) {
        if (q.includes("Q1")) {
            document.querySelector('#tongthanhtien2').innerHTML = ` <label> Kinh phí bài báo: <label id="total">100000000</label> </label>
                                                                    <div id="tongthanhtien"></div>`;
        }
        if (q.includes("Q2")) {
            document.querySelector('#tongthanhtien2').innerHTML = ` <label> Kinh phí bài báo: <label id="total">80000000</label> </label >`;
        }
        if (q.includes("Q3")) {
            document.querySelector('#tongthanhtien2').innerHTML = ` <label> Kinh phí bài báo: <label id="total">60000000</label> </label >`;
        }
        if (q.includes("Q4")) {
            document.querySelector('#tongthanhtien2').innerHTML = ` <label> Kinh phí bài báo: <label id="total">40000000</label> </label >`;
        } if (q == "Q1" || q == "Q2" || q == "Q3") {
            document.querySelector('#tongthanhtien2').innerHTML = ` <label> Kinh phí bài báo: <label id="total">24000000</label> </label >`;
        } if (q == "Q4") {
            document.querySelector('#tongthanhtien2').innerHTML = ` <label> Kinh phí bài báo: <label id="total">0</label> </label >`;
        }
    }
    function renderGet_issn(issns) {
        var valueoption = document.querySelector('#option-national-country');
        var textvalueoption = valueoption.options[valueoption.selectedIndex].textContent;
        try { var valuelbb = document.querySelector('input[name="lsp"]:checked').value; } catch { }

        if (textvalueoption == "Trong nước") {
            var checkbox = document.querySelector('#checkbox-result-issn-eissn');
            checkbox.innerHTML = ``;
            var htmls = issns.map(function (issn) {
                if (valuelbb == "CSP") {
                    var diem = Number(issn.diem);
                    if (diem == 1 || diem > 1) {
                        document.querySelector('#tongthanhtien2').innerHTML = ` <label> Kinh phí bài báo: <label id="total">18000000</label> </label >`;
                    } else {
                        document.querySelector('#tongthanhtien2').innerHTML = ` <label> Kinh phí bài báo: <label id="total">10000000</label> </label >`;
                    }
                } if (valuelbb == "KSP") {
                    var diem = Number(issn.diem);
                    if (diem == 1 || diem > 1) {
                        document.querySelector('#tongthanhtien2').innerHTML = ` <label> Kinh phí bài báo: <label id="total">15000000</label> </label >`;
                    } else {
                        document.querySelector('#tongthanhtien2').innerHTML = ` <label> Kinh phí bài báo: <label id="total">0</label> </label >`;
                    }
                }
                var checkbox = document.querySelector('#tongthanhtien');
                checkbox.innerHTML = `<label>Tiết chuẩn</label><label id="tietchuan">0</label> <label>Điểm bài báo</label> <label id="diem">${issn.diem}</label>`;
                return `

                                            <input type="radio" class="radio-result" id="category-${issn.id}" name="category" value="${issn.tentapchi},${issn.hoidongnganh}">
                                            <label for="category-${issn.id}">${issn.tentapchi} (${issn.hoidongnganh})</label></br>
                                            <style>
                                                .checkbox-result-issn-eissn{
                                                    margin-left: 5%;
                                                }
                                            </style>`;
            });
            checkbox.innerHTML = htmls.join('');
        }
        if (issns == null) {
            document.querySelector('#dmk').checked = true;
            document.querySelector('#checkbox-result-issn-eissn').innerHTML = ``;
            document.querySelector('#div-dmk').innerHTML = `<div class="input-group mb-3">
                            <input class="form-control" " id="inp-name-dmk" placeholder="Name"><br />
                    </div>
                    <div class="input-group mb-3">
                            <input class="form-control" id="inp-issn-dmk" placeholder="Issn"><br />
                    </div>
                    <div class="input-group mb-3">
                            <input class="form-control" id="inp-iessn-dmk" placeholder="Eissn"><br />
                    </div>
                    <div class="input-group mb-3"><input class="form-control" id="inp-catigory-dmk" placeholder="Category">
                    </div>
                            `;
        } else if (textvalueoption == "Quốc tế") {
            document.querySelector('#div-dmk').innerHTML = ``;
            document.querySelector('#traCuuDM').checked = true;
            var checkbox = document.querySelector('#checkbox-result-issn-eissn');
            checkbox.innerHTML = ``;
            var htmls = issns.map(function (issn) {
                if (issn.category_6 == null) {
                    if (issn.category_5 == null) {
                        if (issn.category_4 == null) {
                            if (issn.category_3 == null) {
                                if (issn.category_2 == null) {
                                    return `<label id="lbr" style="color: black; font-size: 120%">Các danh mục liên quan</label><br />
                                            <label  style="margin-left: 3%;font-size: 120%">Tên danh mục: <label id="lbname" style="color: red;">${issn.journal_name}</label></label>
                                            <label style="font-size: 120%;  margin-left: 5%;">Issn: <label id="lbissn" style="color: red; ">${issn.issn}</label></label>
                                            <label style="font-size: 120%;  margin-left: 5%;">Eissn: <label  id="lbeissn" style="color: red;">${issn.eissn}</label></label><br />
                                            <input type="radio" class="radio-result" id="category-1" name="category" value="${issn.category_1}" checked="true">
                                            <label for="category-1">${issn.category_1}</label>
                                            <style>
                                                .radio-result{
                                                    margin-left: 5%;
                                                }
                                            </style>`;
                                }
                                return `<label id="lbr" style="color: black; font-size: 120%">Các danh mục liên quan</label><br />
                                        <label  style="margin-left: 3%;font-size: 120%">Tên danh mục: <label id="lbname" style="color: red;">${issn.journal_name}</label></label>
                                        <label style="font-size: 120%;  margin-left: 5%;">Issn: <label id="lbissn" style="color: red; ">${issn.issn}</label></label>
                                        <label style="font-size: 120%;  margin-left: 5%;">Eissn: <label  id="lbeissn" style="color: red;">${issn.eissn}</label></label><br />
                                        <input type="radio" class="radio-result" id="category-1" name="category" value="${issn.category_1}" checked="true">
                                        <label for="category-1">${issn.category_1}</label><br>
                                        <input type="radio" class="radio-result" id="category-2" name="category" value="${issn.category_2}">
                                        <label for="category-2">${issn.category_2}</label>
                                        <style>
                                            .radio-result{
                                                margin-left: 5%;
                                            }
                                        </style>`
                                    ;
                            }
                            return `<label id="lbr" style="color: black; font-size: 120%">Các danh mục liên quan</label><br />
                                    <label  style="margin-left: 3%;font-size: 120%">Tên danh mục: <label id="lbname" style="color: red;">${issn.journal_name}</label></label>
                                    <label style="font-size: 120%;  margin-left: 5%;">Issn: <label id="lbissn" style="color: red; ">${issn.issn}</label></label>
                                    <label style="font-size: 120%;  margin-left: 5%;">Eissn: <label  id="lbeissn" style="color: red;">${issn.eissn}</label></label><br />
                                    <input type="radio" class="radio-result" id="category-1" name="category" value="${issn.category_1}" checked="true">
                                    <label for="category-1">${issn.category_1}</label><br />
                                    <input type="radio" class="radio-result" id="category-2" name="category" value="${issn.category_2}">
                                    <label for="category-2">${issn.category_2}</label><br />
                                    <input type="radio" class="radio-result" id="category-3" name="category" value="${issn.category_3}">
                                    <label for="category-3">${issn.category_3}</label><br />
                                    <style>
                                        .radio-result{
                                            margin-left: 5%;
                                        }
                                    </style>`;
                        }
                        return `<label id="lbr" style="color: black; font-size: 120%">Các danh mục liên quan</label><br />
                                <label  style="margin-left: 3%;font-size: 120%">Tên danh mục: <label id="lbname" style="color: red;">${issn.journal_name}</label></label>
                                <label style="font-size: 120%;  margin-left: 5%;">Issn: <label id="lbissn" style="color: red; ">${issn.issn}</label></label>
                                <label style="font-size: 120%;  margin-left: 5%;">Eissn: <label  id="lbeissn" style="color: red;">${issn.eissn}</label></label><br />
                                <input type="radio" class="radio-result" id="category-1" name="category" value="${issn.category_1}" checked="true">
                                <label for="category-1">${issn.category_1}</label><br />
                                <input type="radio" class="radio-result" id="category-2" name="category" value="${issn.category_2}">
                                <label for="category-2">${issn.category_2}</label><br />
                                <input type="radio" class="radio-result" id="category-3" name="category" value="${issn.category_3}">
                                <label for="category-3">${issn.category_3}</label><br />
                                <input type="radio" class="radio-result" id="category-4" name="category" value="${issn.category_4}">
                                <label for="category-4">${issn.category_4}</label>
                                <style>
                                    .radio-result{
                                        margin-left: 5%;
                                    }
                                </style>`;
                    }
                    return `<label id="lbr" style="color: black; font-size: 120%">Các danh mục liên quan</label><br />
                            <label  style="margin-left: 3%;font-size: 120%">Tên danh mục: <label id="lbname" style="color: red;">${issn.journal_name}</label></label>
                            <label style="font-size: 120%;  margin-left: 5%;">Issn: <label id="lbissn" style="color: red; ">${issn.issn}</label></label>
                            <label style="font-size: 120%;  margin-left: 5%;">Eissn: <label  id="lbeissn" style="color: red;">${issn.eissn}</label></label><br />
                            <input type="radio" class="radio-result" id="category-1" name="category" value="${issn.category_1}" checked="true">
                            <label for="category-1">${issn.category_1}</label><br />
                            <input type="radio" class="radio-result" id="category-2" name="category" value="${issn.category_2}">
                            <label for="category-2">${issn.category_2}</label><br />
                            <input type="radio" class="radio-result" id="category-3" name="category" value="${issn.category_3}">
                            <label for="category-3">${issn.category_3}</label><br />
                            <input type="radio" class="radio-result" id="category-4" name="category" value="${issn.category_4}">
                            <label for="category-4">${issn.category_4}</label>
                            <input type="radio" class="radio-result" id="category-5" name="category" value="${issn.category_5}">
                            <label for="category-5">${issn.category_5}</label>
                            <style>
                                .radio-result{
                                    margin-left: 5%;
                                }
                            </style>`;
                } else {
                    return `<label id="lbr" style="color: black; font-size: 120%">Các danh mục liên quan</label><br />
                            <label  style="margin-left: 3%;font-size: 120%">Tên danh mục: <label id="lbname" style="color: red;">${issn.journal_name}</label></label>
                            <label style="font-size: 120%;  margin-left: 5%;">Issn: <label id="lbissn" style="color: red; ">${issn.issn}</label></label>
                            <label style="font-size: 120%;  margin-left: 5%;">Eissn: <label  id="lbeissn" style="color: red;">${issn.eissn}</label></label><br />
                            <input type="radio" class="radio-result" id="category-1" name="category" value="${issn.category_1}" checked="true">
                            <label for="category-1">${issn.category_1}</label><br />
                            <input type="radio" class="radio-result" id="category-2" name="category" value="${issn.category_2}">
                            <label for="category-2">${issn.category_2}</label><br />
                            <input type="radio" class="radio-result" id="category-3" name="category" value="${issn.category_3}">
                            <label for="category-3">${issn.category_3}</label><br />
                            <input type="radio" class="radio-result" id="category-4" name="category" value="${issn.category_4}" ">
                            <label for="category-4">${issn.category_4}</label><br />
                            <input type="radio" class="radio-result" id="category-5" name="category" value="${issn.category_5}">
                            <label for="category-5">${issn.category_5}</label><br />
                            <input type="radio" class="radio-result" id="category-6" name="category" value="${issn.category_6}">
                            <label for="category-5">${issn.category_6}</label><br />
                            <style>
                                .radio-result{
                                    margin-left: 5%;
                                }
                            </style>`;
                }
            });
        }

        //document.querySelector('#tongthanhtien2').innerHTML = ` <label> Kinh phí bài báo: <label id="total">100000000</label> </label >`;

        checkbox.innerHTML = htmls.join('');
        var q = document.querySelector('input[name="category"]:checked').value;
        render_kinhphi(q);
    }
    //

    var linkuser = "https://localhost:44364/api/NguoiDung/Get-user?input=";
    function inpsearch(idinput, callback) {
        var valueinp = document.querySelector('#inp-username-id-mail-' + idinput).value;
        if (valueinp == "") {
            document.querySelector('#dl-user-' + idinput).innerHTML = ``;
        }

        fetch("https://localhost:44364/api/NguoiDung/Get-user?input=" + valueinp, {
            headers: {
                'Authorization': 'Bearer ' + _token,
                //
                'Content-Type': 'application/json'
            }
        })
            .then(function (response) {

                return response.json();
            })
            .then(callback)
    }
    function render_user(users) {
        var sltgc = Number(document.querySelector('#sltgc').value);
        var sltgp = Number(document.querySelector('#sltgp').value);
        var sltglh = Number(document.querySelector('#sltglh').value);
        var sltg = sltgc + sltgp + sltglh;
        for (let i = 0; i < sltg; i++) {
            var tg = document.querySelector('#inp-username-id-mail-' + i);
            tg.oninput = function () {
                var list = document.querySelector('#dl-user-' + i);
                list.innerHTML = ``;
                inpsearch(i, render_user);
                var htmls = users.map(function (user) {
                    return `<dt value="${user.idUser}" style="border-style: groove;"><button onclick="btnadd('${i}','${user.idUser}','${user.hoTen}')" type="button" class="btn btn-success">Thêm tác giả </button>
${user.hoTen} - ${user.donViCongTac}</dt>`;
                });
                list.innerHTML = htmls.join('');
            }
        }
    }
    function btnadd(id, iduser, name) {
        var tg = document.querySelector('#inp-username-id-mail-' + id);
        tg.value = ``;
        if (tg.value == "") {
            document.querySelector('#dl-user-' + id).innerHTML = ``;
            tg.value = tg.value + iduser + " - " + name;
        }

        document.querySelector('#dl-user-' + id).innerHTML = ``;
    }
    //----------------------------------
    function Get_thanhtoanncv(a, callback) {
        var valuerank = document.querySelector('input[name="tick-rank"]:checked').value;

        if (valuerank != "Giảng viên") {
            var linkapiquydoincv = "https://localhost:44364/api/QuyDoiNCV/Get-spkhcn?spkhcn=";
            fetch(linkapiquydoincv + a, {
                headers: {
                    'Authorization': 'Bearer ' + _token,
                    //
                    'Content-Type': 'application/json'
                }
            })
                .then(function (response) {
                    return response.json();
                })
                .then(callback)
        } else {
            var linkapiquydoincv = "https://localhost:44364/api/QuyDoiNCV/Get-spkhcn?spkhcn=";
            fetch(linkapiquydoincv + a, {
                headers: {
                    'Authorization': 'Bearer ' + _token,
                    //
                    'Content-Type': 'application/json'
                }
            })
                .then(function (response) {
                    return response.json();
                })
                .then(callback)
        }
    }

    function render_fr_httt() {
        var valuerank = document.querySelector('input[name="tick-rank"]:checked').value;
        if (valuerank == "Giảng viên") {
            //document.getElementById("thanhtoan").disabled = false;
            document.getElementById("quydoi").disabled = false;
            document.querySelector('#loai_hinh').innerHTML = `<div class="card-header">
            <h3 class="card-title">Chọn loại hình kê khai</h3>
        </div>
        <div class="card-body">
            <div class="row">
            <div class="col-4">
                    <div class="custom-control custom-radio">
                        <input class="custom-control-input" type="radio" id="KKKL" name="tick-rank-kekhai"  value="Khối lượng" onclick="clear_hinhthuc()">
                        <label for="KKKL" class="custom-control-label">Kê khai khối lượng</label>
                    </div>
                </div>
                <div class="col-4">
                    <div class="custom-control custom-radio">
                        <input class="custom-control-input" type="radio" id="KKNCM" name="tick-rank-kekhai" value="Nghiên cứu mạnh"  onclick="clear_hinhthuc()">
                        <label for="KKNCM" class="custom-control-label">Nghiên cứu mạnh</label>
                    </div>
                </div>

                <div class="col-4">
                    <div class="custom-control custom-radio">
                        <input class="custom-control-input" type="radio" id="KKDT" name="tick-rank-kekhai" value="Đề tài" onclick="clear_hinhthuc()">
                        <label for="KKDT" class="custom-control-label">Đề tài</label>
                    </div>
                </div>
            </div>
        </div>`;
        }
        else if (valuerank == "Nghiên cứu viên 1") {
            //document.getElementById("thanhtoan").disabled = true;
            document.getElementById("quydoi").disabled = false;
            document.querySelector('#loai_hinh').innerHTML = `<div class="card-header">
            <h3 class="card-title">Chọn loại hình kê khai</h3>
        </div>
        <div class="card-body">
            <div class="row">
            <div class="col-4">
                    <div class="custom-control custom-radio">
                        <input class="custom-control-input" type="radio" id="KKKL" name="tick-rank-kekhai"  value="Khối lượng" onclick="clear_hinhthuc()">
                        <label for="KKKL" class="custom-control-label">Kê khai khối lượng</label>
                    </div>
                </div>
                <div class="col-4">
                    <div class="custom-control custom-radio">
                        <input class="custom-control-input" type="radio" id="KKNCM" name="tick-rank-kekhai" value="Nghiên cứu mạnh"  onclick="clear_hinhthuc()">
                        <label for="KKNCM" class="custom-control-label">Nghiên cứu mạnh</label>
                    </div>
                </div>
            </div>
        </div>`;
        }
        else if (valuerank == "Nghiên cứu viên 2") {
            //document.getElementById("thanhtoan").disabled = false;
            document.getElementById("quydoi").disabled = false;
            document.querySelector('#loai_hinh').innerHTML = ``;
        }
    }

    /*function render_spkhcn(khcns) {
        var checkbox = document.querySelector('#loaisanpham');
        var valuerank = document.querySelector('input[name="tick-rank"]:checked').value;
        document.querySelector('#loaisanpham').innerHTML = ``;
        document.querySelector('#tongthanhtien').innerHTML = ``;
        var tg = Number(document.querySelector('#tacgia').value);
        //var cq = Number(document.querySelector('#coquancongtac').value);
        var valuerank = document.querySelector('input[name="tick-rank"]:checked').value;

        if (valuerank != "Giảng viên") {
            var htmls = khcns.map(function (khcn) {
                return `<div class="custom-control custom-radio">
                        <input class="custom-control-input" type="radio" id="${khcn.id}" name="yc" value="${khcn.moTaLoaiSanPham}" onclick="checkcheckncv(${khcn.id}, render_checkncv(${khcn.tietChuan}, ${khcn.diem}))">
                        <label for="${khcn.id}" class="custom-control-label">${khcn.moTaSanPhamKHCN}</label>
                    </div>`;
            });
        } else {
            //var tongkinhphi = Number(kinhphi * tg * cq);
            var htmls = khcns.map(function (khcn) {
                return `<div class="custom-control custom-radio">
                        <input class="custom-control-input" type="radio" id="${khcn.id}" name="yc" value="${khcn.moTaLoaiSanPham}" onclick="checkcheckncv(${khcn.id}, render_checkncv(${khcn.tietChuan}, ${khcn.diem}))">
                        <label for="${khcn.id}" class="custom-control-label">${khcn.moTaSanPhamKHCN}</label>
                    </div>`;
            });
        }

        checkbox.innerHTML = htmls.join('');
    }*/

    /*function render_spkhcn(khcns) {
        var checkbox = document.querySelector('#loaisanpham');
        document.querySelector('#tongthanhtien').innerHTML = ``;
        var valuerank = document.querySelector('input[name="tick-rank"]:checked').value;

        var htmls = khcns.map(function (khcn) {
            return `<div class="custom-control custom-radio">
                        <input class="custom-control-input" type="radio" id="${khcn.id}" name="yc" value="${khcn.sanPhamKHCN}">
                        <label for="${khcn.id}" class="custom-control-label">${khcn.moTaSanPhamKHCN}</label>
                    </div>`;
        });

        checkbox.innerHTML = htmls.join('');
    }*/
    //----------------------------------

    //----------------------------------

    var linkapispkhcn = "https://localhost:44364/api/QuyDoiGV/Get-spkhcn?spkhcn=";
    function Get_spkhcn(a, callback) {
        var valuerank = document.querySelector('input[name="tick-rank"]:checked').value;
        fetch(linkapispkhcn + a, {
            headers: {
                'Authorization': 'Bearer ' + _token,
                //
                'Content-Type': 'application/json'
            }
        })
            .then(function (response) {
                return response.json();
            })
            .then(callback)
    }
    function Get_spkhcn_lsp(a, callback) {
        var valuerank = document.querySelector('input[name="tick-rank"]:checked').value;
        fetch("https://localhost:44364/api/ThanhToanGV/Get-LSP?lsp=" + a, {
            headers: {
                'Authorization': 'Bearer ' + _token,
                //
                'Content-Type': 'application/json'
            }
        })
            .then(function (response) {
                return response.json();
            })
            .then(callback)
    }
    function render_spkhcn(khcns) {
        var checkbox = document.querySelector('#loaisanpham');
        var valuerank = document.querySelector('input[name="tick-rank"]:checked').value;
        var valueloaihinh = document.querySelector('input[name="tick-rank-kekhai"]:checked').value;

        document.querySelector('#loaisanpham').innerHTML = ``;
        try {
            document.querySelector('#tongthanhtien').innerHTML = ``;
        } catch { }
        var tg = Number(document.querySelector('#tacgia').value);
        //var cq = Number(document.querySelector('#coquancongtac').value);
        //var valuerank = document.querySelector('input[name="tick-rank"]:checked').value;
        if (valuerank == "Giảng viên" && valueloaihinh == "Đề tài") {
            loadloaibaibao();
        }
        if (valuerank != "Giảng viên") {
            if (valueloaihinh == "Nghiên cứu mạnh") {
                var htmls = khcns.map(function (khcn) {
                    return `<div class="custom-control custom-radio">
                        <input class="custom-control-input" type="radio" id="${khcn.id}" name="yc" value="${khcn.moTaLoaiSanPham}" onclick="checkcheckncv(${khcn.id}, render_checkncv(0, ${khcn.diem}))">
                        <label for="${khcn.id}" class="custom-control-label">${khcn.moTaLoaiSanPham}</label>
                    </div>`;
                });
            } else {
                var htmls = khcns.map(function (khcn) {
                    return `<div class="custom-control custom-radio">
                        <input class="custom-control-input" type="radio" id="${khcn.id}" name="yc" value="${khcn.moTaLoaiSanPham}" onclick="checkcheckncv(${khcn.id}, render_checkncv(${khcn.tietChuan}, ${khcn.diem}))">
                        <label for="${khcn.id}" class="custom-control-label">${khcn.moTaLoaiSanPham}</label>
                    </div>`;
                });
            }

        } else {
            //var tongkinhphi = Number(kinhphi * tg * cq);
            if (valueloaihinh == "Nghiên cứu mạnh") {
                var htmls = khcns.map(function (khcn) {
                    return `<div class="custom-control custom-radio">
                            <input class="custom-control-input" type="radio" id="${khcn.id}" name="yc" value="${khcn.moTaLoaiSanPham}" onclick="checkcheckncv(${khcn.id}, render_checkncv(0, ${khcn.diem}))">
                            <label for="${khcn.id}" class="custom-control-label">${khcn.moTaLoaiSanPham}</label>
                        </div>`;
                });
            } else {
                var htmls = khcns.map(function (khcn) {
                    return `<div class="custom-control custom-radio">
                            <input class="custom-control-input" type="radio" id="${khcn.id}" name="yc" value="${khcn.moTaLoaiSanPham}" onclick="checkcheckncv(${khcn.id}, render_checkncv(${khcn.tietChuan}, ${khcn.diem}))">
                            <label for="${khcn.id}" class="custom-control-label">${khcn.moTaLoaiSanPham}</label>
                        </div>`;
                });
            }
        }

        checkbox.innerHTML = htmls.join('');
        show_dm();
    }
    //----------------------------------
    function show_dm() {
        var valuerank = document.querySelector('input[name="tick-rank"]:checked').value;
        var valueloaihinh = document.querySelector('input[name="tick-rank-kekhai"]:checked').value;
        var valuelsp = document.querySelector('input[name="lsp"]:checked').value;
        try {
            var valueyc = document.querySelector('input[name="yc"]:checked').value;
        } catch { }

        //alert(valuerank + "/" + valueloaihinh);
        if (valuelsp == "Sach" || valuelsp == "DeTai" || valuelsp == "SHTT" || valuelsp == "HDSV" || valuelsp == "NgheThuat") {
            document.querySelector('#upload').innerHTML = `<div class="custom-file col-6">
                        <input type="text" class="form-control" placeholder="Nhập minh chứng" id="myFile" name="myFile" readonly />
                        <input type="button" value="Tải minh chứng" onclick="BrowseServer('myFile')" />
                        <div id='tongthanhtien'></div>
                    </div>`;
            document.querySelector('#chondanhmuc').innerHTML = ``;
        }
        else {
            document.querySelector('#upload').innerHTML = `<div id="tongthanhtien"></div>`;
        }
    }
    function show_yc() {
        var valuerank = document.querySelector('input[name="tick-rank"]:checked').value;
        var valueloaihinh = document.querySelector('input[name="tick-rank-kekhai"]:checked').value;
        var valuelsp = document.querySelector('input[name="lsp"]:checked').value;
        try {
            var valueyc = document.querySelector('input[name="yc"]:checked').value;
        } catch { }
        if (valuelsp == "TapChi" && valuerank == "Giảng viên" && valueloaihinh == "Khối lượng") {
            if (valueyc == "Tạp chí khoa học chuyên ngành quốc tế ISI Q1" || valueyc == "Tạp chí khoa học chuyên ngành quốc tế ISI Q2" || valueyc == "Tạp chí khoa học chuyên ngành quốc tế ISI Q3" || valueyc == "Tạp chí khoa học chuyên ngành quốc tế ISI Q4" || valueyc == "Tạp chí khoa học chuyên ngành quốc tế Scopus ") {
                document.querySelector('#upload').innerHTML = ``;
                document.querySelector('#chondanhmuc').innerHTML = `
                <div class="card-header">
            <h3 class="card-title">Chọn danh mục</h3>
        </div>

        <div class="card-body">
            <div class="row">
                <div class="col-6">
                    <div class="custom-control custom-radio">
                        <input class="custom-control-input" type="radio" id="traCuuDM" name="selectDM" value="Tra cứu danh mục theo issn hoặc eissn" checked onclick="movedmk()">
                        <label for="traCuuDM" class="custom-control-label">Tra cứu danh mục theo Issn hoặc Eissn</label>
                        <select name="" id="option-national-country" class="form-control col-4" onchange="clear_option()">
                            <option value="0.8">Quốc tế</option>
                            <option value="0.2">Trong nước</option>
                        </select>
                    </div>
                </div>
                <div class="col-1">
                </div>
                <div class="col-5" id="danhmuckhac">

                    <div class="custom-control custom-radio">
                        <input class="custom-control-input" type="radio" id="dmk" name="selectDM" value="Danh mục khác" onclick="danhMucKhac()">
                        <label for="dmk" class="custom-control-label">Danh mục khác</label>
                    </div>
                    <div class="custom-control custom-radio">
                        <div id="div-dmk">
                        </div>
                    </div>
                </div>
            </div>
            <div class="row">
                <br />
            </div>
            <div class="row">
                <div class="col-6">
                    <div class="row">
                        <div class="col-9">
                            <div class="input-group mb-3">
                                <input type="text" class="form-control" id="search-issn" name="search-issn-eissn" placeholder="Tra cứu danh mục theo issn hoặc eissn">
                            </div>
                        </div>
                        <div class="col-3">
                            <div class="input-group mb-3">
                                <input class="btn btn-default form-control" id="inpsearch-3" type="submit" value="Tìm kiếm" onclick="Get_issn(renderGet_issn)">
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="result-issn-eissn" id="checkbox-result-issn-eissn">
                        </div>
                    </div>
                    <div id="tongthanhtien2"></div>
                    <div id="tongthanhtien"></div>
                </div>
                <div class="col-1">
                </div>
                <div class="col-5">

                    <div class="custom-file">
                        <input type="text" class="form-control" placeholder="Nhập minh chứng" id="myFile" name="myFile" readonly />
                        <input type="button" value="Tải minh chứng" onclick="BrowseServer('myFile')" />
                    </div>
                </div>
            </div>
        </div>`;
            }
            else {
                document.querySelector('#upload').innerHTML = `<div class="custom-file col-6">
                        <input type="text" class="form-control" placeholder="Nhập minh chứng" id="myFile" name="myFile" readonly />
                        <input type="button" value="Tải minh chứng" onclick="BrowseServer('myFile')" />
                        <div id='tongthanhtien'></div>
                    </div>`;
                document.querySelector('#chondanhmuc').innerHTML = ``;
            }
        }
        if (valuelsp == "BaiBao" && valuerank == "Giảng viên" && valueloaihinh == "Nghiên cứu mạnh") {
            document.querySelector('#upload').innerHTML = ``;
            document.querySelector('#chondanhmuc').innerHTML = `
                <div class="card-header">
            <h3 class="card-title">Chọn danh mục</h3>
        </div>

        <div class="card-body">
            <div class="row">
                <div class="col-6">
                    <div class="custom-control custom-radio">
                        <input class="custom-control-input" type="radio" id="traCuuDM" name="selectDM" value="Tra cứu danh mục theo issn hoặc eissn" checked onclick="movedmk()">
                        <label for="traCuuDM" class="custom-control-label">Tra cứu danh mục theo Issn hoặc Eissn</label>
                        <select name="" id="option-national-country" class="form-control col-4" onchange="clear_option()">
                            <option value="0.8">Quốc tế</option>
                            <option value="0.2">Trong nước</option>
                        </select>
                    </div>
                </div>
                <div class="col-1">
                </div>
                <div class="col-5" id="danhmuckhac">

                    <div class="custom-control custom-radio">
                        <input class="custom-control-input" type="radio" id="dmk" name="selectDM" value="Danh mục khác" onclick="danhMucKhac()">
                        <label for="dmk" class="custom-control-label">Danh mục khác</label>
                    </div>
                    <div class="custom-control custom-radio">
                        <div id="div-dmk">
                        </div>
                    </div>
                </div>
            </div>
            <div class="row">
                <br />
            </div>
            <div class="row">
                <div class="col-6">
                    <div class="row">
                        <div class="col-9">
                            <div class="input-group mb-3">
                                <input type="text" class="form-control" id="search-issn" name="search-issn-eissn" placeholder="Tra cứu danh mục theo issn hoặc eissn">
                            </div>
                        </div>
                        <div class="col-3">
                            <div class="input-group mb-3">
                                <input class="btn btn-default form-control" id="inpsearch-3" type="submit" value="Tìm kiếm" onclick="Get_issn(renderGet_issn)">
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="result-issn-eissn" id="checkbox-result-issn-eissn">
                        </div>
                    </div>
                    <div id="tongthanhtien2"></div>
                    <div id="tongthanhtien"></div>
                </div>
                <div class="col-1">
                </div>
                <div class="col-5">

                    <div class="custom-file">
                        <input type="text" class="form-control" placeholder="Nhập minh chứng" id="myFile" name="myFile" readonly />
                        <input type="button" value="Tải minh chứng" onclick="BrowseServer('myFile')" />
                    </div>
                </div>
            </div>
        </div>`;
        }
        if (valuelsp == "BaiBao" && valuerank == "Nghiên cứu viên 1" && valueloaihinh == "Nghiên cứu mạnh") {
            document.querySelector('#upload').innerHTML = ``;
            document.querySelector('#chondanhmuc').innerHTML = `
                <div class="card-header">
            <h3 class="card-title">Chọn danh mục</h3>
        </div>

        <div class="card-body">
            <div class="row">
                <div class="col-6">
                    <div class="custom-control custom-radio">
                        <input class="custom-control-input" type="radio" id="traCuuDM" name="selectDM" value="Tra cứu danh mục theo issn hoặc eissn" checked onclick="movedmk()">
                        <label for="traCuuDM" class="custom-control-label">Tra cứu danh mục theo Issn hoặc Eissn</label>
                        <select name="" id="option-national-country" class="form-control col-4" onchange="clear_option()">
                            <option value="0.8">Quốc tế</option>
                            <option value="0.2">Trong nước</option>
                        </select>
                    </div>
                </div>
                <div class="col-1">
                </div>
                <div class="col-5" id="danhmuckhac">

                    <div class="custom-control custom-radio">
                        <input class="custom-control-input" type="radio" id="dmk" name="selectDM" value="Danh mục khác" onclick="danhMucKhac()">
                        <label for="dmk" class="custom-control-label">Danh mục khác</label>
                    </div>
                    <div class="custom-control custom-radio">
                        <div id="div-dmk">
                        </div>
                    </div>
                </div>
            </div>
            <div class="row">
                <br />
            </div>
            <div class="row">
                <div class="col-6">
                    <div class="row">
                        <div class="col-9">
                            <div class="input-group mb-3">
                                <input type="text" class="form-control" id="search-issn" name="search-issn-eissn" placeholder="Tra cứu danh mục theo issn hoặc eissn">
                            </div>
                        </div>
                        <div class="col-3">
                            <div class="input-group mb-3">
                                <input class="btn btn-default form-control" id="inpsearch-3" type="submit" value="Tìm kiếm" onclick="Get_issn(renderGet_issn)">
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="result-issn-eissn" id="checkbox-result-issn-eissn">
                        </div>
                    </div>
                    <div id="tongthanhtien2"></div>
                    <div id="tongthanhtien"></div>
                </div>
                <div class="col-1">
                </div>
                <div class="col-5">

                    <div class="custom-file">
                        <input type="text" class="form-control" placeholder="Nhập minh chứng" id="myFile" name="myFile" readonly />
                        <input type="button" value="Tải minh chứng" onclick="BrowseServer('myFile')" />
                    </div>
                </div>
            </div>
        </div>`;
        }
    }
    //-----------------------------------
    function Get_loaisanpham(a, callback) {
        fetch(linkapilsp + a, {
            headers: {
                'Authorization': 'Bearer ' + _token,
                //
                'Content-Type': 'application/json'
            }
        })
            .then(function (response) {
                return response.json();
            })
            .then(callback)
    }

    function render_lsp(lsps) {
        var checkbox = document.querySelector('#loaisanpham');
        try {
            document.querySelector('#tongthanhtien').innerHTML = ``;

            var htmls = lsps.map(function (lsp) {
                return `<div class="custom-control custom-radio">
                        <input class="custom-control-input" type="radio" id="${lsp.id}" name="yc" value="${lsp.yeuCauChatLuong}" onclick="checkcheck(${lsp.id},render_check(${lsp.kinhPhi}))">
                        <label for="${lsp.id}" class="custom-control-label">${lsp.yeuCauChatLuong} </label>
                    </div>`;
            });
        } catch { }
        var valueoption = document.querySelector('#option-national-country');
        var textvalueoption = valueoption.options[valueoption.selectedIndex].textContent;
        if (textvalueoption != "") {
            document.querySelector('#chondanhmuc').innerHTML = `
                <div class="card-header">
            <h3 class="card-title">Chọn danh mục</h3>
        </div>

        <div class="card-body">
            <div class="row">
                <div class="col-6">
                    <div class="custom-control custom-radio">
                        <input class="custom-control-input" type="radio" id="traCuuDM" name="selectDM" value="Tra cứu danh mục theo issn hoặc eissn" checked onclick="movedmk()">
                        <label for="traCuuDM" class="custom-control-label">Tra cứu danh mục theo Issn hoặc Eissn</label>
                        <select name="" id="option-national-country" class="form-control col-4" onchange="clear_option()" disable>
                            <option value="0.2">Trong nước</option>
                        </select>
                    </div>
                </div>
                <div class="col-1">
                </div>
                <div class="col-5" id="danhmuckhac">

                    <div class="custom-control custom-radio">
                        <input class="custom-control-input" type="radio" id="dmk" name="selectDM" value="Danh mục khác" onclick="danhMucKhac()">
                        <label for="dmk" class="custom-control-label">Danh mục khác</label>
                    </div>
                    <div class="custom-control custom-radio">
                        <div id="div-dmk">
                        </div>
                    </div>
                </div>
            </div>
            <div class="row">
                <br />
            </div>
            <div class="row">
                <div class="col-6">
                    <div class="row">
                        <div class="col-9">
                            <div class="input-group mb-3">
                                <input type="text" class="form-control" id="search-issn" name="search-issn-eissn" placeholder="Tra cứu danh mục theo issn hoặc eissn">
                            </div>
                        </div>
                        <div class="col-3">
                            <div class="input-group mb-3">
                                <input class="btn btn-default form-control" id="inpsearch-3" type="submit" value="Tìm kiếm" onclick="Get_issn(renderGet_issn)">
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="result-issn-eissn" id="checkbox-result-issn-eissn">
                        </div>
                    </div>
                    <div id="tongthanhtien2"></div>
                    <div id="tongthanhtien"></div>
                </div>
                <div class="col-1">
                </div>
                <div class="col-5">

                    <div class="custom-file">
                       <input type="text" class="form-control" placeholder="Nhập minh chứng" id="myFile" name="myFile" readonly />
                        <input type="button" value="Tải minh chứng" onclick="BrowseServer('myFile')" />
                    </div>
                </div>
            </div>
        </div>`;
        }

        checkbox.innerHTML = htmls.join('');
    }

    document.getElementsByName('lsp').onchange = function () {
        document.querySelector('#loaisanpham').innerHTML = ``;
    }
    //-----------------------------------

    //-----------------------------------
    //load radio khi chon hinh thuc thanh toan
    function loadradio() {
        document.querySelector('#yeucauchatluong').innerHTML = ``;
        try {
            document.querySelector('#tongthanhtien').innerHTML = ``;
        } catch { }
        document.querySelector('#loaisanpham').innerHTML = ``;
        document.querySelector('#loaibaibao').innerHTML = ``;
        var valuerank = document.querySelector('input[name="tick-rank"]:checked').value;
        if (valuerank != "Giảng viên") {
            document.querySelector('#yeucauchatluong').innerHTML =
                `<div class="col-4">
                <div class="custom-control custom-radio">
                    <input class="custom-control-input" type="radio" id="baibaokhcn-ncv" name="lsp" value="BaiBao" onclick="Get_thanhtoanncv('BaiBao',render_spkhcn)">
                    <label for="baibaokhcn-ncv" class="custom-control-label">BÀI BÁO</label>
                </div>
            </div>
            <div class="col-4">
                <div class="custom-control custom-radio">
                    <input class="custom-control-input" type="radio" id="sachkhcn-ncv" name="lsp" value="Sach" onclick="Get_thanhtoanncv('Sach',render_spkhcn)">
                    <label for="sachkhcn-ncv" class="custom-control-label">SÁCH/CHƯƠNG SÁCH</label>
                </div>
            </div>
            <div class="col-4">
                <div class="custom-control custom-radio">
                    <input class="custom-control-input" type="radio" id="spkkhcn-ncv" name="lsp" value="SPK" onclick="Get_thanhtoanncv('SPK',render_spkhcn)">
                    <label for="spkkhcn-ncv" class="custom-control-label">SẢN PHẨM KHÁC</label>
                </div>
            </div>`;
        } else {
            document.querySelector('#yeucauchatluong').innerHTML =
                `<div class="col-4">
                <div class="custom-control custom-radio">
                    <input class="custom-control-input" type="radio" id="baibao" name="lsp" value="BaiBao" onclick="loadloaibaibao()">
                    <label for="baibao" class="custom-control-label">BÀI BÁO</label>
                </div>
            </div>
            <div class="col-4">
                <div class="custom-control custom-radio">
                    <input class="custom-control-input" type="radio" id="spud" name="lsp" value="SPUD" onclick="loadloaibaibao()">
                    <label for="spud" class="custom-control-label">SẢN PHẨM ỨNG DỤNG</label>
                </div>
            </div>
            <div class="col-4">
                <div class="custom-control custom-radio">
                    <input class="custom-control-input" type="radio" id="shtt" name="lsp" value="SHTT" onclick="loadloaibaibao()">
                    <label for="shtt" class="custom-control-label">SỞ HỮU TRÍ TUỆ</label>
                </div>
            </div>`;
        }
    }
    function loadradio2() {
        document.querySelector('#yeucauchatluong').innerHTML = ``;
        document.querySelector('#loaisanpham').innerHTML = ``;
        var valuerank = document.querySelector('input[name="tick-rank"]:checked').value;
        try {
            document.querySelector('#tongthanhtien').innerHTML = ``;
        } catch { }
        document.querySelector('#loaibaibao').innerHTML = ``;
        var loaihinh = document.querySelector('input[name="tick-rank-kekhai"]:checked').value;
        if (valuerank == "Nghiên cứu viên 1" && loaihinh == "Nghiên cứu mạnh") {
            document.querySelector('#yeucauchatluong').innerHTML =
                `<div class="col-4">
                <div class="custom-control custom-radio">
                    <input class="custom-control-input" type="radio" id="baibaokhcn-ncv" name="lsp" value="BaiBao" onclick="Get_thanhtoanncv('BaiBao',render_spkhcn)">
                    <label for="baibaokhcn-ncv" class="custom-control-label">BÀI BÁO</label>
                </div>
            </div>
            <div class="col-4">
                <div class="custom-control custom-radio">
                    <input class="custom-control-input" type="radio" id="spkkhcn-ncv" name="lsp" value="SPK" onclick="Get_thanhtoanncv('SPK',render_spkhcn)">
                    <label for="spkkhcn-ncv" class="custom-control-label">SẢN PHẨM KHÁC</label>
                </div>
            </div>`;
        }
        if (valuerank == "Nghiên cứu viên 1" && loaihinh == "Khối lượng") {
            document.querySelector('#yeucauchatluong').innerHTML =
                `<div class="col-4">
                <div class="custom-control custom-radio">
                    <input class="custom-control-input" type="radio" id="baibaokhcn-ncv" name="lsp" value="BaiBao" onclick="Get_thanhtoanncv('BaiBao',render_spkhcn)">
                    <label for="baibaokhcn-ncv" class="custom-control-label">BÀI BÁO</label>
                </div>
            </div>
            <div class="col-4">
                <div class="custom-control custom-radio">
                    <input class="custom-control-input" type="radio" id="sachkhcn-ncv" name="lsp" value="Sach" onclick="Get_thanhtoanncv('Sach',render_spkhcn)">
                    <label for="sachkhcn-ncv" class="custom-control-label">SÁCH/CHƯƠNG SÁCH</label>
                </div>
            </div>
            <div class="col-4">
                <div class="custom-control custom-radio">
                    <input class="custom-control-input" type="radio" id="spkkhcn-ncv" name="lsp" value="SPK" onclick="Get_thanhtoanncv('SPK',render_spkhcn)">
                    <label for="spkkhcn-ncv" class="custom-control-label">SẢN PHẨM KHÁC</label>
                </div>
            </div>`;
        }
        if (valuerank == "Giảng viên" && loaihinh == "Nghiên cứu mạnh") {
            document.querySelector('#yeucauchatluong').innerHTML =
                `<div class="col-4">
                <div class="custom-control custom-radio">
                    <input class="custom-control-input" type="radio" id="baibaokhcn-ncv" name="lsp" value="BaiBao" onclick="Get_thanhtoanncv('BaiBao',render_spkhcn)">
                    <label for="baibaokhcn-ncv" class="custom-control-label">BÀI BÁO</label>
                </div>
            </div>
            <div class="col-4">
                <div class="custom-control custom-radio">
                    <input class="custom-control-input" type="radio" id="spkkhcn-ncv" name="lsp" value="SPK" onclick="Get_thanhtoanncv('SPK',render_spkhcn)">
                    <label for="spkkhcn-ncv" class="custom-control-label">SẢN PHẨM KHÁC</label>
                </div>
            </div>`;
        } else if (valuerank == "Giảng viên" && loaihinh == "Khối lượng") {
            document.querySelector('#yeucauchatluong').innerHTML =
                `<div class="col-2">
                    <div class="custom-control custom-radio">
                        <input class="custom-control-input" type="radio" id="sgv" name="lsp" value="Sach"  onclick="Get_spkhcn('Sach',render_spkhcn)">
                        <label for="sgv" class="custom-control-label">SÁCH</label>
                    </div>
                </div>
                <div class="col-2">
                    <div class="custom-control custom-radio">
                        <input class="custom-control-input" type="radio" id="dtgv" name="lsp" value="DeTai" onclick="Get_spkhcn('DeTai',render_spkhcn)">
                        <label for="dtgv" class="custom-control-label">ĐỀ TÀI NCKH</label>
                    </div>
                </div>
                <div class="col-2">
                    <div class="custom-control custom-radio">
                        <input class="custom-control-input" type="radio" id="tcgv" name="lsp" value="TapChi" onclick="Get_spkhcn('TapChi',render_spkhcn)">
                        <label for="tcgv" class="custom-control-label">TẠP CHÍ</label>
                    </div>
                </div>

                <div class="col-2">
                    <div class="custom-control custom-radio">
                        <input class="custom-control-input" type="radio" id="shttgv" name="lsp" value="HDSV" onclick="Get_spkhcn('HDNCKH',render_spkhcn)">
                        <label for="shttgv" class="custom-control-label">HDSV</label>
                    </div>
                </div>
                <div class="col-2">
                    <div class="custom-control custom-radio">
                        <input class="custom-control-input" type="radio" id="ntgv" name="lsp" value="SHTT" onclick="Get_spkhcn('SHTT',render_spkhcn)">
                        <label for="ntgv" class="custom-control-label">Sở hữu trí tuệ</label>
                    </div>
                </div>
                <div class="col-2">
                    <div class="custom-control custom-radio">
                        <input class="custom-control-input" type="radio" id="spkkhcn-ncv" name="lsp" value="NgheThuat" onclick="Get_spkhcn('NgheThuat',render_spkhcn)">
                        <label for="spkkhcn-ncv" class="custom-control-label">SP NGHỆ THUẬT</label>
                    </div>
                </div>`;
        } else if (valuerank == "Giảng viên" && loaihinh == "Đề tài") {
            document.querySelector('#yeucauchatluong').innerHTML =
                `<div class="col-2">
                    <div class="custom-control custom-radio">
                        <input class="custom-control-input" type="radio" id="BaiBao" name="lsp" value="Bài báo"  onclick="loadloaibaibao()">
                        <label for="BaiBao" class="custom-control-label">BÀI BÁO QUỐC TẾ</label>
                    </div>
                </div>
                <div class="col-4">
                    <div class="custom-control custom-radio">
                        <input class="custom-control-input" type="radio" id="baibaoqt" name="lsp" value="CSP" onclick="Get_loaisanpham('BaiBao_CSP',render_lsp)">
                        <label for="baibaoqt" class="custom-control-label">BÀI BÁO TRONG NƯỚC</label>
                    </div>
                </div>
                <div class="col-2">
                    <div class="custom-control custom-radio">
                        <input class="custom-control-input" type="radio" id="SPUD" name="lsp" value="Sản phẩm ứng dụng"  onclick="Get_spkhcn_lsp('SPUD',render_spkhcn)">
                        <label for="SPUD" class="custom-control-label">SẢN PHẨM ỨNG DỤNG</label>
                    </div>
                </div>

                `;
        }
    }

    //----------------------------------

    //Tinh tien

    function checkcheck(a, callback) {
        fetch(linkapiID + a, {
            headers: {
                'Authorization': 'Bearer ' + _token,
                //
                'Content-Type': 'application/json'
            }
        })
            .then(function (res) {
                return res.json(); Ï
            })
            .then(callback);
    }
    function render_check2(diem, tietchuan, lsps) {
        var checkbox = document.querySelector('#tongthanhtien');
        var tg = Number(document.querySelector('#tacgia').value);
        //var cq = Number(document.querySelector('#coquancongtac').value);
        var Diem = Number(diem);
        var TC = Number(tietchuan);
        checkbox.innerHTML = `<label style="color: red; margin-left: 60%; font-size: 120%"> Tổng kinh phí: <label id="total">${tongkinhphi}</label> </label>`;
    }
    function render_check(kinhphi, lsps) {
        try {
            var checkbox = document.querySelector('#tongthanhtien');
        } catch { }
        var tg = Number(document.querySelector('#tacgia').value);
        //var cq = Number(document.querySelector('#coquancongtac').value);
        var tongkinhphi = Number(kinhphi);
        checkbox.innerHTML = `<label style="color: red; margin-left: 60%; font-size: 120%"> Tổng kinh phí: <label id="total">${tongkinhphi}</label> </label>`;
    }

    linkapiID2 = "https://localhost:44364/api/QuyDoiGV/Get-id?id=";
    function checkcheckncv(a, callback) {
        fetch(linkapiID2 + a, {
            headers: {
                'Authorization': 'Bearer ' + _token,
                //
                'Content-Type': 'application/json'
            }
        })
            .then(function (res) {
                return res.json(); Ï
            })
            .then(callback);
    }

    function render_checkncv(tietchuan, diem, lsps) {
        show_yc();
        try {
            var checkbox = document.querySelector('#tongthanhtien');
            checkbox.innerHTML = `<label style="font-size:1.5rem;color:#dc3545">Tiết chuẩn:</label> <label id="tietchuan"style="font-size:1.5rem;color:#dc3545">${tietchuan}</label>   <label style="font-size:1.5rem;color:#dc3545">Điểm:</label> <label id="diem" style="font-size:1.5rem;color:#dc3545">${diem}</label>`;
        } catch { }
        /*if (texttacgia == "Tác giả chính") {
            if (sltg == 1) {
                thucnhantietchuan = Number(tietchuan);
                thucnhandiem = Number(diem);
            } else if (sltg > 1) {
                thucnhandiem = Number(diem) / 2;
                thucnhantietchuan = (Number(tietchuan) * 0.8) / 2;
            }
        }
        if (texttacgia == "Tác giả phụ") {
            if (sltg > 2) {
                thucnhantietchuan = (tietchuan * 0.2) / (sltg - 2);
                thucnhandiem = diem / 2;
            } else {
                //
            }
        }
        if (texttacgia == "Tác giả liên hệ") {
            if (sltg == 1) {
                thucnhantietchuan = tietchuan;
                thucnhandiem = diem;
            } else if (sltg > 1) {
                thucnhantietchuan = (tietchuan * 0.8) / 2;
                thucnhandiem = diem / 2;
            }
        }

        var valuerank = document.querySelector('input[name="tick-rank"]:checked').value;
        if (valuerank != "Giảng viên") {
            checkbox.innerHTML = `<label style="color: red; margin-left: 60%; font-size: 120%"> Tổng tiết tiết chuẩn/điểm:<label id="total"> ${thucnhantietchuan}/${thucnhandiem}</label > </label >`;
        } else {
            checkbox.innerHTML = `<label style="color: red; margin-left: 60%; font-size: 120%"> Tổng tiết chuẩn/điểm:<label id="total"> ${thucnhantietchuan}/${thucnhandiem}</label > </label >`;
        }*/
    }
    //----------------------------------

    // gửi xét duyệt
    function send(data) {
        var linksend = "https://localhost:44364/api/DanhMucXetDuyet/Send";
        var options = {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
                'Authorization': 'Bearer ' + _token,
            },
            body: JSON.stringify(data),
        };
        fetch(linksend, options)
            .then(response => {
                if (response.ok) {
                    alert('Đăng ký thành công');
                    /*window.location.href = '/Article/SendMail';*/
                    window.location.href = '/NguoiDung/DeTai'
                } else if (response.status == 400) {
                    alert('Tên bài báo đã được đăng ký!');
                } else {
                    alert('Có lỗi! Vui lòng kiểm tra lại.');
                }
            });
    }

    function groupUser() {
        var table = document.getElementById("tbtacgia2");
        var groupUser = "";

        for (let i = 1; i < table.rows.length; i++) {
            const row = table.rows[i];

            for (let j = 0; j < row.cells.length; j++) {
                const cell = row.cells[j];
                groupUser += cell.textContent + ";";
            }

            groupUser = groupUser.slice(0, -1);
            groupUser += "$";
        }
        groupUser = groupUser.slice(0, -1);
        return groupUser;
    }
    function handleSend() {
        var sltg = document.querySelector('#tongsltg').textContent;
        var valueloaihinh = document.querySelector('input[name="tick-rank-kekhai"]:checked').value;
        var minhchung = document.getElementById("myFile").value;
        var minhchungtenbaibao = document.getElementById("myFile2").value;
        var date = document.querySelector('#datesubmit').value;
        var valuerank = document.querySelector('input[name="tick-rank"]:checked').value;
        var valuetenbaibao = document.querySelector('#input-name').value;
        var valuecategory = document.querySelector('input[name="category"]:checked').value;
        var valuelbname = document.querySelector('#lbname').textContent;
        //alert("Tên danh mục:" + valuelbname + valueloaihinh + date + valuerank + valuetenbaibao + valuecategory + valuelbname);
        var valueyeucau = document.querySelector('input[name="yc"]:checked').value;
        ///
        var valuelbissn = document.querySelector('#lbissn').textContent;
        var total = document.querySelector('#total').textContent;
        // alert("issn:" + valuelbissn);
        var valuelbeissn = document.querySelector('#lbeissn').textContent;
        // alert("eissn:" + valuelbeissn);
        var optionstacgia = document.querySelector('#tacgia');
        var texttacgia = optionstacgia.options[optionstacgia.selectedIndex].textContent;
        // alert("Tác giả:" + texttacgia);
        var tg = groupUser();

        /*var mnv = table.rows[i].cells[1].textContent;
        var coquan = table.rows[i].cells[2].textContent;
        var loaitacgia = table.rows[i].cells[3].textContent;
        var tongnhan = table.rows[i].cells[4].textContent;
        var thucnhan = table.rows[i].cells[5].textContent;
        var diem = table.rows[i].cells[6].textContent;
        var tiet = table.rows[i].cells[7].textContent;
        var mnvtgc = table.rows[1].cells[1].textContent;
        var tg = mnv + ";" + coquan + ";" + loaitacgia + ";" + tongnhan + ";" + thucnhan + ";" + diem + ";" + tiet;*/

        var data = {
            journal_name: valuelbname,
            issn: valuelbissn,
            eissn: valuelbeissn,
            category: valuecategory,
            citations: "",
            if_2022: "",
            jci: "",
            percentageOAGold: "",
            userId: _idUser,
            rank: valuerank,
            image: minhchung,
            imageTenBB: minhchungtenbaibao,
            link: "",
            tenBaiBao: valuetenbaibao,
            type: valueyeucau,
            groupUser: tg,
            status: "Đang đợi duyệt",
            quantity: sltg,
            total: total,
            dateSubmit: date
        }
        send(data);
    }

  var selectedFilesArray = []; // Mảng chứa danh sách file đã chọn

  // Hàm rút gọn tên file
  function shortenFileName(fileName, maxLength = 15) {
    // Kiểm tra độ dài fileName, nếu nhỏ hơn hoặc bằng maxLength thì không cần rút gọn
    if (fileName.length <= maxLength) return fileName;

    const extIndex = fileName.lastIndexOf('.'); // Lấy vị trí dấu chấm cuối cùng (phần mở rộng file)
    const extension = extIndex !== -1 ? fileName.slice(extIndex) : ''; // Phần mở rộng file (nếu có)
    const baseName = fileName.slice(0, extIndex); // Phần tên trước dấu chấm

    // Giữ lại 7 ký tự đầu và 4 ký tự cuối, giữa là '...'
    const start = baseName.slice(0, 7);
    const end = baseName.slice(-4);

    return `${start}...${end}${extension}`;
  }

  // Hàm xử lý khi chọn file
  function handleFileSelect(event) {
    const files = event.target.files;
    selectedFilesArray = Array.from(files);
    displaySelectedFiles();
  }

  // Hàm hiển thị danh sách file đã chọn
  function displaySelectedFiles() {
    const fileListContainer = document.getElementById('selectedFiles');
    fileListContainer.innerHTML = ''; // Xóa nội dung cũ

    selectedFilesArray.forEach((file, index) => {
      const fileDiv = document.createElement('div');
      fileDiv.className = 'col-4 file-item';

      const fileName = document.createElement('span');
      fileName.textContent = shortenFileName(file.name);  // Rút gọn tên file

      const removeButton = document.createElement('button');
      removeButton.textContent = 'X';
      removeButton.className = 'btn btn-danger btn-sm';
      removeButton.style.position = 'absolute';
      removeButton.style.top = '5px';
      removeButton.style.right = '5px';
      removeButton.onclick = function () {
        removeFile(index);
      };

      fileDiv.appendChild(fileName);
      fileDiv.appendChild(removeButton);
      fileListContainer.appendChild(fileDiv);
    });
  }

  function removeFile(index) {
    selectedFilesArray.splice(index, 1); // Xóa file từ mảng
    displaySelectedFiles(); // Cập nhật lại giao diện
  }

  // Hàm upload file
  function uploadFiles() {
    var fileInput = document.getElementById('fileInput');
    var files = fileInput.files;
    const userId = _idUser;
    const valuetenbaibao = document.querySelector('#input-name').value;

    const maxFileSize = 10 * 1024 * 1024; // Giới hạn dung lượng là 10MB

    if (files.length === 0) {
      toastr.warning('Vui lòng chọn tệp tin để tải lên.');
      return;
    }

    let uploadPromises = []; // Mảng chứa các Promise upload file

    Array.from(files).forEach(file => { // Duyệt qua từng file để upload
      // Kiểm tra dung lượng file
      if (file.size > maxFileSize) {
        toastr.error(`Tệp tin ${file.name} vượt quá giới hạn dung lượng 10MB.`);
        return;
      }

      const reader = new FileReader();

      // Tạo Promise upload file
      let uploadPromise = new Promise((resolve, reject) => {
        reader.onload = function (event) {
          // Chuyển file thành base64 string
          const base64String = event.target.result.replace('data:', '').replace(/^.+,/, '');

          var data = {
            fileName: file.name,
            fileData: base64String,
            userId: userId,
          };

          $.ajax({
            url: '/Article/SaveFile',
            type: 'POST',
            data: JSON.stringify(data),
            contentType: 'application/json',
            success: function (result) {
              if (result.success) {
                //console.log(result.filePath);
                resolve(result.filePath);
              } else {
                reject('Tải lên thất bại.');
              }
            },
            error: function () {
              reject('Đã xảy ra lỗi khi tải lên.');
            }
          });
        };

        reader.readAsDataURL(file); // Đọc file dưới dạng base64
      });

      uploadPromises.push(uploadPromise); // Thêm Promise vào mảng
    });

    // Khi tất cả các file đã upload xong
    Promise.all(uploadPromises)
      .then(filePaths => {
        toastr.success('Tải lên thành công.');
        // Hiển thị danh sách file đã upload thành công
        selectedFilesArray = [];
        displaySelectedFiles();
        displayUploadedFiles(filePaths);
      })
      .catch(error => {
        toastr.error(error);
      });
  }

  // Hàm hiển thị danh sách file đã upload
  function displayUploadedFiles(files) {
    const uploadedFilesContainer = document.getElementById('uploadedFiles');
    uploadedFilesContainer.innerHTML = ''; // Xóa nội dung cũ

    files.forEach((fileUrl) => {
      const fileDiv = document.createElement('div');
      fileDiv.className = 'col-4 file-item';

      const fileLink = document.createElement('a');
      fileLink.href = fileUrl;
      fileLink.textContent = shortenFileName(fileUrl.split('/').pop()); // Hiển thị tên file đã rút gọn
      fileLink.target = '_blank';
      fileLink.className = 'd-block';

      const removeButton = document.createElement('button');
      removeButton.textContent = 'Xóa';
      removeButton.className = 'btn btn-danger btn-sm';
      removeButton.style.position = 'absolute';
      removeButton.style.top = '5px';
      removeButton.style.right = '5px';
      removeButton.onclick = function () {
        deleteUploadedFile(fileUrl, fileDiv);
      };

      fileDiv.appendChild(fileLink);
      fileDiv.appendChild(removeButton);
      uploadedFilesContainer.appendChild(fileDiv);
    });
  }

  // Hàm xóa file đã upload
  function deleteUploadedFile(fileUrl, fileDiv) {
    if (confirm("Bạn có chắc chắn muốn xóa tệp này không?")) {
      $.ajax({
        url: '/Article/DeleteFile',
        type: 'POST',
        data: JSON.stringify({ fileUrl: fileUrl }),
        contentType: 'application/json',
        success: function (result) {
          if (result.success) {
            toastr.success('Xóa tệp thành công.');
            // Xóa phần tử của file đã xóa khỏi giao diện
            fileDiv.remove();
          } else {
            toastr.error('Xóa tệp thất bại.');
          }
        },
        error: function () {
          toastr.error('Đã xảy ra lỗi khi xóa tệp.');
        }
      });
    }
  }

    //----------------------------------
    //document.querySelector('input[name="tick-rank"]:checked').value;
</script>